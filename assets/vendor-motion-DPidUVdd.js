import{r as u,j as M}from"./vendor-react-BBAiCqIe.js";import{i as zt,g as _t,s as Ct,a as Et,b as st,c as St,d as Xt,e as Kt,f as Yt,h as qt,r as Jt,j as Qt,k as Mt,l as Zt,m as te,n as ee,o as ne,S as se,H as oe,F as V,p as ie,q as Vt,t as F,u as ot,v as S,w as Lt,x as re,y as ae,z as ue,A as G,B as q,C as it,D as le,E as ce,G as E,I as fe,J as he,K as de,L as rt,M as me,N as pe,O as ge,P as ve,Q as k,R as ye,T as Pe,U as At,V as xe,W as we,X as Ce}from"./vendor-other-D1HXEB8n.js";const Z=u.createContext({});function O(e){const t=u.useRef(null);return t.current===null&&(t.current=e()),t.current}const Dt=typeof window<"u",bt=Dt?u.useLayoutEffect:u.useEffect,H=u.createContext(null),B=u.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function at(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ee(...e){return t=>{let n=!1;const s=e.map(o=>{const i=at(o,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<s.length;o++){const i=s[o];typeof i=="function"?i():at(e[o],null)}}}}function Se(...e){return u.useCallback(Ee(...e),e)}class Me extends u.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=n.offsetParent,o=zt(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=o-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ve({children:e,isPresent:t,anchorX:n,root:s}){var d;const o=u.useId(),i=u.useRef(null),r=u.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=u.useContext(B),f=((d=e.props)==null?void 0:d.ref)??(e==null?void 0:e.ref),h=Se(i,f);return u.useInsertionEffect(()=>{const{width:a,height:c,top:m,left:p,right:g}=r.current;if(t||!i.current||!a||!c)return;const P=n==="left"?`left: ${p}`:`right: ${g}`;i.current.dataset.motionPopId=o;const v=document.createElement("style");l&&(v.nonce=l);const y=s??document.head;return y.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${c}px !important;
            ${P}px !important;
            top: ${m}px !important;
          }
        `),()=>{y.contains(v)&&y.removeChild(v)}},[t]),M.jsx(Me,{isPresent:t,childRef:i,sizeRef:r,children:u.cloneElement(e,{ref:h})})}const Le=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:o,presenceAffectsLayout:i,mode:r,anchorX:l,root:f})=>{const h=O(Ae),d=u.useId();let a=!0,c=u.useMemo(()=>(a=!1,{id:d,initial:t,isPresent:n,custom:o,onExitComplete:m=>{h.set(m,!0);for(const p of h.values())if(!p)return;s&&s()},register:m=>(h.set(m,!1),()=>h.delete(m))}),[n,h,s]);return i&&a&&(c={...c}),u.useMemo(()=>{h.forEach((m,p)=>h.set(p,!1))},[n]),u.useEffect(()=>{!n&&!h.size&&s&&s()},[n]),r==="popLayout"&&(e=M.jsx(Ve,{isPresent:n,anchorX:l,root:f,children:e})),M.jsx(H.Provider,{value:c,children:e})};function Ae(){return new Map}function Tt(e=!0){const t=u.useContext(H);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=t,i=u.useId();u.useEffect(()=>{if(e)return o(i)},[e]);const r=u.useCallback(()=>e&&s&&s(i),[i,s,e]);return!n&&s?[!1,r]:[!0]}const R=e=>e.key||"";function ut(e){const t=[];return u.Children.forEach(e,n=>{u.isValidElement(n)&&t.push(n)}),t}const Wn=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:i="sync",propagate:r=!1,anchorX:l="left",root:f})=>{const[h,d]=Tt(r),a=u.useMemo(()=>ut(e),[e]),c=r&&!h?[]:a.map(R),m=u.useRef(!0),p=u.useRef(a),g=O(()=>new Map),P=u.useRef(new Set),[v,y]=u.useState(a),[x,L]=u.useState(a);bt(()=>{m.current=!1,p.current=a;for(let C=0;C<x.length;C++){const w=R(x[C]);c.includes(w)?(g.delete(w),P.current.delete(w)):g.get(w)!==!0&&g.set(w,!1)}},[x,c.length,c.join("-")]);const I=[];if(a!==v){let C=[...a];for(let w=0;w<x.length;w++){const A=x[w],$=R(A);c.includes($)||(C.splice(w,0,A),I.push(A))}return i==="wait"&&I.length&&(C=I),L(ut(C)),y(a),null}const{forceRender:N}=u.useContext(Z);return M.jsx(M.Fragment,{children:x.map(C=>{const w=R(C),A=r&&!h?!1:a===x||c.includes(w),$=()=>{if(P.current.has(w))return;if(P.current.add(w),g.has(w))g.set(w,!0);else return;let nt=!0;g.forEach($t=>{$t||(nt=!1)}),nt&&(N==null||N(),L(p.current),r&&(d==null||d()),s&&s())};return M.jsx(Le,{isPresent:A,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:i,root:f,onExitComplete:A?void 0:$,anchorX:l,children:C},w)})})},It=u.createContext({strict:!1}),lt={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let ct=!1;function De(){if(ct)return;const e={};for(const t in lt)e[t]={isEnabled:n=>lt[t].some(s=>!!n[s])};Ct(e),ct=!0}function Rt(){return De(),_t()}function be(e){const t=Rt();for(const n in e)t[n]={...t[n],...e[n]};Ct(t)}const Te=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function W(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Te.has(e)}let jt=e=>!W(e);function Ie(e){typeof e=="function"&&(jt=t=>t.startsWith("on")?!W(t):e(t))}try{Ie(require("@emotion/is-prop-valid").default)}catch{}function Re(e,t,n){const s={};for(const o in e)o==="values"&&typeof e.values=="object"||(jt(o)||n===!0&&W(o)||!t&&!W(o)||e.draggable&&o.startsWith("onDrag"))&&(s[o]=e[o]);return s}const U=u.createContext({});function je(e,t){if(Et(e)){const{initial:n,animate:s}=e;return{initial:n===!1||st(n)?n:void 0,animate:st(s)?s:void 0}}return e.inherit!==!1?t:{}}function ke(e){const{initial:t,animate:n}=je(e,u.useContext(U));return u.useMemo(()=>({initial:t,animate:n}),[ft(t),ft(n)])}function ft(e){return Array.isArray(e)?e.join(" "):e}const tt=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kt(e,t,n){for(const s in t)!St(t[s])&&!Xt(s,n)&&(e[s]=t[s])}function Fe({transformTemplate:e},t){return u.useMemo(()=>{const n=tt();return Kt(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Ge(e,t){const n=e.style||{},s={};return kt(s,n,e),Object.assign(s,Fe(e,t)),s}function We(e,t){const n={},s=Ge(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const Ft=()=>({...tt(),attrs:{}});function Oe(e,t,n,s){const o=u.useMemo(()=>{const i=Ft();return Yt(i,t,qt(s),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};kt(i,e.style,e),o.style={...i,...o.style}}return o}const He=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function et(e){return typeof e!="string"||e.includes("-")?!1:!!(He.indexOf(e)>-1||/[A-Z]/u.test(e))}function Be(e,t,n,{latestValues:s},o,i=!1,r){const f=(r??et(e)?Oe:We)(t,s,o,e),h=Re(t,typeof e=="string",i),d=e!==u.Fragment?{...h,...f,ref:n}:{},{children:a}=t,c=u.useMemo(()=>St(a)?a.get():a,[a]);return u.createElement(e,{...d,children:c})}function Ue({scrapeMotionValuesFromProps:e,createRenderState:t},n,s,o){return{latestValues:Ne(n,s,o,e),renderState:t()}}function Ne(e,t,n,s){const o={},i=s(e,{});for(const c in i)o[c]=Jt(i[c]);let{initial:r,animate:l}=e;const f=Et(e),h=Qt(e);t&&h&&!f&&e.inherit!==!1&&(r===void 0&&(r=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||r===!1;const a=d?l:r;if(a&&typeof a!="boolean"&&!Mt(a)){const c=Array.isArray(a)?a:[a];for(let m=0;m<c.length;m++){const p=Zt(e,c[m]);if(p){const{transitionEnd:g,transition:P,...v}=p;for(const y in v){let x=v[y];if(Array.isArray(x)){const L=d?x.length-1:0;x=x[L]}x!==null&&(o[y]=x)}for(const y in g)o[y]=g[y]}}}return o}const Gt=e=>(t,n)=>{const s=u.useContext(U),o=u.useContext(H),i=()=>Ue(e,t,s,o);return n?i():O(i)},$e=Gt({scrapeMotionValuesFromProps:te,createRenderState:tt}),ze=Gt({scrapeMotionValuesFromProps:ee,createRenderState:Ft}),_e=Symbol.for("motionComponentSymbol");function Xe(e,t,n){const s=u.useRef(n);u.useInsertionEffect(()=>{s.current=n});const o=u.useRef(null);return u.useCallback(i=>{var l;i&&((l=e.onMount)==null||l.call(e,i)),t&&(i?t.mount(i):t.unmount());const r=s.current;if(typeof r=="function")if(i){const f=r(i);typeof f=="function"&&(o.current=f)}else o.current?(o.current(),o.current=null):r(i);else r&&(r.current=i)},[t])}const Wt=u.createContext({});function D(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Ke(e,t,n,s,o,i){var P,v;const{visualElement:r}=u.useContext(U),l=u.useContext(It),f=u.useContext(H),h=u.useContext(B).reducedMotion,d=u.useRef(null);s=s||l.renderer,!d.current&&s&&(d.current=s(e,{visualState:t,parent:r,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:h,isSVG:i}));const a=d.current,c=u.useContext(Wt);a&&!a.projection&&o&&(a.type==="html"||a.type==="svg")&&Ye(d.current,n,o,c);const m=u.useRef(!1);u.useInsertionEffect(()=>{a&&m.current&&a.update(n,f)});const p=n[ne],g=u.useRef(!!p&&!((P=window.MotionHandoffIsComplete)!=null&&P.call(window,p))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,p)));return bt(()=>{a&&(m.current=!0,window.MotionIsMounted=!0,a.updateFeatures(),a.scheduleRenderMicrotask(),g.current&&a.animationState&&a.animationState.animateChanges())}),u.useEffect(()=>{a&&(!g.current&&a.animationState&&a.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,p)}),g.current=!1),a.enteringChildren=void 0)}),a}function Ye(e,t,n,s){const{layoutId:o,layout:i,drag:r,dragConstraints:l,layoutScroll:f,layoutRoot:h,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Ot(e.parent)),e.projection.setOptions({layoutId:o,layout:i,alwaysMeasureLayout:!!r||l&&D(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:d,layoutScroll:f,layoutRoot:h})}function Ot(e){if(e)return e.options.allowProjection!==!1?e.projection:Ot(e.parent)}function z(e,{forwardMotionProps:t=!1,type:n}={},s,o){s&&be(s);const i=n?n==="svg":et(e),r=i?ze:$e;function l(h,d){let a;const c={...u.useContext(B),...h,layoutId:qe(h)},{isStatic:m}=c,p=ke(h),g=r(h,m);if(!m&&Dt){Je();const P=Qe(c);a=P.MeasureLayout,p.visualElement=Ke(e,g,c,o,P.ProjectionNode,i)}return M.jsxs(U.Provider,{value:p,children:[a&&p.visualElement?M.jsx(a,{visualElement:p.visualElement,...c}):null,Be(e,h,Xe(g,p.visualElement,d),g,m,t,i)]})}l.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const f=u.forwardRef(l);return f[_e]=e,f}function qe({layoutId:e}){const t=u.useContext(Z).id;return t&&e!==void 0?t+"-"+e:e}function Je(e,t){u.useContext(It).strict}function Qe(e){const t=Rt(),{drag:n,layout:s}=t;if(!n&&!s)return{};const o={...n,...s};return{MeasureLayout:n!=null&&n.isEnabled(e)||s!=null&&s.isEnabled(e)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function Ze(e,t){if(typeof Proxy>"u")return z;const n=new Map,s=(i,r)=>z(i,r,e,t),o=(i,r)=>s(i,r);return new Proxy(o,{get:(i,r)=>r==="create"?s:(n.has(r)||n.set(r,z(r,void 0,e,t)),n.get(r))})}const tn=(e,t)=>t.isSVG??et(e)?new se(t):new oe(t,{allowProjection:e!==u.Fragment});class en extends V{constructor(t){super(t),t.animationState||(t.animationState=ie(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Mt(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let nn=0;class sn extends V{constructor(){super(...arguments),this.id=nn++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const on={animation:{Feature:en},exit:{Feature:sn}};function T(e){return{point:{x:e.pageX,y:e.pageY}}}const rn=e=>t=>Vt(t)&&e(t,T(t));function b(e,t,n,s){return F(e,t,rn(n),s)}const Ht=({current:e})=>e?e.ownerDocument.defaultView:null,ht=(e,t)=>Math.abs(e-t);function an(e,t){const n=ht(e.x,t.x),s=ht(e.y,t.y);return Math.sqrt(n**2+s**2)}const dt=new Set(["auto","scroll"]);class Bt{constructor(t,n,{transformPagePoint:s,contextWindow:o=window,dragSnapToOrigin:i=!1,distanceThreshold:r=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=m=>{this.handleScroll(m.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=X(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=an(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:P}=m,{timestamp:v}=ot;this.history.push({...P,timestamp:v});const{onStart:y,onMove:x}=this.handlers;p||(y&&y(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=_(p,this.transformPagePoint),S.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:g,onSessionEnd:P,resumeAnimation:v}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=X(m.type==="pointercancel"?this.lastMoveEventInfo:_(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(m,y),P&&P(m,y)},!Vt(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=r,this.contextWindow=o||window;const f=T(t),h=_(f,this.transformPagePoint),{point:d}=h,{timestamp:a}=ot;this.history=[{...d,timestamp:a}];const{onSessionStart:c}=n;c&&c(t,X(h,this.history)),this.removeListeners=Lt(b(this.contextWindow,"pointermove",this.handlePointerMove),b(this.contextWindow,"pointerup",this.handlePointerUp),b(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(t){let n=t.parentElement;for(;n;){const s=getComputedStyle(n);(dt.has(s.overflowX)||dt.has(s.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const n=this.scrollPositions.get(t);if(!n)return;const s=t===window,o=s?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},i={x:o.x-n.x,y:o.y-n.y};i.x===0&&i.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(t,o),S.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),re(this.updatePoint)}}function _(e,t){return t?{point:t(e.point)}:e}function mt(e,t){return{x:e.x-t.x,y:e.y-t.y}}function X({point:e},t){return{point:e,delta:mt(e,Ut(t)),offset:mt(e,un(t)),velocity:ln(t,.1)}}function un(e){return e[0]}function Ut(e){return e[e.length-1]}function ln(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const o=Ut(e);for(;n>=0&&(s=e[n],!(o.timestamp-s.timestamp>ae(t)));)n--;if(!s)return{x:0,y:0};const i=ue(o.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const r={x:(o.x-s.x)/i,y:(o.y-s.y)/i};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function cn(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?G(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?G(n,e,s.max):Math.min(e,n)),e}function pt(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function fn(e,{top:t,left:n,bottom:s,right:o}){return{x:pt(e.x,n,o),y:pt(e.y,t,s)}}function gt(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function hn(e,t){return{x:gt(e.x,t.x),y:gt(e.y,t.y)}}function dn(e,t){let n=.5;const s=q(e),o=q(t);return o>s?n=it(t.min,t.max-s,e.min):s>o&&(n=it(e.min,e.max-o,t.min)),le(0,1,n)}function mn(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const J=.35;function pn(e=J){return e===!1?e=0:e===!0&&(e=J),{x:vt(e,"left","right"),y:vt(e,"top","bottom")}}function vt(e,t,n){return{min:yt(e,t),max:yt(e,n)}}function yt(e,t){return typeof e=="number"?e:e[t]||0}const gn=new WeakMap;class vn{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ce(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const i=a=>{n?(this.stopAnimation(),this.snapToCursor(T(a).point)):this.pauseAnimation()},r=(a,c)=>{this.stopAnimation();const{drag:m,dragPropagation:p,onDragStart:g}=this.getProps();if(m&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pe(m),!this.openDragLock))return;this.latestPointerEvent=a,this.latestPanInfo=c,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),E(v=>{let y=this.getAxisMotionValue(v).get()||0;if(ge.test(y)){const{projection:x}=this.visualElement;if(x&&x.layout){const L=x.layout.layoutBox[v];L&&(y=q(L)*(parseFloat(y)/100))}}this.originPoint[v]=y}),g&&S.postRender(()=>g(a,c)),rt(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},l=(a,c)=>{this.latestPointerEvent=a,this.latestPanInfo=c;const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:g,onDrag:P}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:v}=c;if(p&&this.currentDirection===null){this.currentDirection=yn(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",c.point,v),this.updateAxis("y",c.point,v),this.visualElement.render(),P&&P(a,c)},f=(a,c)=>{this.latestPointerEvent=a,this.latestPanInfo=c,this.stop(a,c),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>E(a=>{var c;return this.getAnimationState(a)==="paused"&&((c=this.getAxisMotionValue(a).animation)==null?void 0:c.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Bt(t,{onSessionStart:i,onStart:r,onMove:l,onSessionEnd:f,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:s,contextWindow:Ht(this.visualElement),element:this.visualElement.current})}stop(t,n){const s=t||this.latestPointerEvent,o=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!o||!s)return;const{velocity:r}=o;this.startAnimation(r);const{onDragEnd:l}=this.getProps();l&&S.postRender(()=>l(s,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:o}=this.getProps();if(!s||!j(t,o,this.currentDirection))return;const i=this.getAxisMotionValue(t);let r=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(r=cn(r,this.constraints[t],this.elastic[t])),i.set(r)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,o=this.constraints;t&&D(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=fn(s.layoutBox,t):this.constraints=!1,this.elastic=pn(n),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&E(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=mn(s.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!D(t))return!1;const s=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const i=fe(s,o.root,this.visualElement.getTransformPagePoint());let r=hn(o.layout.layoutBox,i);if(n){const l=n(he(r));this.hasMutatedConstraints=!!l,l&&(r=de(l))}return r}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:o,dragTransition:i,dragSnapToOrigin:r,onDragTransitionEnd:l}=this.getProps(),f=this.constraints||{},h=E(d=>{if(!j(d,n,this.currentDirection))return;let a=f&&f[d]||{};r&&(a={min:0,max:0});const c=o?200:1e6,m=o?40:1e7,p={type:"inertia",velocity:s?t[d]:0,bounceStiffness:c,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...a};return this.startAxisValueAnimation(d,p)});return Promise.all(h).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return rt(this.visualElement,t),s.start(me(t,s,0,n,this.visualElement,!1))}stopAnimation(){E(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){E(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),o=s[n];return o||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){E(n=>{const{drag:s}=this.getProps();if(!j(n,s,this.currentDirection))return;const{projection:o}=this.visualElement,i=this.getAxisMotionValue(n);if(o&&o.layout){const{min:r,max:l}=o.layout.layoutBox[n],f=i.get()||0;i.set(t[n]-G(r,l,.5)+f)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!D(n)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};E(r=>{const l=this.getAxisMotionValue(r);if(l&&this.constraints!==!1){const f=l.get();o[r]=dn({min:f,max:f},this.constraints[r])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),E(r=>{if(!j(r,t,null))return;const l=this.getAxisMotionValue(r),{min:f,max:h}=this.constraints[r];l.set(G(f,h,o[r]))})}addListeners(){if(!this.visualElement.current)return;gn.set(this.visualElement,this);const t=this.visualElement.current,n=b(t,"pointerdown",f=>{const{drag:h,dragListener:d=!0}=this.getProps();h&&d&&!ve(f.target)&&this.start(f)}),s=()=>{const{dragConstraints:f}=this.getProps();D(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,i=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),S.read(s);const r=F(window,"resize",()=>this.scalePositionWithinConstraints()),l=o.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h})=>{this.isDragging&&h&&(E(d=>{const a=this.getAxisMotionValue(d);a&&(this.originPoint[d]+=f[d].translate,a.set(a.get()+f[d].translate))}),this.visualElement.render())});return()=>{r(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:i=!1,dragElastic:r=J,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:o,dragConstraints:i,dragElastic:r,dragMomentum:l}}}function j(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function yn(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Pn extends V{constructor(t){super(t),this.removeGroupControls=k,this.removeListeners=k,this.controls=new vn(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||k}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const Pt=e=>(t,n)=>{e&&S.postRender(()=>e(t,n))};class xn extends V{constructor(){super(...arguments),this.removePointerDownListener=k}onPointerDown(t){this.session=new Bt(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ht(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:Pt(t),onStart:Pt(n),onMove:s,onEnd:(i,r)=>{delete this.session,o&&S.postRender(()=>o(i,r))}}}mount(){this.removePointerDownListener=b(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let K=!1;class wn extends u.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:o}=this.props,{projection:i}=t;i&&(n.group&&n.group.add(i),s&&s.register&&o&&s.register(i),K&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ye.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:o,isPresent:i}=this.props,{projection:r}=s;return r&&(r.isPresent=i,K=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==i?r.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?r.promote():r.relegate()||S.postRender(()=>{const l=r.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Pe.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:o}=t;K=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Nt(e){const[t,n]=Tt(),s=u.useContext(Z);return M.jsx(wn,{...e,layoutGroup:s,switchLayoutGroup:u.useContext(Wt),isPresent:t,safeToRemove:n})}const Cn={pan:{Feature:xn},drag:{Feature:Pn,ProjectionNode:At,MeasureLayout:Nt}};function xt(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,i=s[o];i&&S.postRender(()=>i(t,T(t)))}class En extends V{mount(){const{current:t}=this.node;t&&(this.unmount=xe(t,(n,s)=>(xt(this.node,s,"Start"),o=>xt(this.node,o,"End"))))}unmount(){}}class Sn extends V{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Lt(F(this.node.current,"focus",()=>this.onFocus()),F(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function wt(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),i=s[o];i&&S.postRender(()=>i(t,T(t)))}class Mn extends V{mount(){const{current:t}=this.node;t&&(this.unmount=we(t,(n,s)=>(wt(this.node,s,"Start"),(o,{success:i})=>wt(this.node,o,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Q=new WeakMap,Y=new WeakMap,Vn=e=>{const t=Q.get(e.target);t&&t(e)},Ln=e=>{e.forEach(Vn)};function An({root:e,...t}){const n=e||document;Y.has(n)||Y.set(n,{});const s=Y.get(n),o=JSON.stringify(t);return s[o]||(s[o]=new IntersectionObserver(Ln,{root:e,...t})),s[o]}function Dn(e,t,n){const s=An(t);return Q.set(e,n),s.observe(e),()=>{Q.delete(e),s.unobserve(e)}}const bn={some:0,all:1};class Tn extends V{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:o="some",once:i}=t,r={root:n?n.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:bn[o]},l=f=>{const{isIntersecting:h}=f;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:d,onViewportLeave:a}=this.node.getProps(),c=h?d:a;c&&c(f)};return Dn(this.node.current,r,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(In(t,n))&&this.startObserver()}unmount(){}}function In({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Rn={inView:{Feature:Tn},tap:{Feature:Mn},focus:{Feature:Sn},hover:{Feature:En}},jn={layout:{ProjectionNode:At,MeasureLayout:Nt}},kn={...on,...Rn,...Cn,...jn},On=Ze(kn,tn);function Hn(e){const t=O(()=>Ce(e)),{isStatic:n}=u.useContext(B);if(n){const[,s]=u.useState(e);u.useEffect(()=>t.on("change",s),[])}return t}export{Wn as A,On as m,Hn as u};

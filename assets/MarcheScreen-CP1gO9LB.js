import{r as y,j as e}from"./vendor-react-BBAiCqIe.js";import{u as I,b as W,c as u,d as b,e as j,D as v,f as r}from"./index-C7rUvnqQ.js";import{m as S}from"./vendor-motion-DPidUVdd.js";import"./vendor-other-D1HXEB8n.js";import"./vendor-zustand-CsJFGcav.js";function L(){const{inventory:f,marketStock:a,gold:n,reputation:i,sellItem:k,buyItem:C,generateMarketStock:p,closeInventory:z}=I(),[o,x]=y.useState(null),[l,m]=y.useState(null),{playSound:h,playHaptic:g}=W();y.useEffect(()=>{a.length===0&&p()},[a.length,p]);const A=t=>{x(t)},R=()=>{o&&(k(o),h("coins"),g("button_press"),x(null))},E=t=>{m(t)},B=()=>{l&&C(l)&&(h("coins_loss"),g("button_press"),m(null))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",flex:1,padding:"1rem",overflowY:"auto"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"MARCHÃ‰ AUX CHAROGNES"}),e.jsxs("div",{style:{fontSize:"1rem",color:"#aaa"},children:["Or : ",e.jsxs("span",{style:{color:"#ca8",fontWeight:"bold"},children:[n,"ðŸ’°"]})," | ","RÃ©putation : ",e.jsx("span",{style:{color:"#ddd"},children:"â­".repeat(i)})]})]}),e.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"},children:"VENTE"}),f.length===0?e.jsx("div",{style:{color:"#888",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"Inventaire vide"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:f.map(t=>{const c=u(t,i),s=b(t.rarity);return e.jsxs("div",{style:{background:"#1a1a1a",padding:"0.75rem",borderRadius:"4px",border:`1px solid ${s}`,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:s},children:t.name}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#888"},children:j(t.rarity)})]}),e.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#ca8"},children:[c,"ðŸ’°"]})]}),e.jsx(v,{item:t,size:"small",showLabel:!1}),e.jsx("button",{onClick:()=>A(t),style:{fontSize:"0.9rem",padding:"0.5rem"},children:"VENDRE"})]},t.id)})})]}),e.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"},children:"ACHAT"}),a.length===0?e.jsx("div",{style:{color:"#888",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"Stock vide"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:a.map(t=>{const c=r(t,i),s=b(t.rarity),d=n>=c;return e.jsxs("div",{style:{background:"#1a1a1a",padding:"0.75rem",borderRadius:"4px",border:`1px solid ${s}`,display:"flex",flexDirection:"column",gap:"0.5rem",opacity:d?1:.6},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:s},children:t.name}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#888"},children:j(t.rarity)})]}),e.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:d?"#ca8":"#c44"},children:[c,"ðŸ’°"]})]}),e.jsx(v,{item:t,size:"small",showLabel:!1}),e.jsx("button",{onClick:()=>E(t),disabled:!d,style:{fontSize:"0.9rem",padding:"0.5rem",opacity:d?1:.5,cursor:d?"pointer":"not-allowed"},children:"ACHETER"})]},t.id)})})]}),e.jsx("button",{onClick:z,style:{fontSize:"1rem",padding:"1rem",width:"100%"},children:"RETOUR"}),o&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs(S.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},style:{background:"#2a2a2a",padding:"2rem",borderRadius:"8px",border:"2px solid #555",maxWidth:"400px",width:"90%"},children:[e.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem",textAlign:"center"},children:["Vendre ",o.name," ?"]}),e.jsxs("div",{style:{fontSize:"1.1rem",textAlign:"center",marginBottom:"1.5rem",color:"#ca8"},children:[u(o,i),"ðŸ’°"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:()=>x(null),style:{flex:1},children:"ANNULER"}),e.jsx("button",{onClick:R,style:{flex:1,background:"#3a2a2a"},children:"VENDRE"})]})]})}),l&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs(S.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},style:{background:"#2a2a2a",padding:"2rem",borderRadius:"8px",border:"2px solid #555",maxWidth:"400px",width:"90%"},children:[e.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem",textAlign:"center"},children:["Acheter ",l.name," ?"]}),e.jsxs("div",{style:{fontSize:"1.1rem",textAlign:"center",marginBottom:"1.5rem",color:n>=r(l,i)?"#ca8":"#c44"},children:[r(l,i),"ðŸ’°"]}),n<r(l,i)&&e.jsx("div",{style:{color:"#c44",textAlign:"center",marginBottom:"1rem",fontSize:"0.9rem"},children:"Or insuffisant"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:()=>m(null),style:{flex:1},children:"ANNULER"}),e.jsx("button",{onClick:B,disabled:n<r(l,i),style:{flex:1,background:"#3a2a2a",opacity:n>=r(l,i)?1:.5},children:"ACHETER"})]})]})})]})}export{L as default};

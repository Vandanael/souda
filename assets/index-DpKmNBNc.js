var Xy=Object.defineProperty;var Yy=(e,t,n)=>t in e?Xy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ae=(e,t,n)=>Yy(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Sm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bm={exports:{}},ro={},wm={exports:{}},O={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ti=Symbol.for("react.element"),Qy=Symbol.for("react.portal"),Jy=Symbol.for("react.fragment"),Zy=Symbol.for("react.strict_mode"),e0=Symbol.for("react.profiler"),t0=Symbol.for("react.provider"),n0=Symbol.for("react.context"),r0=Symbol.for("react.forward_ref"),i0=Symbol.for("react.suspense"),s0=Symbol.for("react.memo"),o0=Symbol.for("react.lazy"),Sc=Symbol.iterator;function a0(e){return e===null||typeof e!="object"?null:(e=Sc&&e[Sc]||e["@@iterator"],typeof e=="function"?e:null)}var Tm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cm=Object.assign,km={};function pr(e,t,n){this.props=e,this.context=t,this.refs=km,this.updater=n||Tm}pr.prototype.isReactComponent={};pr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};pr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jm(){}jm.prototype=pr.prototype;function Hl(e,t,n){this.props=e,this.context=t,this.refs=km,this.updater=n||Tm}var Gl=Hl.prototype=new jm;Gl.constructor=Hl;Cm(Gl,pr.prototype);Gl.isPureReactComponent=!0;var bc=Array.isArray,Em=Object.prototype.hasOwnProperty,Kl={current:null},Mm={key:!0,ref:!0,__self:!0,__source:!0};function Rm(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Em.call(t,r)&&!Mm.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ti,type:e,key:s,ref:o,props:i,_owner:Kl.current}}function l0(e,t){return{$$typeof:Ti,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ti}function u0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wc=/\/+/g;function Io(e,t){return typeof e=="object"&&e!==null&&e.key!=null?u0(""+e.key):t.toString(36)}function ss(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ti:case Qy:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Io(o,0):r,bc(i)?(n="",e!=null&&(n=e.replace(wc,"$&/")+"/"),ss(i,t,n,"",function(c){return c})):i!=null&&(Xl(i)&&(i=l0(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(wc,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",bc(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+Io(s,a);o+=ss(s,t,n,u,i)}else if(u=a0(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+Io(s,a++),o+=ss(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function _i(e,t,n){if(e==null)return e;var r=[],i=0;return ss(e,r,"","",function(s){return t.call(n,s,i++)}),r}function c0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ee={current:null},os={transition:null},d0={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:os,ReactCurrentOwner:Kl};function Pm(){throw Error("act(...) is not supported in production builds of React.")}O.Children={map:_i,forEach:function(e,t,n){_i(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _i(e,function(){t++}),t},toArray:function(e){return _i(e,function(t){return t})||[]},only:function(e){if(!Xl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};O.Component=pr;O.Fragment=Jy;O.Profiler=e0;O.PureComponent=Hl;O.StrictMode=Zy;O.Suspense=i0;O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d0;O.act=Pm;O.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Cm({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Kl.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Em.call(t,u)&&!Mm.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ti,type:e.type,key:i,ref:s,props:r,_owner:o}};O.createContext=function(e){return e={$$typeof:n0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t0,_context:e},e.Consumer=e};O.createElement=Rm;O.createFactory=function(e){var t=Rm.bind(null,e);return t.type=e,t};O.createRef=function(){return{current:null}};O.forwardRef=function(e){return{$$typeof:r0,render:e}};O.isValidElement=Xl;O.lazy=function(e){return{$$typeof:o0,_payload:{_status:-1,_result:e},_init:c0}};O.memo=function(e,t){return{$$typeof:s0,type:e,compare:t===void 0?null:t}};O.startTransition=function(e){var t=os.transition;os.transition={};try{e()}finally{os.transition=t}};O.unstable_act=Pm;O.useCallback=function(e,t){return Ee.current.useCallback(e,t)};O.useContext=function(e){return Ee.current.useContext(e)};O.useDebugValue=function(){};O.useDeferredValue=function(e){return Ee.current.useDeferredValue(e)};O.useEffect=function(e,t){return Ee.current.useEffect(e,t)};O.useId=function(){return Ee.current.useId()};O.useImperativeHandle=function(e,t,n){return Ee.current.useImperativeHandle(e,t,n)};O.useInsertionEffect=function(e,t){return Ee.current.useInsertionEffect(e,t)};O.useLayoutEffect=function(e,t){return Ee.current.useLayoutEffect(e,t)};O.useMemo=function(e,t){return Ee.current.useMemo(e,t)};O.useReducer=function(e,t,n){return Ee.current.useReducer(e,t,n)};O.useRef=function(e){return Ee.current.useRef(e)};O.useState=function(e){return Ee.current.useState(e)};O.useSyncExternalStore=function(e,t,n){return Ee.current.useSyncExternalStore(e,t,n)};O.useTransition=function(){return Ee.current.useTransition()};O.version="18.3.1";wm.exports=O;var b=wm.exports;const Im=Sm(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0=b,m0=Symbol.for("react.element"),p0=Symbol.for("react.fragment"),h0=Object.prototype.hasOwnProperty,g0=f0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y0={key:!0,ref:!0,__self:!0,__source:!0};function Lm(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)h0.call(t,r)&&!y0.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:m0,type:e,key:s,ref:o,props:i,_owner:g0.current}}ro.Fragment=p0;ro.jsx=Lm;ro.jsxs=Lm;bm.exports=ro;var l=bm.exports,ka={},Dm={exports:{}},Ne={},Am={exports:{}},_m={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,_){var z=R.length;R.push(_);e:for(;0<z;){var X=z-1>>>1,de=R[X];if(0<i(de,_))R[X]=_,R[z]=de,z=X;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var _=R[0],z=R.pop();if(z!==_){R[0]=z;e:for(var X=0,de=R.length,Di=de>>>1;X<Di;){var un=2*(X+1)-1,Po=R[un],cn=un+1,Ai=R[cn];if(0>i(Po,z))cn<de&&0>i(Ai,Po)?(R[X]=Ai,R[cn]=z,X=cn):(R[X]=Po,R[un]=z,X=un);else if(cn<de&&0>i(Ai,z))R[X]=Ai,R[cn]=z,X=cn;else break e}}return _}function i(R,_){var z=R.sortIndex-_.sortIndex;return z!==0?z:R.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],c=[],f=1,d=null,m=3,y=!1,g=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var _=n(c);_!==null;){if(_.callback===null)r(c);else if(_.startTime<=R)r(c),_.sortIndex=_.expirationTime,t(u,_);else break;_=n(c)}}function w(R){if(x=!1,v(R),!g)if(n(u)!==null)g=!0,qe(T);else{var _=n(c);_!==null&&B(w,_.startTime-R)}}function T(R,_){g=!1,x&&(x=!1,h(k),k=-1),y=!0;var z=m;try{for(v(_),d=n(u);d!==null&&(!(d.expirationTime>_)||R&&!V());){var X=d.callback;if(typeof X=="function"){d.callback=null,m=d.priorityLevel;var de=X(d.expirationTime<=_);_=e.unstable_now(),typeof de=="function"?d.callback=de:d===n(u)&&r(u),v(_)}else r(u);d=n(u)}if(d!==null)var Di=!0;else{var un=n(c);un!==null&&B(w,un.startTime-_),Di=!1}return Di}finally{d=null,m=z,y=!1}}var j=!1,C=null,k=-1,I=5,A=-1;function V(){return!(e.unstable_now()-A<I)}function G(){if(C!==null){var R=e.unstable_now();A=R;var _=!0;try{_=C(!0,R)}finally{_?Ae():(j=!1,C=null)}}else j=!1}var Ae;if(typeof p=="function")Ae=function(){p(G)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,At=yt.port2;yt.port1.onmessage=G,Ae=function(){At.postMessage(null)}}else Ae=function(){S(G,0)};function qe(R){C=R,j||(j=!0,Ae())}function B(R,_){k=S(function(){R(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,qe(T))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(R){switch(m){case 1:case 2:case 3:var _=3;break;default:_=m}var z=m;m=_;try{return R()}finally{m=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,_){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var z=m;m=R;try{return _()}finally{m=z}},e.unstable_scheduleCallback=function(R,_,z){var X=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?X+z:X):z=X,R){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=z+de,R={id:f++,callback:_,priorityLevel:R,startTime:z,expirationTime:de,sortIndex:-1},z>X?(R.sortIndex=z,t(c,R),n(u)===null&&R===n(c)&&(x?(h(k),k=-1):x=!0,B(w,z-X))):(R.sortIndex=de,t(u,R),g||y||(g=!0,qe(T))),R},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(R){var _=m;return function(){var z=m;m=_;try{return R.apply(this,arguments)}finally{m=z}}}})(_m);Am.exports=_m;var v0=Am.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0=b,Be=v0;function E(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zm=new Set,Jr={};function Dn(e,t){or(e,t),or(e+"Capture",t)}function or(e,t){for(Jr[e]=t,e=0;e<t.length;e++)zm.add(t[e])}var Et=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,S0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tc={},Cc={};function b0(e){return ja.call(Cc,e)?!0:ja.call(Tc,e)?!1:S0.test(e)?Cc[e]=!0:(Tc[e]=!0,!1)}function w0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function T0(e,t,n,r){if(t===null||typeof t>"u"||w0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Me(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ye[e]=new Me(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ye[t]=new Me(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ye[e]=new Me(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ye[e]=new Me(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ye[e]=new Me(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ye[e]=new Me(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ye[e]=new Me(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ye[e]=new Me(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ye[e]=new Me(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yl=/[\-:]([a-z])/g;function Ql(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yl,Ql);ye[t]=new Me(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yl,Ql);ye[t]=new Me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yl,Ql);ye[t]=new Me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ye[e]=new Me(e,1,!1,e.toLowerCase(),null,!1,!1)});ye.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ye[e]=new Me(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jl(e,t,n,r){var i=ye.hasOwnProperty(t)?ye[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(T0(t,n,i,r)&&(n=null),r||i===null?b0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Lt=x0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zi=Symbol.for("react.element"),zn=Symbol.for("react.portal"),On=Symbol.for("react.fragment"),Zl=Symbol.for("react.strict_mode"),Ea=Symbol.for("react.profiler"),Om=Symbol.for("react.provider"),Vm=Symbol.for("react.context"),eu=Symbol.for("react.forward_ref"),Ma=Symbol.for("react.suspense"),Ra=Symbol.for("react.suspense_list"),tu=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),Bm=Symbol.for("react.offscreen"),kc=Symbol.iterator;function Sr(e){return e===null||typeof e!="object"?null:(e=kc&&e[kc]||e["@@iterator"],typeof e=="function"?e:null)}var Z=Object.assign,Lo;function Lr(e){if(Lo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Lo=t&&t[1]||""}return`
`+Lo+e}var Do=!1;function Ao(e,t){if(!e||Do)return"";Do=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{Do=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Lr(e):""}function C0(e){switch(e.tag){case 5:return Lr(e.type);case 16:return Lr("Lazy");case 13:return Lr("Suspense");case 19:return Lr("SuspenseList");case 0:case 2:case 15:return e=Ao(e.type,!1),e;case 11:return e=Ao(e.type.render,!1),e;case 1:return e=Ao(e.type,!0),e;default:return""}}function Pa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case On:return"Fragment";case zn:return"Portal";case Ea:return"Profiler";case Zl:return"StrictMode";case Ma:return"Suspense";case Ra:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Vm:return(e.displayName||"Context")+".Consumer";case Om:return(e._context.displayName||"Context")+".Provider";case eu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tu:return t=e.displayName||null,t!==null?t:Pa(e.type)||"Memo";case Vt:t=e._payload,e=e._init;try{return Pa(e(t))}catch{}}return null}function k0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pa(t);case 8:return t===Zl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function en(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function j0(e){var t=Nm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Oi(e){e._valueTracker||(e._valueTracker=j0(e))}function Fm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Nm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ws(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ia(e,t){var n=t.checked;return Z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=en(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qm(e,t){t=t.checked,t!=null&&Jl(e,"checked",t,!1)}function La(e,t){qm(e,t);var n=en(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Da(e,t.type,n):t.hasOwnProperty("defaultValue")&&Da(e,t.type,en(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ec(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Da(e,t,n){(t!=="number"||ws(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Dr=Array.isArray;function Jn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+en(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Aa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(E(91));return Z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(E(92));if(Dr(n)){if(1<n.length)throw Error(E(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:en(n)}}function Um(e,t){var n=en(t.value),r=en(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Rc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Wm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _a(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Wm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vi,$m=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vi=Vi||document.createElement("div"),Vi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Br={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E0=["Webkit","ms","Moz","O"];Object.keys(Br).forEach(function(e){E0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Br[t]=Br[e]})});function Hm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Br.hasOwnProperty(e)&&Br[e]?(""+t).trim():t+"px"}function Gm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Hm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var M0=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function za(e,t){if(t){if(M0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(E(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(E(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(E(61))}if(t.style!=null&&typeof t.style!="object")throw Error(E(62))}}function Oa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Va=null;function nu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ba=null,Zn=null,er=null;function Pc(e){if(e=ji(e)){if(typeof Ba!="function")throw Error(E(280));var t=e.stateNode;t&&(t=lo(t),Ba(e.stateNode,e.type,t))}}function Km(e){Zn?er?er.push(e):er=[e]:Zn=e}function Xm(){if(Zn){var e=Zn,t=er;if(er=Zn=null,Pc(e),t)for(e=0;e<t.length;e++)Pc(t[e])}}function Ym(e,t){return e(t)}function Qm(){}var _o=!1;function Jm(e,t,n){if(_o)return e(t,n);_o=!0;try{return Ym(e,t,n)}finally{_o=!1,(Zn!==null||er!==null)&&(Qm(),Xm())}}function ei(e,t){var n=e.stateNode;if(n===null)return null;var r=lo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(E(231,t,typeof n));return n}var Na=!1;if(Et)try{var br={};Object.defineProperty(br,"passive",{get:function(){Na=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{Na=!1}function R0(e,t,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Nr=!1,Ts=null,Cs=!1,Fa=null,P0={onError:function(e){Nr=!0,Ts=e}};function I0(e,t,n,r,i,s,o,a,u){Nr=!1,Ts=null,R0.apply(P0,arguments)}function L0(e,t,n,r,i,s,o,a,u){if(I0.apply(this,arguments),Nr){if(Nr){var c=Ts;Nr=!1,Ts=null}else throw Error(E(198));Cs||(Cs=!0,Fa=c)}}function An(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Zm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ic(e){if(An(e)!==e)throw Error(E(188))}function D0(e){var t=e.alternate;if(!t){if(t=An(e),t===null)throw Error(E(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ic(i),e;if(s===r)return Ic(i),t;s=s.sibling}throw Error(E(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?e:t}function ep(e){return e=D0(e),e!==null?tp(e):null}function tp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=tp(e);if(t!==null)return t;e=e.sibling}return null}var np=Be.unstable_scheduleCallback,Lc=Be.unstable_cancelCallback,A0=Be.unstable_shouldYield,_0=Be.unstable_requestPaint,ne=Be.unstable_now,z0=Be.unstable_getCurrentPriorityLevel,ru=Be.unstable_ImmediatePriority,rp=Be.unstable_UserBlockingPriority,ks=Be.unstable_NormalPriority,O0=Be.unstable_LowPriority,ip=Be.unstable_IdlePriority,io=null,ft=null;function V0(e){if(ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(io,e,void 0,(e.current.flags&128)===128)}catch{}}var st=Math.clz32?Math.clz32:F0,B0=Math.log,N0=Math.LN2;function F0(e){return e>>>=0,e===0?32:31-(B0(e)/N0|0)|0}var Bi=64,Ni=4194304;function Ar(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function js(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ar(a):(s&=o,s!==0&&(r=Ar(s)))}else o=n&~i,o!==0?r=Ar(o):s!==0&&(r=Ar(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-st(t),i=1<<n,r|=e[n],t&=~i;return r}function q0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-st(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=q0(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function qa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sp(){var e=Bi;return Bi<<=1,!(Bi&4194240)&&(Bi=64),e}function zo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ci(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-st(t),e[t]=n}function W0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function iu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var q=0;function op(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ap,su,lp,up,cp,Ua=!1,Fi=[],Ht=null,Gt=null,Kt=null,ti=new Map,ni=new Map,Ft=[],$0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dc(e,t){switch(e){case"focusin":case"focusout":Ht=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":Kt=null;break;case"pointerover":case"pointerout":ti.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ni.delete(t.pointerId)}}function wr(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=ji(t),t!==null&&su(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function H0(e,t,n,r,i){switch(t){case"focusin":return Ht=wr(Ht,e,t,n,r,i),!0;case"dragenter":return Gt=wr(Gt,e,t,n,r,i),!0;case"mouseover":return Kt=wr(Kt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ti.set(s,wr(ti.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ni.set(s,wr(ni.get(s)||null,e,t,n,r,i)),!0}return!1}function dp(e){var t=xn(e.target);if(t!==null){var n=An(t);if(n!==null){if(t=n.tag,t===13){if(t=Zm(n),t!==null){e.blockedOn=t,cp(e.priority,function(){lp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function as(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Va=r,n.target.dispatchEvent(r),Va=null}else return t=ji(n),t!==null&&su(t),e.blockedOn=n,!1;t.shift()}return!0}function Ac(e,t,n){as(e)&&n.delete(t)}function G0(){Ua=!1,Ht!==null&&as(Ht)&&(Ht=null),Gt!==null&&as(Gt)&&(Gt=null),Kt!==null&&as(Kt)&&(Kt=null),ti.forEach(Ac),ni.forEach(Ac)}function Tr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ua||(Ua=!0,Be.unstable_scheduleCallback(Be.unstable_NormalPriority,G0)))}function ri(e){function t(i){return Tr(i,e)}if(0<Fi.length){Tr(Fi[0],e);for(var n=1;n<Fi.length;n++){var r=Fi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ht!==null&&Tr(Ht,e),Gt!==null&&Tr(Gt,e),Kt!==null&&Tr(Kt,e),ti.forEach(t),ni.forEach(t),n=0;n<Ft.length;n++)r=Ft[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ft.length&&(n=Ft[0],n.blockedOn===null);)dp(n),n.blockedOn===null&&Ft.shift()}var tr=Lt.ReactCurrentBatchConfig,Es=!0;function K0(e,t,n,r){var i=q,s=tr.transition;tr.transition=null;try{q=1,ou(e,t,n,r)}finally{q=i,tr.transition=s}}function X0(e,t,n,r){var i=q,s=tr.transition;tr.transition=null;try{q=4,ou(e,t,n,r)}finally{q=i,tr.transition=s}}function ou(e,t,n,r){if(Es){var i=Wa(e,t,n,r);if(i===null)Ho(e,t,r,Ms,n),Dc(e,r);else if(H0(i,e,t,n,r))r.stopPropagation();else if(Dc(e,r),t&4&&-1<$0.indexOf(e)){for(;i!==null;){var s=ji(i);if(s!==null&&ap(s),s=Wa(e,t,n,r),s===null&&Ho(e,t,r,Ms,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ho(e,t,r,null,n)}}var Ms=null;function Wa(e,t,n,r){if(Ms=null,e=nu(r),e=xn(e),e!==null)if(t=An(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Zm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ms=e,null}function fp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(z0()){case ru:return 1;case rp:return 4;case ks:case O0:return 16;case ip:return 536870912;default:return 16}default:return 16}}var Ut=null,au=null,ls=null;function mp(){if(ls)return ls;var e,t=au,n=t.length,r,i="value"in Ut?Ut.value:Ut.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return ls=i.slice(e,1<r?1-r:void 0)}function us(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qi(){return!0}function _c(){return!1}function Fe(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qi:_c,this.isPropagationStopped=_c,this}return Z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),t}var hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lu=Fe(hr),ki=Z({},hr,{view:0,detail:0}),Y0=Fe(ki),Oo,Vo,Cr,so=Z({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cr&&(Cr&&e.type==="mousemove"?(Oo=e.screenX-Cr.screenX,Vo=e.screenY-Cr.screenY):Vo=Oo=0,Cr=e),Oo)},movementY:function(e){return"movementY"in e?e.movementY:Vo}}),zc=Fe(so),Q0=Z({},so,{dataTransfer:0}),J0=Fe(Q0),Z0=Z({},ki,{relatedTarget:0}),Bo=Fe(Z0),ev=Z({},hr,{animationName:0,elapsedTime:0,pseudoElement:0}),tv=Fe(ev),nv=Z({},hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rv=Fe(nv),iv=Z({},hr,{data:0}),Oc=Fe(iv),sv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ov={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},av={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=av[e])?!!t[e]:!1}function uu(){return lv}var uv=Z({},ki,{key:function(e){if(e.key){var t=sv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=us(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ov[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uu,charCode:function(e){return e.type==="keypress"?us(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?us(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cv=Fe(uv),dv=Z({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vc=Fe(dv),fv=Z({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uu}),mv=Fe(fv),pv=Z({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),hv=Fe(pv),gv=Z({},so,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yv=Fe(gv),vv=[9,13,27,32],cu=Et&&"CompositionEvent"in window,Fr=null;Et&&"documentMode"in document&&(Fr=document.documentMode);var xv=Et&&"TextEvent"in window&&!Fr,pp=Et&&(!cu||Fr&&8<Fr&&11>=Fr),Bc=" ",Nc=!1;function hp(e,t){switch(e){case"keyup":return vv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vn=!1;function Sv(e,t){switch(e){case"compositionend":return gp(t);case"keypress":return t.which!==32?null:(Nc=!0,Bc);case"textInput":return e=t.data,e===Bc&&Nc?null:e;default:return null}}function bv(e,t){if(Vn)return e==="compositionend"||!cu&&hp(e,t)?(e=mp(),ls=au=Ut=null,Vn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pp&&t.locale!=="ko"?null:t.data;default:return null}}var wv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wv[e.type]:t==="textarea"}function yp(e,t,n,r){Km(r),t=Rs(t,"onChange"),0<t.length&&(n=new lu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qr=null,ii=null;function Tv(e){Mp(e,0)}function oo(e){var t=Fn(e);if(Fm(t))return e}function Cv(e,t){if(e==="change")return t}var vp=!1;if(Et){var No;if(Et){var Fo="oninput"in document;if(!Fo){var qc=document.createElement("div");qc.setAttribute("oninput","return;"),Fo=typeof qc.oninput=="function"}No=Fo}else No=!1;vp=No&&(!document.documentMode||9<document.documentMode)}function Uc(){qr&&(qr.detachEvent("onpropertychange",xp),ii=qr=null)}function xp(e){if(e.propertyName==="value"&&oo(ii)){var t=[];yp(t,ii,e,nu(e)),Jm(Tv,t)}}function kv(e,t,n){e==="focusin"?(Uc(),qr=t,ii=n,qr.attachEvent("onpropertychange",xp)):e==="focusout"&&Uc()}function jv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oo(ii)}function Ev(e,t){if(e==="click")return oo(t)}function Mv(e,t){if(e==="input"||e==="change")return oo(t)}function Rv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var at=typeof Object.is=="function"?Object.is:Rv;function si(e,t){if(at(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ja.call(t,i)||!at(e[i],t[i]))return!1}return!0}function Wc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $c(e,t){var n=Wc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wc(n)}}function Sp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bp(){for(var e=window,t=ws();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ws(e.document)}return t}function du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Pv(e){var t=bp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Sp(n.ownerDocument.documentElement,n)){if(r!==null&&du(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=$c(n,s);var o=$c(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Iv=Et&&"documentMode"in document&&11>=document.documentMode,Bn=null,$a=null,Ur=null,Ha=!1;function Hc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ha||Bn==null||Bn!==ws(r)||(r=Bn,"selectionStart"in r&&du(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ur&&si(Ur,r)||(Ur=r,r=Rs($a,"onSelect"),0<r.length&&(t=new lu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Bn)))}function Ui(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nn={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionend:Ui("Transition","TransitionEnd")},qo={},wp={};Et&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete Nn.animationend.animation,delete Nn.animationiteration.animation,delete Nn.animationstart.animation),"TransitionEvent"in window||delete Nn.transitionend.transition);function ao(e){if(qo[e])return qo[e];if(!Nn[e])return e;var t=Nn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wp)return qo[e]=t[n];return e}var Tp=ao("animationend"),Cp=ao("animationiteration"),kp=ao("animationstart"),jp=ao("transitionend"),Ep=new Map,Gc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sn(e,t){Ep.set(e,t),Dn(t,[e])}for(var Uo=0;Uo<Gc.length;Uo++){var Wo=Gc[Uo],Lv=Wo.toLowerCase(),Dv=Wo[0].toUpperCase()+Wo.slice(1);sn(Lv,"on"+Dv)}sn(Tp,"onAnimationEnd");sn(Cp,"onAnimationIteration");sn(kp,"onAnimationStart");sn("dblclick","onDoubleClick");sn("focusin","onFocus");sn("focusout","onBlur");sn(jp,"onTransitionEnd");or("onMouseEnter",["mouseout","mouseover"]);or("onMouseLeave",["mouseout","mouseover"]);or("onPointerEnter",["pointerout","pointerover"]);or("onPointerLeave",["pointerout","pointerover"]);Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Av=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function Kc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,L0(r,t,void 0,e),e.currentTarget=null}function Mp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Kc(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Kc(i,a,c),s=u}}}if(Cs)throw e=Fa,Cs=!1,Fa=null,e}function W(e,t){var n=t[Qa];n===void 0&&(n=t[Qa]=new Set);var r=e+"__bubble";n.has(r)||(Rp(t,e,2,!1),n.add(r))}function $o(e,t,n){var r=0;t&&(r|=4),Rp(n,e,r,t)}var Wi="_reactListening"+Math.random().toString(36).slice(2);function oi(e){if(!e[Wi]){e[Wi]=!0,zm.forEach(function(n){n!=="selectionchange"&&(Av.has(n)||$o(n,!1,e),$o(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wi]||(t[Wi]=!0,$o("selectionchange",!1,t))}}function Rp(e,t,n,r){switch(fp(t)){case 1:var i=K0;break;case 4:i=X0;break;default:i=ou}n=i.bind(null,t,n,e),i=void 0,!Na||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ho(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=xn(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Jm(function(){var c=s,f=nu(n),d=[];e:{var m=Ep.get(e);if(m!==void 0){var y=lu,g=e;switch(e){case"keypress":if(us(n)===0)break e;case"keydown":case"keyup":y=cv;break;case"focusin":g="focus",y=Bo;break;case"focusout":g="blur",y=Bo;break;case"beforeblur":case"afterblur":y=Bo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=J0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=mv;break;case Tp:case Cp:case kp:y=tv;break;case jp:y=hv;break;case"scroll":y=Y0;break;case"wheel":y=yv;break;case"copy":case"cut":case"paste":y=rv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Vc}var x=(t&4)!==0,S=!x&&e==="scroll",h=x?m!==null?m+"Capture":null:m;x=[];for(var p=c,v;p!==null;){v=p;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,h!==null&&(w=ei(p,h),w!=null&&x.push(ai(p,w,v)))),S)break;p=p.return}0<x.length&&(m=new y(m,g,null,n,f),d.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==Va&&(g=n.relatedTarget||n.fromElement)&&(xn(g)||g[Mt]))break e;if((y||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,y?(g=n.relatedTarget||n.toElement,y=c,g=g?xn(g):null,g!==null&&(S=An(g),g!==S||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=c),y!==g)){if(x=zc,w="onMouseLeave",h="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(x=Vc,w="onPointerLeave",h="onPointerEnter",p="pointer"),S=y==null?m:Fn(y),v=g==null?m:Fn(g),m=new x(w,p+"leave",y,n,f),m.target=S,m.relatedTarget=v,w=null,xn(f)===c&&(x=new x(h,p+"enter",g,n,f),x.target=v,x.relatedTarget=S,w=x),S=w,y&&g)t:{for(x=y,h=g,p=0,v=x;v;v=_n(v))p++;for(v=0,w=h;w;w=_n(w))v++;for(;0<p-v;)x=_n(x),p--;for(;0<v-p;)h=_n(h),v--;for(;p--;){if(x===h||h!==null&&x===h.alternate)break t;x=_n(x),h=_n(h)}x=null}else x=null;y!==null&&Xc(d,m,y,x,!1),g!==null&&S!==null&&Xc(d,S,g,x,!0)}}e:{if(m=c?Fn(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var T=Cv;else if(Fc(m))if(vp)T=Mv;else{T=jv;var j=kv}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(T=Ev);if(T&&(T=T(e,c))){yp(d,T,n,f);break e}j&&j(e,m,c),e==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&Da(m,"number",m.value)}switch(j=c?Fn(c):window,e){case"focusin":(Fc(j)||j.contentEditable==="true")&&(Bn=j,$a=c,Ur=null);break;case"focusout":Ur=$a=Bn=null;break;case"mousedown":Ha=!0;break;case"contextmenu":case"mouseup":case"dragend":Ha=!1,Hc(d,n,f);break;case"selectionchange":if(Iv)break;case"keydown":case"keyup":Hc(d,n,f)}var C;if(cu)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Vn?hp(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(pp&&n.locale!=="ko"&&(Vn||k!=="onCompositionStart"?k==="onCompositionEnd"&&Vn&&(C=mp()):(Ut=f,au="value"in Ut?Ut.value:Ut.textContent,Vn=!0)),j=Rs(c,k),0<j.length&&(k=new Oc(k,e,null,n,f),d.push({event:k,listeners:j}),C?k.data=C:(C=gp(n),C!==null&&(k.data=C)))),(C=xv?Sv(e,n):bv(e,n))&&(c=Rs(c,"onBeforeInput"),0<c.length&&(f=new Oc("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=C))}Mp(d,t)})}function ai(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Rs(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ei(e,n),s!=null&&r.unshift(ai(e,s,i)),s=ei(e,t),s!=null&&r.push(ai(e,s,i))),e=e.return}return r}function _n(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xc(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=ei(n,s),u!=null&&o.unshift(ai(n,u,a))):i||(u=ei(n,s),u!=null&&o.push(ai(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var _v=/\r\n?/g,zv=/\u0000|\uFFFD/g;function Yc(e){return(typeof e=="string"?e:""+e).replace(_v,`
`).replace(zv,"")}function $i(e,t,n){if(t=Yc(t),Yc(e)!==t&&n)throw Error(E(425))}function Ps(){}var Ga=null,Ka=null;function Xa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ya=typeof setTimeout=="function"?setTimeout:void 0,Ov=typeof clearTimeout=="function"?clearTimeout:void 0,Qc=typeof Promise=="function"?Promise:void 0,Vv=typeof queueMicrotask=="function"?queueMicrotask:typeof Qc<"u"?function(e){return Qc.resolve(null).then(e).catch(Bv)}:Ya;function Bv(e){setTimeout(function(){throw e})}function Go(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ri(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ri(t)}function Xt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Jc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gr=Math.random().toString(36).slice(2),ct="__reactFiber$"+gr,li="__reactProps$"+gr,Mt="__reactContainer$"+gr,Qa="__reactEvents$"+gr,Nv="__reactListeners$"+gr,Fv="__reactHandles$"+gr;function xn(e){var t=e[ct];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Mt]||n[ct]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Jc(e);e!==null;){if(n=e[ct])return n;e=Jc(e)}return t}e=n,n=e.parentNode}return null}function ji(e){return e=e[ct]||e[Mt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(E(33))}function lo(e){return e[li]||null}var Ja=[],qn=-1;function on(e){return{current:e}}function $(e){0>qn||(e.current=Ja[qn],Ja[qn]=null,qn--)}function U(e,t){qn++,Ja[qn]=e.current,e.current=t}var tn={},we=on(tn),Ie=on(!1),En=tn;function ar(e,t){var n=e.type.contextTypes;if(!n)return tn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Le(e){return e=e.childContextTypes,e!=null}function Is(){$(Ie),$(we)}function Zc(e,t,n){if(we.current!==tn)throw Error(E(168));U(we,t),U(Ie,n)}function Pp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(E(108,k0(e)||"Unknown",i));return Z({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||tn,En=we.current,U(we,e),U(Ie,Ie.current),!0}function ed(e,t,n){var r=e.stateNode;if(!r)throw Error(E(169));n?(e=Pp(e,t,En),r.__reactInternalMemoizedMergedChildContext=e,$(Ie),$(we),U(we,e)):$(Ie),U(Ie,n)}var bt=null,uo=!1,Ko=!1;function Ip(e){bt===null?bt=[e]:bt.push(e)}function qv(e){uo=!0,Ip(e)}function an(){if(!Ko&&bt!==null){Ko=!0;var e=0,t=q;try{var n=bt;for(q=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}bt=null,uo=!1}catch(i){throw bt!==null&&(bt=bt.slice(e+1)),np(ru,an),i}finally{q=t,Ko=!1}}return null}var Un=[],Wn=0,Ds=null,As=0,We=[],$e=0,Mn=null,Tt=1,Ct="";function fn(e,t){Un[Wn++]=As,Un[Wn++]=Ds,Ds=e,As=t}function Lp(e,t,n){We[$e++]=Tt,We[$e++]=Ct,We[$e++]=Mn,Mn=e;var r=Tt;e=Ct;var i=32-st(r)-1;r&=~(1<<i),n+=1;var s=32-st(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Tt=1<<32-st(t)+i|n<<i|r,Ct=s+e}else Tt=1<<s|n<<i|r,Ct=e}function fu(e){e.return!==null&&(fn(e,1),Lp(e,1,0))}function mu(e){for(;e===Ds;)Ds=Un[--Wn],Un[Wn]=null,As=Un[--Wn],Un[Wn]=null;for(;e===Mn;)Mn=We[--$e],We[$e]=null,Ct=We[--$e],We[$e]=null,Tt=We[--$e],We[$e]=null}var Ve=null,ze=null,K=!1,it=null;function Dp(e,t){var n=He(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function td(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ve=e,ze=Xt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ve=e,ze=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Mn!==null?{id:Tt,overflow:Ct}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=He(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ve=e,ze=null,!0):!1;default:return!1}}function Za(e){return(e.mode&1)!==0&&(e.flags&128)===0}function el(e){if(K){var t=ze;if(t){var n=t;if(!td(e,t)){if(Za(e))throw Error(E(418));t=Xt(n.nextSibling);var r=Ve;t&&td(e,t)?Dp(r,n):(e.flags=e.flags&-4097|2,K=!1,Ve=e)}}else{if(Za(e))throw Error(E(418));e.flags=e.flags&-4097|2,K=!1,Ve=e}}}function nd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ve=e}function Hi(e){if(e!==Ve)return!1;if(!K)return nd(e),K=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xa(e.type,e.memoizedProps)),t&&(t=ze)){if(Za(e))throw Ap(),Error(E(418));for(;t;)Dp(e,t),t=Xt(t.nextSibling)}if(nd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ze=Xt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ze=null}}else ze=Ve?Xt(e.stateNode.nextSibling):null;return!0}function Ap(){for(var e=ze;e;)e=Xt(e.nextSibling)}function lr(){ze=Ve=null,K=!1}function pu(e){it===null?it=[e]:it.push(e)}var Uv=Lt.ReactCurrentBatchConfig;function kr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,e))}return e}function Gi(e,t){throw e=Object.prototype.toString.call(t),Error(E(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rd(e){var t=e._init;return t(e._payload)}function _p(e){function t(h,p){if(e){var v=h.deletions;v===null?(h.deletions=[p],h.flags|=16):v.push(p)}}function n(h,p){if(!e)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function r(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function i(h,p){return h=Zt(h,p),h.index=0,h.sibling=null,h}function s(h,p,v){return h.index=v,e?(v=h.alternate,v!==null?(v=v.index,v<p?(h.flags|=2,p):v):(h.flags|=2,p)):(h.flags|=1048576,p)}function o(h){return e&&h.alternate===null&&(h.flags|=2),h}function a(h,p,v,w){return p===null||p.tag!==6?(p=ta(v,h.mode,w),p.return=h,p):(p=i(p,v),p.return=h,p)}function u(h,p,v,w){var T=v.type;return T===On?f(h,p,v.props.children,w,v.key):p!==null&&(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Vt&&rd(T)===p.type)?(w=i(p,v.props),w.ref=kr(h,p,v),w.return=h,w):(w=gs(v.type,v.key,v.props,null,h.mode,w),w.ref=kr(h,p,v),w.return=h,w)}function c(h,p,v,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=na(v,h.mode,w),p.return=h,p):(p=i(p,v.children||[]),p.return=h,p)}function f(h,p,v,w,T){return p===null||p.tag!==7?(p=kn(v,h.mode,w,T),p.return=h,p):(p=i(p,v),p.return=h,p)}function d(h,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=ta(""+p,h.mode,v),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case zi:return v=gs(p.type,p.key,p.props,null,h.mode,v),v.ref=kr(h,null,p),v.return=h,v;case zn:return p=na(p,h.mode,v),p.return=h,p;case Vt:var w=p._init;return d(h,w(p._payload),v)}if(Dr(p)||Sr(p))return p=kn(p,h.mode,v,null),p.return=h,p;Gi(h,p)}return null}function m(h,p,v,w){var T=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return T!==null?null:a(h,p,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zi:return v.key===T?u(h,p,v,w):null;case zn:return v.key===T?c(h,p,v,w):null;case Vt:return T=v._init,m(h,p,T(v._payload),w)}if(Dr(v)||Sr(v))return T!==null?null:f(h,p,v,w,null);Gi(h,v)}return null}function y(h,p,v,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return h=h.get(v)||null,a(p,h,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case zi:return h=h.get(w.key===null?v:w.key)||null,u(p,h,w,T);case zn:return h=h.get(w.key===null?v:w.key)||null,c(p,h,w,T);case Vt:var j=w._init;return y(h,p,v,j(w._payload),T)}if(Dr(w)||Sr(w))return h=h.get(v)||null,f(p,h,w,T,null);Gi(p,w)}return null}function g(h,p,v,w){for(var T=null,j=null,C=p,k=p=0,I=null;C!==null&&k<v.length;k++){C.index>k?(I=C,C=null):I=C.sibling;var A=m(h,C,v[k],w);if(A===null){C===null&&(C=I);break}e&&C&&A.alternate===null&&t(h,C),p=s(A,p,k),j===null?T=A:j.sibling=A,j=A,C=I}if(k===v.length)return n(h,C),K&&fn(h,k),T;if(C===null){for(;k<v.length;k++)C=d(h,v[k],w),C!==null&&(p=s(C,p,k),j===null?T=C:j.sibling=C,j=C);return K&&fn(h,k),T}for(C=r(h,C);k<v.length;k++)I=y(C,h,k,v[k],w),I!==null&&(e&&I.alternate!==null&&C.delete(I.key===null?k:I.key),p=s(I,p,k),j===null?T=I:j.sibling=I,j=I);return e&&C.forEach(function(V){return t(h,V)}),K&&fn(h,k),T}function x(h,p,v,w){var T=Sr(v);if(typeof T!="function")throw Error(E(150));if(v=T.call(v),v==null)throw Error(E(151));for(var j=T=null,C=p,k=p=0,I=null,A=v.next();C!==null&&!A.done;k++,A=v.next()){C.index>k?(I=C,C=null):I=C.sibling;var V=m(h,C,A.value,w);if(V===null){C===null&&(C=I);break}e&&C&&V.alternate===null&&t(h,C),p=s(V,p,k),j===null?T=V:j.sibling=V,j=V,C=I}if(A.done)return n(h,C),K&&fn(h,k),T;if(C===null){for(;!A.done;k++,A=v.next())A=d(h,A.value,w),A!==null&&(p=s(A,p,k),j===null?T=A:j.sibling=A,j=A);return K&&fn(h,k),T}for(C=r(h,C);!A.done;k++,A=v.next())A=y(C,h,k,A.value,w),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?k:A.key),p=s(A,p,k),j===null?T=A:j.sibling=A,j=A);return e&&C.forEach(function(G){return t(h,G)}),K&&fn(h,k),T}function S(h,p,v,w){if(typeof v=="object"&&v!==null&&v.type===On&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case zi:e:{for(var T=v.key,j=p;j!==null;){if(j.key===T){if(T=v.type,T===On){if(j.tag===7){n(h,j.sibling),p=i(j,v.props.children),p.return=h,h=p;break e}}else if(j.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Vt&&rd(T)===j.type){n(h,j.sibling),p=i(j,v.props),p.ref=kr(h,j,v),p.return=h,h=p;break e}n(h,j);break}else t(h,j);j=j.sibling}v.type===On?(p=kn(v.props.children,h.mode,w,v.key),p.return=h,h=p):(w=gs(v.type,v.key,v.props,null,h.mode,w),w.ref=kr(h,p,v),w.return=h,h=w)}return o(h);case zn:e:{for(j=v.key;p!==null;){if(p.key===j)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){n(h,p.sibling),p=i(p,v.children||[]),p.return=h,h=p;break e}else{n(h,p);break}else t(h,p);p=p.sibling}p=na(v,h.mode,w),p.return=h,h=p}return o(h);case Vt:return j=v._init,S(h,p,j(v._payload),w)}if(Dr(v))return g(h,p,v,w);if(Sr(v))return x(h,p,v,w);Gi(h,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(n(h,p.sibling),p=i(p,v),p.return=h,h=p):(n(h,p),p=ta(v,h.mode,w),p.return=h,h=p),o(h)):n(h,p)}return S}var ur=_p(!0),zp=_p(!1),_s=on(null),zs=null,$n=null,hu=null;function gu(){hu=$n=zs=null}function yu(e){var t=_s.current;$(_s),e._currentValue=t}function tl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function nr(e,t){zs=e,hu=$n=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pe=!0),e.firstContext=null)}function Ye(e){var t=e._currentValue;if(hu!==e)if(e={context:e,memoizedValue:t,next:null},$n===null){if(zs===null)throw Error(E(308));$n=e,zs.dependencies={lanes:0,firstContext:e}}else $n=$n.next=e;return t}var Sn=null;function vu(e){Sn===null?Sn=[e]:Sn.push(e)}function Op(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,vu(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rt(e,r)}function Rt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Bt=!1;function xu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,N&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rt(e,n)}return i=r.interleaved,i===null?(t.next=t,vu(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rt(e,n)}function cs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iu(e,n)}}function id(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Os(e,t,n,r){var i=e.updateQueue;Bt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=u))}if(s!==null){var d=i.baseState;o=0,f=c=u=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,x=a;switch(m=t,y=n,x.tag){case 1:if(g=x.payload,typeof g=="function"){d=g.call(y,d,m);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,m=typeof g=="function"?g.call(y,d,m):g,m==null)break e;d=Z({},d,m);break e;case 2:Bt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=y,u=d):f=f.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(f===null&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Pn|=o,e.lanes=o,e.memoizedState=d}}function sd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var Ei={},mt=on(Ei),ui=on(Ei),ci=on(Ei);function bn(e){if(e===Ei)throw Error(E(174));return e}function Su(e,t){switch(U(ci,t),U(ui,e),U(mt,Ei),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_a(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_a(t,e)}$(mt),U(mt,t)}function cr(){$(mt),$(ui),$(ci)}function Bp(e){bn(ci.current);var t=bn(mt.current),n=_a(t,e.type);t!==n&&(U(ui,e),U(mt,n))}function bu(e){ui.current===e&&($(mt),$(ui))}var Y=on(0);function Vs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xo=[];function wu(){for(var e=0;e<Xo.length;e++)Xo[e]._workInProgressVersionPrimary=null;Xo.length=0}var ds=Lt.ReactCurrentDispatcher,Yo=Lt.ReactCurrentBatchConfig,Rn=0,J=null,ue=null,fe=null,Bs=!1,Wr=!1,di=0,Wv=0;function ve(){throw Error(E(321))}function Tu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!at(e[n],t[n]))return!1;return!0}function Cu(e,t,n,r,i,s){if(Rn=s,J=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=e===null||e.memoizedState===null?Kv:Xv,e=n(r,i),Wr){s=0;do{if(Wr=!1,di=0,25<=s)throw Error(E(301));s+=1,fe=ue=null,t.updateQueue=null,ds.current=Yv,e=n(r,i)}while(Wr)}if(ds.current=Ns,t=ue!==null&&ue.next!==null,Rn=0,fe=ue=J=null,Bs=!1,t)throw Error(E(300));return e}function ku(){var e=di!==0;return di=0,e}function ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?J.memoizedState=fe=e:fe=fe.next=e,fe}function Qe(){if(ue===null){var e=J.alternate;e=e!==null?e.memoizedState:null}else e=ue.next;var t=fe===null?J.memoizedState:fe.next;if(t!==null)fe=t,ue=e;else{if(e===null)throw Error(E(310));ue=e,e={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},fe===null?J.memoizedState=fe=e:fe=fe.next=e}return fe}function fi(e,t){return typeof t=="function"?t(e):t}function Qo(e){var t=Qe(),n=t.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var r=ue,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var f=c.lane;if((Rn&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=d,o=r):u=u.next=d,J.lanes|=f,Pn|=f}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,at(r,t.memoizedState)||(Pe=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,J.lanes|=s,Pn|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Jo(e){var t=Qe(),n=t.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);at(s,t.memoizedState)||(Pe=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Np(){}function Fp(e,t){var n=J,r=Qe(),i=t(),s=!at(r.memoizedState,i);if(s&&(r.memoizedState=i,Pe=!0),r=r.queue,ju(Wp.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||fe!==null&&fe.memoizedState.tag&1){if(n.flags|=2048,mi(9,Up.bind(null,n,r,i,t),void 0,null),me===null)throw Error(E(349));Rn&30||qp(n,t,i)}return i}function qp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=J.updateQueue,t===null?(t={lastEffect:null,stores:null},J.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Up(e,t,n,r){t.value=n,t.getSnapshot=r,$p(t)&&Hp(e)}function Wp(e,t,n){return n(function(){$p(t)&&Hp(e)})}function $p(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!at(e,n)}catch{return!0}}function Hp(e){var t=Rt(e,1);t!==null&&ot(t,e,1,-1)}function od(e){var t=ut();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gv.bind(null,J,e),[t.memoizedState,e]}function mi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=J.updateQueue,t===null?(t={lastEffect:null,stores:null},J.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Gp(){return Qe().memoizedState}function fs(e,t,n,r){var i=ut();J.flags|=e,i.memoizedState=mi(1|t,n,void 0,r===void 0?null:r)}function co(e,t,n,r){var i=Qe();r=r===void 0?null:r;var s=void 0;if(ue!==null){var o=ue.memoizedState;if(s=o.destroy,r!==null&&Tu(r,o.deps)){i.memoizedState=mi(t,n,s,r);return}}J.flags|=e,i.memoizedState=mi(1|t,n,s,r)}function ad(e,t){return fs(8390656,8,e,t)}function ju(e,t){return co(2048,8,e,t)}function Kp(e,t){return co(4,2,e,t)}function Xp(e,t){return co(4,4,e,t)}function Yp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qp(e,t,n){return n=n!=null?n.concat([e]):null,co(4,4,Yp.bind(null,t,e),n)}function Eu(){}function Jp(e,t){var n=Qe();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Tu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zp(e,t){var n=Qe();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Tu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function eh(e,t,n){return Rn&21?(at(n,t)||(n=sp(),J.lanes|=n,Pn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pe=!0),e.memoizedState=n)}function $v(e,t){var n=q;q=n!==0&&4>n?n:4,e(!0);var r=Yo.transition;Yo.transition={};try{e(!1),t()}finally{q=n,Yo.transition=r}}function th(){return Qe().memoizedState}function Hv(e,t,n){var r=Jt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},nh(e))rh(t,n);else if(n=Op(e,t,n,r),n!==null){var i=je();ot(n,e,r,i),ih(n,t,r)}}function Gv(e,t,n){var r=Jt(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(nh(e))rh(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,at(a,o)){var u=t.interleaved;u===null?(i.next=i,vu(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Op(e,t,i,r),n!==null&&(i=je(),ot(n,e,r,i),ih(n,t,r))}}function nh(e){var t=e.alternate;return e===J||t!==null&&t===J}function rh(e,t){Wr=Bs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ih(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iu(e,n)}}var Ns={readContext:Ye,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useInsertionEffect:ve,useLayoutEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useMutableSource:ve,useSyncExternalStore:ve,useId:ve,unstable_isNewReconciler:!1},Kv={readContext:Ye,useCallback:function(e,t){return ut().memoizedState=[e,t===void 0?null:t],e},useContext:Ye,useEffect:ad,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,fs(4194308,4,Yp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fs(4194308,4,e,t)},useInsertionEffect:function(e,t){return fs(4,2,e,t)},useMemo:function(e,t){var n=ut();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ut();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Hv.bind(null,J,e),[r.memoizedState,e]},useRef:function(e){var t=ut();return e={current:e},t.memoizedState=e},useState:od,useDebugValue:Eu,useDeferredValue:function(e){return ut().memoizedState=e},useTransition:function(){var e=od(!1),t=e[0];return e=$v.bind(null,e[1]),ut().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=J,i=ut();if(K){if(n===void 0)throw Error(E(407));n=n()}else{if(n=t(),me===null)throw Error(E(349));Rn&30||qp(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ad(Wp.bind(null,r,s,e),[e]),r.flags|=2048,mi(9,Up.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ut(),t=me.identifierPrefix;if(K){var n=Ct,r=Tt;n=(r&~(1<<32-st(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=di++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Wv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xv={readContext:Ye,useCallback:Jp,useContext:Ye,useEffect:ju,useImperativeHandle:Qp,useInsertionEffect:Kp,useLayoutEffect:Xp,useMemo:Zp,useReducer:Qo,useRef:Gp,useState:function(){return Qo(fi)},useDebugValue:Eu,useDeferredValue:function(e){var t=Qe();return eh(t,ue.memoizedState,e)},useTransition:function(){var e=Qo(fi)[0],t=Qe().memoizedState;return[e,t]},useMutableSource:Np,useSyncExternalStore:Fp,useId:th,unstable_isNewReconciler:!1},Yv={readContext:Ye,useCallback:Jp,useContext:Ye,useEffect:ju,useImperativeHandle:Qp,useInsertionEffect:Kp,useLayoutEffect:Xp,useMemo:Zp,useReducer:Jo,useRef:Gp,useState:function(){return Jo(fi)},useDebugValue:Eu,useDeferredValue:function(e){var t=Qe();return ue===null?t.memoizedState=e:eh(t,ue.memoizedState,e)},useTransition:function(){var e=Jo(fi)[0],t=Qe().memoizedState;return[e,t]},useMutableSource:Np,useSyncExternalStore:Fp,useId:th,unstable_isNewReconciler:!1};function tt(e,t){if(e&&e.defaultProps){t=Z({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function nl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Z({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fo={isMounted:function(e){return(e=e._reactInternals)?An(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=je(),i=Jt(e),s=kt(r,i);s.payload=t,n!=null&&(s.callback=n),t=Yt(e,s,i),t!==null&&(ot(t,e,i,r),cs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=je(),i=Jt(e),s=kt(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Yt(e,s,i),t!==null&&(ot(t,e,i,r),cs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=je(),r=Jt(e),i=kt(n,r);i.tag=2,t!=null&&(i.callback=t),t=Yt(e,i,r),t!==null&&(ot(t,e,r,n),cs(t,e,r))}};function ld(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!si(n,r)||!si(i,s):!0}function sh(e,t,n){var r=!1,i=tn,s=t.contextType;return typeof s=="object"&&s!==null?s=Ye(s):(i=Le(t)?En:we.current,r=t.contextTypes,s=(r=r!=null)?ar(e,i):tn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ud(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function rl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},xu(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ye(s):(s=Le(t)?En:we.current,i.context=ar(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(nl(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&fo.enqueueReplaceState(i,i.state,null),Os(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function dr(e,t){try{var n="",r=t;do n+=C0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Zo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function il(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Qv=typeof WeakMap=="function"?WeakMap:Map;function oh(e,t,n){n=kt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qs||(qs=!0,pl=r),il(e,t)},n}function ah(e,t,n){n=kt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){il(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){il(e,t),typeof r!="function"&&(Qt===null?Qt=new Set([this]):Qt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function cd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Qv;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=dx.bind(null,e,t,n),t.then(e,e))}function dd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function fd(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kt(-1,1),t.tag=2,Yt(n,t,1))),n.lanes|=1),e)}var Jv=Lt.ReactCurrentOwner,Pe=!1;function Te(e,t,n,r){t.child=e===null?zp(t,null,n,r):ur(t,e.child,n,r)}function md(e,t,n,r,i){n=n.render;var s=t.ref;return nr(t,i),r=Cu(e,t,n,r,s,i),n=ku(),e!==null&&!Pe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pt(e,t,i)):(K&&n&&fu(t),t.flags|=1,Te(e,t,r,i),t.child)}function pd(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!_u(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,lh(e,t,s,r,i)):(e=gs(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:si,n(o,r)&&e.ref===t.ref)return Pt(e,t,i)}return t.flags|=1,e=Zt(s,r),e.ref=t.ref,e.return=t,t.child=e}function lh(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(si(s,r)&&e.ref===t.ref)if(Pe=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Pe=!0);else return t.lanes=e.lanes,Pt(e,t,i)}return sl(e,t,n,r,i)}function uh(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},U(Gn,_e),_e|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,U(Gn,_e),_e|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,U(Gn,_e),_e|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,U(Gn,_e),_e|=r;return Te(e,t,i,n),t.child}function ch(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function sl(e,t,n,r,i){var s=Le(n)?En:we.current;return s=ar(t,s),nr(t,i),n=Cu(e,t,n,r,s,i),r=ku(),e!==null&&!Pe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pt(e,t,i)):(K&&r&&fu(t),t.flags|=1,Te(e,t,n,i),t.child)}function hd(e,t,n,r,i){if(Le(n)){var s=!0;Ls(t)}else s=!1;if(nr(t,i),t.stateNode===null)ms(e,t),sh(t,n,r),rl(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ye(c):(c=Le(n)?En:we.current,c=ar(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&ud(t,o,r,c),Bt=!1;var m=t.memoizedState;o.state=m,Os(t,r,o,i),u=t.memoizedState,a!==r||m!==u||Ie.current||Bt?(typeof f=="function"&&(nl(t,n,f,r),u=t.memoizedState),(a=Bt||ld(t,n,a,r,m,u,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Vp(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:tt(t.type,a),o.props=c,d=t.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ye(u):(u=Le(n)?En:we.current,u=ar(t,u));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||m!==u)&&ud(t,o,r,u),Bt=!1,m=t.memoizedState,o.state=m,Os(t,r,o,i);var g=t.memoizedState;a!==d||m!==g||Ie.current||Bt?(typeof y=="function"&&(nl(t,n,y,r),g=t.memoizedState),(c=Bt||ld(t,n,c,r,m,g,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return ol(e,t,n,r,s,i)}function ol(e,t,n,r,i,s){ch(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&ed(t,n,!1),Pt(e,t,s);r=t.stateNode,Jv.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ur(t,e.child,null,s),t.child=ur(t,null,a,s)):Te(e,t,a,s),t.memoizedState=r.state,i&&ed(t,n,!0),t.child}function dh(e){var t=e.stateNode;t.pendingContext?Zc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zc(e,t.context,!1),Su(e,t.containerInfo)}function gd(e,t,n,r,i){return lr(),pu(i),t.flags|=256,Te(e,t,n,r),t.child}var al={dehydrated:null,treeContext:null,retryLane:0};function ll(e){return{baseLanes:e,cachePool:null,transitions:null}}function fh(e,t,n){var r=t.pendingProps,i=Y.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),U(Y,i&1),e===null)return el(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ho(o,r,0,null),e=kn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=ll(n),t.memoizedState=al,e):Mu(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Zv(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Zt(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Zt(a,s):(s=kn(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?ll(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=al,r}return s=e.child,e=s.sibling,r=Zt(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Mu(e,t){return t=ho({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ki(e,t,n,r){return r!==null&&pu(r),ur(t,e.child,null,n),e=Mu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zv(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Zo(Error(E(422))),Ki(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=ho({mode:"visible",children:r.children},i,0,null),s=kn(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&ur(t,e.child,null,o),t.child.memoizedState=ll(o),t.memoizedState=al,s);if(!(t.mode&1))return Ki(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(E(419)),r=Zo(s,r,void 0),Ki(e,t,o,r)}if(a=(o&e.childLanes)!==0,Pe||a){if(r=me,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rt(e,i),ot(r,e,i,-1))}return Au(),r=Zo(Error(E(421))),Ki(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=fx.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ze=Xt(i.nextSibling),Ve=t,K=!0,it=null,e!==null&&(We[$e++]=Tt,We[$e++]=Ct,We[$e++]=Mn,Tt=e.id,Ct=e.overflow,Mn=t),t=Mu(t,r.children),t.flags|=4096,t)}function yd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),tl(e.return,t,n)}function ea(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function mh(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Te(e,t,r.children,n),r=Y.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yd(e,n,t);else if(e.tag===19)yd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(U(Y,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Vs(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ea(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Vs(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ea(t,!0,n,null,s);break;case"together":ea(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ms(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Pn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(E(153));if(t.child!==null){for(e=t.child,n=Zt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ex(e,t,n){switch(t.tag){case 3:dh(t),lr();break;case 5:Bp(t);break;case 1:Le(t.type)&&Ls(t);break;case 4:Su(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;U(_s,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(U(Y,Y.current&1),t.flags|=128,null):n&t.child.childLanes?fh(e,t,n):(U(Y,Y.current&1),e=Pt(e,t,n),e!==null?e.sibling:null);U(Y,Y.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return mh(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),U(Y,Y.current),r)break;return null;case 22:case 23:return t.lanes=0,uh(e,t,n)}return Pt(e,t,n)}var ph,ul,hh,gh;ph=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ul=function(){};hh=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,bn(mt.current);var s=null;switch(n){case"input":i=Ia(e,i),r=Ia(e,r),s=[];break;case"select":i=Z({},i,{value:void 0}),r=Z({},r,{value:void 0}),s=[];break;case"textarea":i=Aa(e,i),r=Aa(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ps)}za(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jr.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jr.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&W("scroll",e),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};gh=function(e,t,n,r){n!==r&&(t.flags|=4)};function jr(e,t){if(!K)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function tx(e,t,n){var r=t.pendingProps;switch(mu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(t),null;case 1:return Le(t.type)&&Is(),xe(t),null;case 3:return r=t.stateNode,cr(),$(Ie),$(we),wu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Hi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,it!==null&&(yl(it),it=null))),ul(e,t),xe(t),null;case 5:bu(t);var i=bn(ci.current);if(n=t.type,e!==null&&t.stateNode!=null)hh(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(E(166));return xe(t),null}if(e=bn(mt.current),Hi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ct]=t,r[li]=s,e=(t.mode&1)!==0,n){case"dialog":W("cancel",r),W("close",r);break;case"iframe":case"object":case"embed":W("load",r);break;case"video":case"audio":for(i=0;i<_r.length;i++)W(_r[i],r);break;case"source":W("error",r);break;case"img":case"image":case"link":W("error",r),W("load",r);break;case"details":W("toggle",r);break;case"input":jc(r,s),W("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},W("invalid",r);break;case"textarea":Mc(r,s),W("invalid",r)}za(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&$i(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$i(r.textContent,a,e),i=["children",""+a]):Jr.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&W("scroll",r)}switch(n){case"input":Oi(r),Ec(r,s,!0);break;case"textarea":Oi(r),Rc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ps)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Wm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ct]=t,e[li]=r,ph(e,t,!1,!1),t.stateNode=e;e:{switch(o=Oa(n,r),n){case"dialog":W("cancel",e),W("close",e),i=r;break;case"iframe":case"object":case"embed":W("load",e),i=r;break;case"video":case"audio":for(i=0;i<_r.length;i++)W(_r[i],e);i=r;break;case"source":W("error",e),i=r;break;case"img":case"image":case"link":W("error",e),W("load",e),i=r;break;case"details":W("toggle",e),i=r;break;case"input":jc(e,r),i=Ia(e,r),W("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Z({},r,{value:void 0}),W("invalid",e);break;case"textarea":Mc(e,r),i=Aa(e,r),W("invalid",e);break;default:i=r}za(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Gm(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&$m(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Zr(e,u):typeof u=="number"&&Zr(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jr.hasOwnProperty(s)?u!=null&&s==="onScroll"&&W("scroll",e):u!=null&&Jl(e,s,u,o))}switch(n){case"input":Oi(e),Ec(e,r,!1);break;case"textarea":Oi(e),Rc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+en(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Jn(e,!!r.multiple,s,!1):r.defaultValue!=null&&Jn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ps)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xe(t),null;case 6:if(e&&t.stateNode!=null)gh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(E(166));if(n=bn(ci.current),bn(mt.current),Hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ct]=t,(s=r.nodeValue!==n)&&(e=Ve,e!==null))switch(e.tag){case 3:$i(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$i(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ct]=t,t.stateNode=r}return xe(t),null;case 13:if($(Y),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(K&&ze!==null&&t.mode&1&&!(t.flags&128))Ap(),lr(),t.flags|=98560,s=!1;else if(s=Hi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(E(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[ct]=t}else lr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xe(t),s=!1}else it!==null&&(yl(it),it=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Y.current&1?ce===0&&(ce=3):Au())),t.updateQueue!==null&&(t.flags|=4),xe(t),null);case 4:return cr(),ul(e,t),e===null&&oi(t.stateNode.containerInfo),xe(t),null;case 10:return yu(t.type._context),xe(t),null;case 17:return Le(t.type)&&Is(),xe(t),null;case 19:if($(Y),s=t.memoizedState,s===null)return xe(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)jr(s,!1);else{if(ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Vs(e),o!==null){for(t.flags|=128,jr(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return U(Y,Y.current&1|2),t.child}e=e.sibling}s.tail!==null&&ne()>fr&&(t.flags|=128,r=!0,jr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Vs(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),jr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!K)return xe(t),null}else 2*ne()-s.renderingStartTime>fr&&n!==1073741824&&(t.flags|=128,r=!0,jr(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ne(),t.sibling=null,n=Y.current,U(Y,r?n&1|2:n&1),t):(xe(t),null);case 22:case 23:return Du(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_e&1073741824&&(xe(t),t.subtreeFlags&6&&(t.flags|=8192)):xe(t),null;case 24:return null;case 25:return null}throw Error(E(156,t.tag))}function nx(e,t){switch(mu(t),t.tag){case 1:return Le(t.type)&&Is(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cr(),$(Ie),$(we),wu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bu(t),null;case 13:if($(Y),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(E(340));lr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $(Y),null;case 4:return cr(),null;case 10:return yu(t.type._context),null;case 22:case 23:return Du(),null;case 24:return null;default:return null}}var Xi=!1,Se=!1,rx=typeof WeakSet=="function"?WeakSet:Set,D=null;function Hn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){te(e,t,r)}else n.current=null}function cl(e,t,n){try{n()}catch(r){te(e,t,r)}}var vd=!1;function ix(e,t){if(Ga=Es,e=bp(),du(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,f=0,d=e,m=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(u=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)m=d,d=y;for(;;){if(d===e)break t;if(m===n&&++c===i&&(a=o),m===s&&++f===r&&(u=o),(y=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ka={focusedElem:e,selectionRange:n},Es=!1,D=t;D!==null;)if(t=D,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,D=e;else for(;D!==null;){t=D;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,S=g.memoizedState,h=t.stateNode,p=h.getSnapshotBeforeUpdate(t.elementType===t.type?x:tt(t.type,x),S);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(w){te(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,D=e;break}D=t.return}return g=vd,vd=!1,g}function $r(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&cl(t,n,s)}i=i.next}while(i!==r)}}function mo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function dl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function yh(e){var t=e.alternate;t!==null&&(e.alternate=null,yh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ct],delete t[li],delete t[Qa],delete t[Nv],delete t[Fv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vh(e){return e.tag===5||e.tag===3||e.tag===4}function xd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ps));else if(r!==4&&(e=e.child,e!==null))for(fl(e,t,n),e=e.sibling;e!==null;)fl(e,t,n),e=e.sibling}function ml(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ml(e,t,n),e=e.sibling;e!==null;)ml(e,t,n),e=e.sibling}var pe=null,nt=!1;function _t(e,t,n){for(n=n.child;n!==null;)xh(e,t,n),n=n.sibling}function xh(e,t,n){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(io,n)}catch{}switch(n.tag){case 5:Se||Hn(n,t);case 6:var r=pe,i=nt;pe=null,_t(e,t,n),pe=r,nt=i,pe!==null&&(nt?(e=pe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pe.removeChild(n.stateNode));break;case 18:pe!==null&&(nt?(e=pe,n=n.stateNode,e.nodeType===8?Go(e.parentNode,n):e.nodeType===1&&Go(e,n),ri(e)):Go(pe,n.stateNode));break;case 4:r=pe,i=nt,pe=n.stateNode.containerInfo,nt=!0,_t(e,t,n),pe=r,nt=i;break;case 0:case 11:case 14:case 15:if(!Se&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&cl(n,t,o),i=i.next}while(i!==r)}_t(e,t,n);break;case 1:if(!Se&&(Hn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){te(n,t,a)}_t(e,t,n);break;case 21:_t(e,t,n);break;case 22:n.mode&1?(Se=(r=Se)||n.memoizedState!==null,_t(e,t,n),Se=r):_t(e,t,n);break;default:_t(e,t,n)}}function Sd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new rx),t.forEach(function(r){var i=mx.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Je(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:pe=a.stateNode,nt=!1;break e;case 3:pe=a.stateNode.containerInfo,nt=!0;break e;case 4:pe=a.stateNode.containerInfo,nt=!0;break e}a=a.return}if(pe===null)throw Error(E(160));xh(s,o,i),pe=null,nt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){te(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Sh(t,e),t=t.sibling}function Sh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Je(t,e),lt(e),r&4){try{$r(3,e,e.return),mo(3,e)}catch(x){te(e,e.return,x)}try{$r(5,e,e.return)}catch(x){te(e,e.return,x)}}break;case 1:Je(t,e),lt(e),r&512&&n!==null&&Hn(n,n.return);break;case 5:if(Je(t,e),lt(e),r&512&&n!==null&&Hn(n,n.return),e.flags&32){var i=e.stateNode;try{Zr(i,"")}catch(x){te(e,e.return,x)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&qm(i,s),Oa(a,o);var c=Oa(a,s);for(o=0;o<u.length;o+=2){var f=u[o],d=u[o+1];f==="style"?Gm(i,d):f==="dangerouslySetInnerHTML"?$m(i,d):f==="children"?Zr(i,d):Jl(i,f,d,c)}switch(a){case"input":La(i,s);break;case"textarea":Um(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Jn(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?Jn(i,!!s.multiple,s.defaultValue,!0):Jn(i,!!s.multiple,s.multiple?[]:"",!1))}i[li]=s}catch(x){te(e,e.return,x)}}break;case 6:if(Je(t,e),lt(e),r&4){if(e.stateNode===null)throw Error(E(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(x){te(e,e.return,x)}}break;case 3:if(Je(t,e),lt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ri(t.containerInfo)}catch(x){te(e,e.return,x)}break;case 4:Je(t,e),lt(e);break;case 13:Je(t,e),lt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Iu=ne())),r&4&&Sd(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Se=(c=Se)||f,Je(t,e),Se=c):Je(t,e),lt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(D=e,f=e.child;f!==null;){for(d=D=f;D!==null;){switch(m=D,y=m.child,m.tag){case 0:case 11:case 14:case 15:$r(4,m,m.return);break;case 1:Hn(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(x){te(r,n,x)}}break;case 5:Hn(m,m.return);break;case 22:if(m.memoizedState!==null){wd(d);continue}}y!==null?(y.return=m,D=y):wd(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Hm("display",o))}catch(x){te(e,e.return,x)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){te(e,e.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Je(t,e),lt(e),r&4&&Sd(e);break;case 21:break;default:Je(t,e),lt(e)}}function lt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(vh(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Zr(i,""),r.flags&=-33);var s=xd(e);ml(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=xd(e);fl(e,a,o);break;default:throw Error(E(161))}}catch(u){te(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sx(e,t,n){D=e,bh(e)}function bh(e,t,n){for(var r=(e.mode&1)!==0;D!==null;){var i=D,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Xi;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Se;a=Xi;var c=Se;if(Xi=o,(Se=u)&&!c)for(D=i;D!==null;)o=D,u=o.child,o.tag===22&&o.memoizedState!==null?Td(i):u!==null?(u.return=o,D=u):Td(i);for(;s!==null;)D=s,bh(s),s=s.sibling;D=i,Xi=a,Se=c}bd(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,D=s):bd(e)}}function bd(e){for(;D!==null;){var t=D;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Se||mo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Se)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:tt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&sd(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}sd(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&ri(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Se||t.flags&512&&dl(t)}catch(m){te(t,t.return,m)}}if(t===e){D=null;break}if(n=t.sibling,n!==null){n.return=t.return,D=n;break}D=t.return}}function wd(e){for(;D!==null;){var t=D;if(t===e){D=null;break}var n=t.sibling;if(n!==null){n.return=t.return,D=n;break}D=t.return}}function Td(e){for(;D!==null;){var t=D;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mo(4,t)}catch(u){te(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){te(t,i,u)}}var s=t.return;try{dl(t)}catch(u){te(t,s,u)}break;case 5:var o=t.return;try{dl(t)}catch(u){te(t,o,u)}}}catch(u){te(t,t.return,u)}if(t===e){D=null;break}var a=t.sibling;if(a!==null){a.return=t.return,D=a;break}D=t.return}}var ox=Math.ceil,Fs=Lt.ReactCurrentDispatcher,Ru=Lt.ReactCurrentOwner,Ke=Lt.ReactCurrentBatchConfig,N=0,me=null,oe=null,ge=0,_e=0,Gn=on(0),ce=0,pi=null,Pn=0,po=0,Pu=0,Hr=null,Re=null,Iu=0,fr=1/0,vt=null,qs=!1,pl=null,Qt=null,Yi=!1,Wt=null,Us=0,Gr=0,hl=null,ps=-1,hs=0;function je(){return N&6?ne():ps!==-1?ps:ps=ne()}function Jt(e){return e.mode&1?N&2&&ge!==0?ge&-ge:Uv.transition!==null?(hs===0&&(hs=sp()),hs):(e=q,e!==0||(e=window.event,e=e===void 0?16:fp(e.type)),e):1}function ot(e,t,n,r){if(50<Gr)throw Gr=0,hl=null,Error(E(185));Ci(e,n,r),(!(N&2)||e!==me)&&(e===me&&(!(N&2)&&(po|=n),ce===4&&qt(e,ge)),De(e,r),n===1&&N===0&&!(t.mode&1)&&(fr=ne()+500,uo&&an()))}function De(e,t){var n=e.callbackNode;U0(e,t);var r=js(e,e===me?ge:0);if(r===0)n!==null&&Lc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Lc(n),t===1)e.tag===0?qv(Cd.bind(null,e)):Ip(Cd.bind(null,e)),Vv(function(){!(N&6)&&an()}),n=null;else{switch(op(r)){case 1:n=ru;break;case 4:n=rp;break;case 16:n=ks;break;case 536870912:n=ip;break;default:n=ks}n=Rh(n,wh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function wh(e,t){if(ps=-1,hs=0,N&6)throw Error(E(327));var n=e.callbackNode;if(rr()&&e.callbackNode!==n)return null;var r=js(e,e===me?ge:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ws(e,r);else{t=r;var i=N;N|=2;var s=Ch();(me!==e||ge!==t)&&(vt=null,fr=ne()+500,Cn(e,t));do try{ux();break}catch(a){Th(e,a)}while(!0);gu(),Fs.current=s,N=i,oe!==null?t=0:(me=null,ge=0,t=ce)}if(t!==0){if(t===2&&(i=qa(e),i!==0&&(r=i,t=gl(e,i))),t===1)throw n=pi,Cn(e,0),qt(e,r),De(e,ne()),n;if(t===6)qt(e,r);else{if(i=e.current.alternate,!(r&30)&&!ax(i)&&(t=Ws(e,r),t===2&&(s=qa(e),s!==0&&(r=s,t=gl(e,s))),t===1))throw n=pi,Cn(e,0),qt(e,r),De(e,ne()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(E(345));case 2:mn(e,Re,vt);break;case 3:if(qt(e,r),(r&130023424)===r&&(t=Iu+500-ne(),10<t)){if(js(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){je(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ya(mn.bind(null,e,Re,vt),t);break}mn(e,Re,vt);break;case 4:if(qt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ne()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ox(r/1960))-r,10<r){e.timeoutHandle=Ya(mn.bind(null,e,Re,vt),r);break}mn(e,Re,vt);break;case 5:mn(e,Re,vt);break;default:throw Error(E(329))}}}return De(e,ne()),e.callbackNode===n?wh.bind(null,e):null}function gl(e,t){var n=Hr;return e.current.memoizedState.isDehydrated&&(Cn(e,t).flags|=256),e=Ws(e,t),e!==2&&(t=Re,Re=n,t!==null&&yl(t)),e}function yl(e){Re===null?Re=e:Re.push.apply(Re,e)}function ax(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!at(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qt(e,t){for(t&=~Pu,t&=~po,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function Cd(e){if(N&6)throw Error(E(327));rr();var t=js(e,0);if(!(t&1))return De(e,ne()),null;var n=Ws(e,t);if(e.tag!==0&&n===2){var r=qa(e);r!==0&&(t=r,n=gl(e,r))}if(n===1)throw n=pi,Cn(e,0),qt(e,t),De(e,ne()),n;if(n===6)throw Error(E(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mn(e,Re,vt),De(e,ne()),null}function Lu(e,t){var n=N;N|=1;try{return e(t)}finally{N=n,N===0&&(fr=ne()+500,uo&&an())}}function In(e){Wt!==null&&Wt.tag===0&&!(N&6)&&rr();var t=N;N|=1;var n=Ke.transition,r=q;try{if(Ke.transition=null,q=1,e)return e()}finally{q=r,Ke.transition=n,N=t,!(N&6)&&an()}}function Du(){_e=Gn.current,$(Gn)}function Cn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ov(n)),oe!==null)for(n=oe.return;n!==null;){var r=n;switch(mu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Is();break;case 3:cr(),$(Ie),$(we),wu();break;case 5:bu(r);break;case 4:cr();break;case 13:$(Y);break;case 19:$(Y);break;case 10:yu(r.type._context);break;case 22:case 23:Du()}n=n.return}if(me=e,oe=e=Zt(e.current,null),ge=_e=t,ce=0,pi=null,Pu=po=Pn=0,Re=Hr=null,Sn!==null){for(t=0;t<Sn.length;t++)if(n=Sn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Sn=null}return e}function Th(e,t){do{var n=oe;try{if(gu(),ds.current=Ns,Bs){for(var r=J.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bs=!1}if(Rn=0,fe=ue=J=null,Wr=!1,di=0,Ru.current=null,n===null||n.return===null){ce=1,pi=t,oe=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=ge,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=dd(o);if(y!==null){y.flags&=-257,fd(y,o,a,s,t),y.mode&1&&cd(s,c,t),t=y,u=c;var g=t.updateQueue;if(g===null){var x=new Set;x.add(u),t.updateQueue=x}else g.add(u);break e}else{if(!(t&1)){cd(s,c,t),Au();break e}u=Error(E(426))}}else if(K&&a.mode&1){var S=dd(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),fd(S,o,a,s,t),pu(dr(u,a));break e}}s=u=dr(u,a),ce!==4&&(ce=2),Hr===null?Hr=[s]:Hr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var h=oh(s,u,t);id(s,h);break e;case 1:a=u;var p=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Qt===null||!Qt.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=ah(s,a,t);id(s,w);break e}}s=s.return}while(s!==null)}jh(n)}catch(T){t=T,oe===n&&n!==null&&(oe=n=n.return);continue}break}while(!0)}function Ch(){var e=Fs.current;return Fs.current=Ns,e===null?Ns:e}function Au(){(ce===0||ce===3||ce===2)&&(ce=4),me===null||!(Pn&268435455)&&!(po&268435455)||qt(me,ge)}function Ws(e,t){var n=N;N|=2;var r=Ch();(me!==e||ge!==t)&&(vt=null,Cn(e,t));do try{lx();break}catch(i){Th(e,i)}while(!0);if(gu(),N=n,Fs.current=r,oe!==null)throw Error(E(261));return me=null,ge=0,ce}function lx(){for(;oe!==null;)kh(oe)}function ux(){for(;oe!==null&&!A0();)kh(oe)}function kh(e){var t=Mh(e.alternate,e,_e);e.memoizedProps=e.pendingProps,t===null?jh(e):oe=t,Ru.current=null}function jh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=nx(n,t),n!==null){n.flags&=32767,oe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ce=6,oe=null;return}}else if(n=tx(n,t,_e),n!==null){oe=n;return}if(t=t.sibling,t!==null){oe=t;return}oe=t=e}while(t!==null);ce===0&&(ce=5)}function mn(e,t,n){var r=q,i=Ke.transition;try{Ke.transition=null,q=1,cx(e,t,n,r)}finally{Ke.transition=i,q=r}return null}function cx(e,t,n,r){do rr();while(Wt!==null);if(N&6)throw Error(E(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(E(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(W0(e,s),e===me&&(oe=me=null,ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yi||(Yi=!0,Rh(ks,function(){return rr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ke.transition,Ke.transition=null;var o=q;q=1;var a=N;N|=4,Ru.current=null,ix(e,n),Sh(n,e),Pv(Ka),Es=!!Ga,Ka=Ga=null,e.current=n,sx(n),_0(),N=a,q=o,Ke.transition=s}else e.current=n;if(Yi&&(Yi=!1,Wt=e,Us=i),s=e.pendingLanes,s===0&&(Qt=null),V0(n.stateNode),De(e,ne()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qs)throw qs=!1,e=pl,pl=null,e;return Us&1&&e.tag!==0&&rr(),s=e.pendingLanes,s&1?e===hl?Gr++:(Gr=0,hl=e):Gr=0,an(),null}function rr(){if(Wt!==null){var e=op(Us),t=Ke.transition,n=q;try{if(Ke.transition=null,q=16>e?16:e,Wt===null)var r=!1;else{if(e=Wt,Wt=null,Us=0,N&6)throw Error(E(331));var i=N;for(N|=4,D=e.current;D!==null;){var s=D,o=s.child;if(D.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(D=c;D!==null;){var f=D;switch(f.tag){case 0:case 11:case 15:$r(8,f,s)}var d=f.child;if(d!==null)d.return=f,D=d;else for(;D!==null;){f=D;var m=f.sibling,y=f.return;if(yh(f),f===c){D=null;break}if(m!==null){m.return=y,D=m;break}D=y}}}var g=s.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var S=x.sibling;x.sibling=null,x=S}while(x!==null)}}D=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,D=o;else e:for(;D!==null;){if(s=D,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$r(9,s,s.return)}var h=s.sibling;if(h!==null){h.return=s.return,D=h;break e}D=s.return}}var p=e.current;for(D=p;D!==null;){o=D;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,D=v;else e:for(o=p;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mo(9,a)}}catch(T){te(a,a.return,T)}if(a===o){D=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,D=w;break e}D=a.return}}if(N=i,an(),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(io,e)}catch{}r=!0}return r}finally{q=n,Ke.transition=t}}return!1}function kd(e,t,n){t=dr(n,t),t=oh(e,t,1),e=Yt(e,t,1),t=je(),e!==null&&(Ci(e,1,t),De(e,t))}function te(e,t,n){if(e.tag===3)kd(e,e,n);else for(;t!==null;){if(t.tag===3){kd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qt===null||!Qt.has(r))){e=dr(n,e),e=ah(t,e,1),t=Yt(t,e,1),e=je(),t!==null&&(Ci(t,1,e),De(t,e));break}}t=t.return}}function dx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=je(),e.pingedLanes|=e.suspendedLanes&n,me===e&&(ge&n)===n&&(ce===4||ce===3&&(ge&130023424)===ge&&500>ne()-Iu?Cn(e,0):Pu|=n),De(e,t)}function Eh(e,t){t===0&&(e.mode&1?(t=Ni,Ni<<=1,!(Ni&130023424)&&(Ni=4194304)):t=1);var n=je();e=Rt(e,t),e!==null&&(Ci(e,t,n),De(e,n))}function fx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Eh(e,n)}function mx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(t),Eh(e,n)}var Mh;Mh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ie.current)Pe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Pe=!1,ex(e,t,n);Pe=!!(e.flags&131072)}else Pe=!1,K&&t.flags&1048576&&Lp(t,As,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ms(e,t),e=t.pendingProps;var i=ar(t,we.current);nr(t,n),i=Cu(null,t,r,e,i,n);var s=ku();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Le(r)?(s=!0,Ls(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xu(t),i.updater=fo,t.stateNode=i,i._reactInternals=t,rl(t,r,e,n),t=ol(null,t,r,!0,s,n)):(t.tag=0,K&&s&&fu(t),Te(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ms(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=hx(r),e=tt(r,e),i){case 0:t=sl(null,t,r,e,n);break e;case 1:t=hd(null,t,r,e,n);break e;case 11:t=md(null,t,r,e,n);break e;case 14:t=pd(null,t,r,tt(r.type,e),n);break e}throw Error(E(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tt(r,i),sl(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tt(r,i),hd(e,t,r,i,n);case 3:e:{if(dh(t),e===null)throw Error(E(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Vp(e,t),Os(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=dr(Error(E(423)),t),t=gd(e,t,r,n,i);break e}else if(r!==i){i=dr(Error(E(424)),t),t=gd(e,t,r,n,i);break e}else for(ze=Xt(t.stateNode.containerInfo.firstChild),Ve=t,K=!0,it=null,n=zp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lr(),r===i){t=Pt(e,t,n);break e}Te(e,t,r,n)}t=t.child}return t;case 5:return Bp(t),e===null&&el(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Xa(r,i)?o=null:s!==null&&Xa(r,s)&&(t.flags|=32),ch(e,t),Te(e,t,o,n),t.child;case 6:return e===null&&el(t),null;case 13:return fh(e,t,n);case 4:return Su(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ur(t,null,r,n):Te(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tt(r,i),md(e,t,r,i,n);case 7:return Te(e,t,t.pendingProps,n),t.child;case 8:return Te(e,t,t.pendingProps.children,n),t.child;case 12:return Te(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,U(_s,r._currentValue),r._currentValue=o,s!==null)if(at(s.value,o)){if(s.children===i.children&&!Ie.current){t=Pt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=kt(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),tl(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tl(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Te(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,nr(t,n),i=Ye(i),r=r(i),t.flags|=1,Te(e,t,r,n),t.child;case 14:return r=t.type,i=tt(r,t.pendingProps),i=tt(r.type,i),pd(e,t,r,i,n);case 15:return lh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tt(r,i),ms(e,t),t.tag=1,Le(r)?(e=!0,Ls(t)):e=!1,nr(t,n),sh(t,r,i),rl(t,r,i,n),ol(null,t,r,!0,e,n);case 19:return mh(e,t,n);case 22:return uh(e,t,n)}throw Error(E(156,t.tag))};function Rh(e,t){return np(e,t)}function px(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function He(e,t,n,r){return new px(e,t,n,r)}function _u(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hx(e){if(typeof e=="function")return _u(e)?1:0;if(e!=null){if(e=e.$$typeof,e===eu)return 11;if(e===tu)return 14}return 2}function Zt(e,t){var n=e.alternate;return n===null?(n=He(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function gs(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")_u(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case On:return kn(n.children,i,s,t);case Zl:o=8,i|=8;break;case Ea:return e=He(12,n,t,i|2),e.elementType=Ea,e.lanes=s,e;case Ma:return e=He(13,n,t,i),e.elementType=Ma,e.lanes=s,e;case Ra:return e=He(19,n,t,i),e.elementType=Ra,e.lanes=s,e;case Bm:return ho(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Om:o=10;break e;case Vm:o=9;break e;case eu:o=11;break e;case tu:o=14;break e;case Vt:o=16,r=null;break e}throw Error(E(130,e==null?e:typeof e,""))}return t=He(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function kn(e,t,n,r){return e=He(7,e,r,t),e.lanes=n,e}function ho(e,t,n,r){return e=He(22,e,r,t),e.elementType=Bm,e.lanes=n,e.stateNode={isHidden:!1},e}function ta(e,t,n){return e=He(6,e,null,t),e.lanes=n,e}function na(e,t,n){return t=He(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gx(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zo(0),this.expirationTimes=zo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,r,i,s,o,a,u){return e=new gx(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=He(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xu(s),e}function yx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ph(e){if(!e)return tn;e=e._reactInternals;e:{if(An(e)!==e||e.tag!==1)throw Error(E(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Le(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(E(171))}if(e.tag===1){var n=e.type;if(Le(n))return Pp(e,n,t)}return t}function Ih(e,t,n,r,i,s,o,a,u){return e=zu(n,r,!0,e,i,s,o,a,u),e.context=Ph(null),n=e.current,r=je(),i=Jt(n),s=kt(r,i),s.callback=t??null,Yt(n,s,i),e.current.lanes=i,Ci(e,i,r),De(e,r),e}function go(e,t,n,r){var i=t.current,s=je(),o=Jt(i);return n=Ph(n),t.context===null?t.context=n:t.pendingContext=n,t=kt(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Yt(i,t,o),e!==null&&(ot(e,i,o,s),cs(e,i,o)),o}function $s(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ou(e,t){jd(e,t),(e=e.alternate)&&jd(e,t)}function vx(){return null}var Lh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vu(e){this._internalRoot=e}yo.prototype.render=Vu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(E(409));go(e,t,null,null)};yo.prototype.unmount=Vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;In(function(){go(null,e,null,null)}),t[Mt]=null}};function yo(e){this._internalRoot=e}yo.prototype.unstable_scheduleHydration=function(e){if(e){var t=up();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ft.length&&t!==0&&t<Ft[n].priority;n++);Ft.splice(n,0,e),n===0&&dp(e)}};function Bu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ed(){}function xx(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=$s(o);s.call(c)}}var o=Ih(t,r,e,0,null,!1,!1,"",Ed);return e._reactRootContainer=o,e[Mt]=o.current,oi(e.nodeType===8?e.parentNode:e),In(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=$s(u);a.call(c)}}var u=zu(e,0,!1,null,null,!1,!1,"",Ed);return e._reactRootContainer=u,e[Mt]=u.current,oi(e.nodeType===8?e.parentNode:e),In(function(){go(t,u,n,r)}),u}function xo(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=$s(o);a.call(u)}}go(t,o,e,i)}else o=xx(n,t,e,i,r);return $s(o)}ap=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ar(t.pendingLanes);n!==0&&(iu(t,n|1),De(t,ne()),!(N&6)&&(fr=ne()+500,an()))}break;case 13:In(function(){var r=Rt(e,1);if(r!==null){var i=je();ot(r,e,1,i)}}),Ou(e,1)}};su=function(e){if(e.tag===13){var t=Rt(e,134217728);if(t!==null){var n=je();ot(t,e,134217728,n)}Ou(e,134217728)}};lp=function(e){if(e.tag===13){var t=Jt(e),n=Rt(e,t);if(n!==null){var r=je();ot(n,e,t,r)}Ou(e,t)}};up=function(){return q};cp=function(e,t){var n=q;try{return q=e,t()}finally{q=n}};Ba=function(e,t,n){switch(t){case"input":if(La(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=lo(r);if(!i)throw Error(E(90));Fm(r),La(r,i)}}}break;case"textarea":Um(e,n);break;case"select":t=n.value,t!=null&&Jn(e,!!n.multiple,t,!1)}};Ym=Lu;Qm=In;var Sx={usingClientEntryPoint:!1,Events:[ji,Fn,lo,Km,Xm,Lu]},Er={findFiberByHostInstance:xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bx={bundleType:Er.bundleType,version:Er.version,rendererPackageName:Er.rendererPackageName,rendererConfig:Er.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ep(e),e===null?null:e.stateNode},findFiberByHostInstance:Er.findFiberByHostInstance||vx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qi.isDisabled&&Qi.supportsFiber)try{io=Qi.inject(bx),ft=Qi}catch{}}Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sx;Ne.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bu(t))throw Error(E(200));return yx(e,t,null,n)};Ne.createRoot=function(e,t){if(!Bu(e))throw Error(E(299));var n=!1,r="",i=Lh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=zu(e,1,!1,null,null,n,!1,r,i),e[Mt]=t.current,oi(e.nodeType===8?e.parentNode:e),new Vu(t)};Ne.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(E(188)):(e=Object.keys(e).join(","),Error(E(268,e)));return e=ep(t),e=e===null?null:e.stateNode,e};Ne.flushSync=function(e){return In(e)};Ne.hydrate=function(e,t,n){if(!vo(t))throw Error(E(200));return xo(null,e,t,!0,n)};Ne.hydrateRoot=function(e,t,n){if(!Bu(e))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Lh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Ih(t,null,e,1,n??null,i,!1,s,o),e[Mt]=t.current,oi(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new yo(t)};Ne.render=function(e,t,n){if(!vo(t))throw Error(E(200));return xo(null,e,t,!1,n)};Ne.unmountComponentAtNode=function(e){if(!vo(e))throw Error(E(40));return e._reactRootContainer?(In(function(){xo(null,null,e,!1,function(){e._reactRootContainer=null,e[Mt]=null})}),!0):!1};Ne.unstable_batchedUpdates=Lu;Ne.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!vo(n))throw Error(E(200));if(e==null||e._reactInternals===void 0)throw Error(E(38));return xo(e,t,n,!1,r)};Ne.version="18.3.1-next-f1338f8080-20240426";function Dh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dh)}catch(e){console.error(e)}}Dh(),Dm.exports=Ne;var wx=Dm.exports,Md=wx;ka.createRoot=Md.createRoot,ka.hydrateRoot=Md.hydrateRoot;const Tx={},Rd=e=>{let t;const n=new Set,r=(f,d)=>{const m=typeof f=="function"?f(t):f;if(!Object.is(m,t)){const y=t;t=d??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(g=>g(t,y))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Tx?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,i,u);return u},Cx=e=>e?Rd(e):Rd;var Ah={exports:{}},_h={},zh={exports:{}},Oh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mr=b;function kx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jx=typeof Object.is=="function"?Object.is:kx,Ex=mr.useState,Mx=mr.useEffect,Rx=mr.useLayoutEffect,Px=mr.useDebugValue;function Ix(e,t){var n=t(),r=Ex({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return Rx(function(){i.value=n,i.getSnapshot=t,ra(i)&&s({inst:i})},[e,n,t]),Mx(function(){return ra(i)&&s({inst:i}),e(function(){ra(i)&&s({inst:i})})},[e]),Px(n),n}function ra(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jx(e,n)}catch{return!0}}function Lx(e,t){return t()}var Dx=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Lx:Ix;Oh.useSyncExternalStore=mr.useSyncExternalStore!==void 0?mr.useSyncExternalStore:Dx;zh.exports=Oh;var Ax=zh.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So=b,_x=Ax;function zx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ox=typeof Object.is=="function"?Object.is:zx,Vx=_x.useSyncExternalStore,Bx=So.useRef,Nx=So.useEffect,Fx=So.useMemo,qx=So.useDebugValue;_h.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Bx(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Fx(function(){function u(y){if(!c){if(c=!0,f=y,y=r(y),i!==void 0&&o.hasValue){var g=o.value;if(i(g,y))return d=g}return d=y}if(g=d,Ox(f,y))return g;var x=r(y);return i!==void 0&&i(g,x)?(f=y,g):(f=y,d=x)}var c=!1,f,d,m=n===void 0?null:n;return[function(){return u(t())},m===null?void 0:function(){return u(m())}]},[t,n,r,i]);var a=Vx(e,s[0],s[1]);return Nx(function(){o.hasValue=!0,o.value=a},[a]),qx(a),a};Ah.exports=_h;var Ux=Ah.exports;const Wx=Sm(Ux),Vh={},{useDebugValue:$x}=Im,{useSyncExternalStoreWithSelector:Hx}=Wx;let Pd=!1;const Gx=e=>e;function Kx(e,t=Gx,n){(Vh?"production":void 0)!=="production"&&n&&!Pd&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Pd=!0);const r=Hx(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return $x(r),r}const Id=e=>{(Vh?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Cx(e):e,n=(r,i)=>Kx(t,r,i);return Object.assign(n,t),n},Bh=e=>e?Id(e):Id,Xx=[{id:"sword_chipped",name:"pe brche",slot:"weapon",rarity:"common",stats:{atk:8,def:0,vit:0},durability:100,maxDurability:100,properties:[],value:10,description:"Ton pe de dpart. Elle a vu des combats."},{id:"leather_armor",name:"Armure de Cuir",slot:"torso",rarity:"common",stats:{atk:0,def:6,vit:0},durability:100,maxDurability:100,properties:[],value:8,description:"Une armure use mais solide."},{id:"sword_dented",name:"pe Dentele",slot:"weapon",rarity:"uncommon",stats:{atk:12,def:0,vit:0},durability:100,maxDurability:100,properties:[],value:25,description:"Une pe qui a mordu dans la chair. Efficace."},{id:"helmet_rusty",name:"Casque Rouill",slot:"head",rarity:"common",stats:{atk:0,def:4,vit:0},durability:75,maxDurability:100,properties:["rusty"],value:12,description:"Rouill mais a protge encore."},{id:"mail_shirt",name:"Chemise de Mailles",slot:"torso",rarity:"uncommon",stats:{atk:0,def:10,vit:-1},durability:100,maxDurability:100,properties:["heavy"],value:30,description:"Lourde mais rsistante. a ralentit un peu."},{id:"dagger_bloody",name:"Dague Ensanglante",slot:"weapon",rarity:"rare",stats:{atk:10,def:0,vit:2},durability:100,maxDurability:100,properties:["bloody","light"],value:45,description:"Lgre et rapide. Le sang sch porte chance."},{id:"shield_wooden",name:"Bouclier de Bois",slot:"offhand",rarity:"common",stats:{atk:0,def:8,vit:0},durability:100,maxDurability:100,properties:[],value:15,description:"Un bouclier simple. Mieux que rien."},{id:"boots_worn",name:"Bottes Uses",slot:"legs",rarity:"common",stats:{atk:0,def:2,vit:3},durability:100,maxDurability:100,properties:["light"],value:10,description:"Uses mais confortables. Tu bouges mieux."}];function hi(e){return{common:"Commun",uncommon:"Peu Commun",rare:"Rare",legendary:"Lgendaire"}[e]}function dt(e){return{common:"#888",uncommon:"#aaa",rare:"#ddd",legendary:"#fff"}[e]}const Yx={common:.6,uncommon:.3,rare:.09,legendary:.01},Qx={common:.5,uncommon:.35,rare:.12,legendary:.03};function Jx(e){return Math.min(4,Math.max(1,e))>=3?Qx:Yx}function Zx(e,t){const n=Math.random();return n<e.common?"common":n<e.common+e.uncommon?"uncommon":n<e.common+e.uncommon+e.rare?"rare":"legendary"}const e1=["light","heavy","rusty","bloody","blessed","solid"];function t1(e,t){if(!(Math.random()<.3)||e.properties.length>=2)return e;const r=e1.filter(s=>!(s==="light"&&e.properties.includes("heavy")||s==="heavy"&&e.properties.includes("light")||e.properties.includes(s)));if(r.length===0)return e;const i=r[Math.floor(Math.random()*r.length)];return{...e,properties:[...e.properties,i]}}function Ld(e,t){const n=Math.floor(Math.random()*21)+80;return Math.floor(e*n/100)}function wt(e,t=Xx,n,r){let i=Jx(e);if(r){i={common:i.common*.85,uncommon:i.uncommon*.95,rare:i.rare*1.5,legendary:i.legendary*1.5};const c=i.common+i.uncommon+i.rare+i.legendary;i.common=i.common/c,i.uncommon=i.uncommon/c,i.rare=i.rare/c,i.legendary=i.legendary/c}const s=Zx(i),o=t.filter(c=>c.rarity===s);if(o.length===0){const c=["common","uncommon","rare","legendary"];for(const f of c){const d=t.filter(m=>m.rarity===f);if(d.length>0){const m=d[Math.floor(Math.random()*d.length)];return{...m,id:`${m.id}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,durability:Ld(m.maxDurability),properties:[...m.properties]}}}throw new Error("Aucun item disponible dans le pool")}const a=o[Math.floor(Math.random()*o.length)];let u={...a,id:`${a.id}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,durability:Ld(a.maxDurability),properties:[...a.properties]};return(s==="rare"||s==="legendary")&&(u=t1(u)),u}const n1=[{id:"sword_compromised",name:"pe Lourde de Guerre",slot:"weapon",rarity:"legendary",stats:{atk:20,def:0,vit:0},durability:100,maxDurability:100,properties:["bloody","heavy"],value:50,description:"Une pe de guerre massive. Elle frappe comme un marteau, mais sa lourdeur te fatigue rapidement.",cursed:!0,curseEffect:"Rduit ta vitalit de 5 points (lourdeur)",curseDescription:"Cette pe est trop lourde pour tre manie efficacement. Elle te fatigue rapidement.",hiddenMalus:{vit:-5}},{id:"armor_compromised",name:"Armure de Pillard",slot:"torso",rarity:"legendary",stats:{atk:0,def:25,vit:0},durability:100,maxDurability:100,properties:["heavy"],value:60,description:"Une armure de pillard, marque de symboles infmes. Elle te protge, mais les marchands te reconnaissent et te font payer plus cher.",cursed:!0,curseEffect:"Rduit l'or gagn de 10% (rputation de pillard)",curseDescription:"Cette armure porte les marques d'un pillard notoire. Les marchands te reconnaissent et te font payer plus cher.",hiddenMalus:{}},{id:"amulet_compromised",name:"Amulette de Dserteur",slot:"accessory",rarity:"rare",stats:{atk:0,def:0,vit:15},durability:100,maxDurability:100,properties:[],value:40,description:"Une amulette militaire vole. Elle te rappelle ta mobilit passe, mais trahit ton pass de dserteur.",cursed:!0,curseEffect:"Rduit ta rputation de 1 (symbole de dserteur)",curseDescription:"Cette amulette porte les symboles d'un dserteur. Les gens te reconnaissent et te font moins confiance.",hiddenMalus:{}},{id:"boots_compromised",name:"Bottes Uses de Voyageur",slot:"legs",rarity:"rare",stats:{atk:0,def:5,vit:10},durability:100,maxDurability:100,properties:["light"],value:35,description:"Des bottes de voyageur uses mais lgres. Elles te font bouger vite, mais offrent peu de protection.",cursed:!0,curseEffect:"Rduit ta dfense de 3 points (protection insuffisante)",curseDescription:"Ces bottes sont lgres mais uses. Elles offrent peu de protection aux pieds.",hiddenMalus:{def:-3}}],Dd=n1;function Ad(e,t){if(e.properties.includes("solid"))return e;const n=e.maxDurability*t/100,r=Math.max(0,e.durability-n);return{...e,durability:r}}function Nh(e){const t=e.durability/e.maxDurability*100;return t===0?"broken":t<=25?"damaged":t<=50?"worn":"normal"}function r1(e){switch(e){case"normal":return 1;case"worn":return .8;case"damaged":return .5;case"broken":return 0}}function i1(e){const t=Nh(e),n=r1(t);return{atk:Math.floor(e.stats.atk*n),def:Math.floor(e.stats.def*n),vit:Math.floor(e.stats.vit*n)}}function s1(e){return e.durability<=0}function o1(e){switch(e){case"normal":return"#4a8";case"worn":return"#ca8";case"damaged":return"#c84";case"broken":return"#c44"}}const a1={normal:"Normal",worn:"Abm",damaged:"Endommag",broken:"Cass"};function gi({item:e,showLabel:t=!0,size:n="medium"}){const r=Nh(e),i=e.durability/e.maxDurability*100,s=o1(r),o=n==="small"?"4px":n==="large"?"8px":"6px",a=n==="small"?"0.7rem":n==="large"?"0.9rem":"0.75rem";return l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",width:"100%"},children:[t&&l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:a,color:"#888"},children:[l.jsx("span",{children:"Durabilit"}),l.jsxs("span",{style:{color:s,fontWeight:r==="broken"?"bold":"normal"},children:[a1[r]," (",Math.floor(i),"%)"]})]}),l.jsxs("div",{style:{width:"100%",height:o,background:"#1a1a1a",borderRadius:"3px",overflow:"hidden",position:"relative"},children:[l.jsx("div",{style:{width:`${i}%`,height:"100%",background:s,transition:"width 0.3s ease-out, background 0.3s",boxShadow:r==="broken"?"none":`0 0 4px ${s}40`}}),(r==="worn"||r==="damaged")&&l.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:r==="damaged"?"repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(0,0,0,0.2) 2px, rgba(0,0,0,0.2) 4px)":"repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(0,0,0,0.1) 4px, rgba(0,0,0,0.1) 8px)",pointerEvents:"none"}})]}),!t&&l.jsxs("div",{style:{fontSize:a,color:s,textAlign:"right",marginTop:"0.1rem"},children:[Math.floor(i),"%"]})]})}function _d(e,t=1){return{...e,explored:e.explored??!1,explorationCount:e.explorationCount??0,firstSeenDay:e.firstSeenDay??t}}const Hs={village_fantome:{name:"Village Fantme",description:"Des maisons vides. Des portes qui grincent. Tu sens que quelque chose te regarde.",riskRange:[1,2],richness:2,frequency:20,icon:""},champ_bataille:{name:"Champ de Bataille",description:"Des cadavres. Des armes brises. L'odeur de la mort. Mais aussi des trsors oublis.",riskRange:[2,3],richness:3,frequency:15,icon:""},ferme_abandonnee:{name:"Ferme Abandonne",description:"Une ferme laisse  l'abandon. Peut-tre quelques outils encore utilisables.",riskRange:[1,2],richness:1,frequency:20,icon:""},monastere_pille:{name:"Monastre Pill",description:"Un lieu de prire profan. Des reliques peuvent encore traner.",riskRange:[2,2],richness:4,frequency:10,icon:""},ruines_fort:{name:"Ruines de Fort",description:"Un ancien fort en ruine. Dangereux, mais riche en quipement militaire.",riskRange:[3,4],richness:4,frequency:10,icon:""},foret:{name:"Fort",description:"Une fort sombre. Des bruits tranges. Mais aussi des ressources naturelles.",riskRange:[2,2],richness:1,frequency:15,icon:""},carriere:{name:"Carrire",description:"Une carrire abandonne. Des outils de mineur peuvent encore servir.",riskRange:[2,3],richness:2,frequency:10,icon:""},cache_tresor:{name:"Cache au Trsor",description:"Un lieu secret rvl par la carte. Des richesses inestimables t'attendent, mais le danger est grand.",riskRange:[3,4],richness:5,frequency:0,icon:""}},l1={bandit:{id:"bandit",name:"Bandits",type:"bandit",atk:10,def:6,vit:4,lootGold:{min:5,max:15},description:"Des pillards sans foi ni loi."},deserter:{id:"deserter",name:"Dserteurs",type:"deserter",atk:12,def:10,vit:5,lootGold:{min:8,max:20},description:"Comme toi, ils ont fui. Maintenant ils te voient comme une proie."},militia:{id:"militia",name:"Miliciens",type:"militia",atk:8,def:14,vit:3,lootGold:{min:3,max:12},description:"Dfenseurs d'un village fantme. Ils ne lchent rien."},veteran_pillager:{id:"veteran_pillager",name:"Pillards Vtrans",type:"veteran_pillager",atk:16,def:8,vit:6,lootGold:{min:15,max:35},description:"Quatre hivers de pillage. Ils sont dangereux."},wolf:{id:"wolf",name:"Loups",type:"wolf",atk:8,def:4,vit:10,lootGold:{min:2,max:8},description:"Une meute affame. Ils attaquent en groupe."},squatter:{id:"squatter",name:"Squatteurs",type:"squatter",atk:6,def:4,vit:4,lootGold:{min:3,max:10},description:"Des civils dsesprs. Nombreux mais faibles."}};function Fh(e){const t=Math.min(5,Math.max(1,e)),n=[];t===1?n.push("bandit","squatter"):t===2?n.push("bandit","deserter","militia","wolf"):t===3?n.push("deserter","militia","veteran_pillager"):t===4?n.push("deserter","veteran_pillager","militia"):n.push("veteran_pillager","deserter");const r=n[Math.floor(Math.random()*n.length)];return l1[r]}function zd(e,t,n){const r=e.atk*.5+e.def*.3+e.vit*.2;let i;return t?i=3.5+Math.random()*13:i=3+Math.random()*9,r+i}function u1(e,t,n){const r=[],i=Object.values(t).filter(s=>s!==void 0);if(i.length===0)return r;if(e==="costly"){const s=i[Math.floor(Math.random()*i.length)],o=Math.floor(Math.random()*11)+10;r.push({itemId:s.id,amount:o})}else if(e==="flee"){const s=Math.random()<.5?1:2;[...i].sort(()=>Math.random()-.5).slice(0,s).forEach(a=>{r.push({itemId:a.id,amount:15})})}return r}function qh(e,t,n,r){const i=zd(e,!0),s=zd({atk:t.atk,def:t.def,vit:t.vit},!1),o=i/s;let a,u,c,f,d=!1;o>1.4?(a="crushing",u=`Tu crass ${t.name}. Aucune rsistance.`,f=Math.floor(Math.random()*(t.lootGold.max-t.lootGold.min+1))+t.lootGold.min,d=!0):o>1?(a="victory",u=`Tu as vaincu ${t.name}.`,f=Math.floor(Math.random()*(t.lootGold.max-t.lootGold.min+1))+t.lootGold.min,d=!0):o>.7?(a="costly",u=`Victoire coteuse contre ${t.name}. Tu es bless.`,f=Math.floor(Math.random()*(t.lootGold.max-t.lootGold.min+1))+t.lootGold.min,d=!0,o>=.7&&o<=1.1&&(e.def>t.atk?c=`Ta Dfense (${e.def}) a bloqu leur attaque (${t.atk}).`:e.atk>t.def?c="Ton arme a fait la diffrence.":c="Sans ton quipement, tu serais mort.")):o>.4?(a="flee",u=`Tu as fui ${t.name}. Tu as perdu du matriel.`,d=!1):(a="defeat",u=`Tu as t vaincu par ${t.name}.`,d=!1);const m=n?u1(a,n):[];return{outcome:a,ratio:o,playerPower:i,enemyPower:s,durabilityLoss:m,lootEarned:d,gold:f,message:u,nearMissMessage:c}}function c1(e){const t=Math.min(5,Math.max(1,e));return{1:.1,2:.25,3:.45,4:.65,5:.85}[t]||.1}function d1(e,t){const n=e.atk*.5+e.def*.3+e.vit*.2+10,r=t.atk*.5+t.def*.3+t.vit*.2+7.5,i=n/r;let s;return i>1.2||i<.6?s="high":i>.8&&i<1.2?s="medium":s="low",{ratio:i,confidence:s}}function f1(e){const t=Math.min(5,Math.max(1,e)),n={1:{atk:8,def:4,vit:4},2:{atk:10,def:7,vit:5},3:{atk:12,def:10,vit:5},4:{atk:14,def:11,vit:6},5:{atk:16,def:8,vit:6}};return n[t]||n[1]}function m1(e){return e>=1.4?95:e>=1?Math.round(75+(e-1)/.4*20):e>=.7?Math.round(50+(e-.7)/.3*25):e>=.4?Math.round(25+(e-.4)/.3*25):5}function p1(e){let t=0,n=0,r=0,i=0,s=0;if(e>=1.4)t=Math.min(100,Math.round(60+(e-1.4)*20)),n=Math.max(0,100-t-5),r=5;else if(e>=1){const a=(e-1)/.4;t=Math.round(a*30),n=Math.round(50+(1-a)*20),r=Math.max(0,100-t-n-10),i=5,s=5}else if(e>=.7){const a=(e-.7)/.3;n=Math.round(a*20),r=Math.round(40+(1-a)*20),i=Math.round(20+(1-a)*10),s=Math.max(0,100-n-r-i)}else if(e>=.4){const a=(e-.4)/.3;r=Math.round(a*15),i=Math.round(50+(1-a)*20),s=Math.max(0,100-r-i)}else s=Math.min(100,Math.round(80+(.4-e)*20)),i=Math.max(0,100-s);const o=t+n+r+i+s;if(o!==100){const a=100/o;t=Math.round(t*a),n=Math.round(n*a),r=Math.round(r*a),i=Math.round(i*a),s=Math.round(s*a)}return{crushing:t,victory:n,costly:r,flee:i,defeat:s}}const bo={economy:{dailyInterest:5,repairCostPerPoint:.25,goldMultiplier:1.25}},h1={loot:.4,combat:.3,choice:.2,empty:.1};function g1(e,t){const n=Math.min(1,(t-1)*.1);return Math.min(4,Math.floor(e+n))}function Uh(e,t,n){const r=[];Object.entries(Hs).forEach(([a,u])=>{const c=Math.floor(u.frequency/5);for(let f=0;f<c;f++)r.push(a)});const i=[],s=[...r];for(let a=0;a<5;a++){s.length===0&&s.push(...r);const u=Math.floor(Math.random()*s.length),c=s[u];i.push(c),s.splice(u,1)}return i.map((a,u)=>{const c=Hs[a],[f,d]=c.riskRange,m=Math.floor(Math.random()*(d-f+1))+f,y=g1(m,e);return{id:`location_${e}_${u}_${Date.now()}`,type:a,name:c.name,description:c.description,risk:y,richness:c.richness,explored:!1,explorationCount:0,firstSeenDay:e}})}function y1(e,t,n){let r={...h1};if(e&&t){const s=e.filter(o=>o.targetLocationId===t||o.hintType==="loot"&&!o.targetLocationId||o.hintType==="combat"&&!o.targetLocationId||o.hintType==="event"&&!o.targetLocationId);for(const o of s)o.hintType==="loot"&&(o.targetLocationId===t||!o.targetLocationId)?(r.loot=.6,r.combat=.2,r.choice=.15,r.empty=.05):o.hintType==="combat"&&(o.targetLocationId===t||!o.targetLocationId)?(r.loot=.3,r.combat=.5,r.choice=.15,r.empty=.05):o.hintType==="event"&&(o.targetLocationId===t||!o.targetLocationId)&&(r.loot=.2,r.combat=.2,r.choice=.5,r.empty=.1)}const i=Math.random();return i<r.loot?"loot":i<r.loot+r.combat?"combat":i<r.loot+r.combat+r.choice?"choice":"empty"}function v1(e,t,n,r,i){const s=e.explored&&(e.explorationCount??0)>0,o=y1(r,e.id),a={event:o,location:e};switch(o){case"combat":{const u=Fh(e.risk),c=qh(t,u,n);a.enemyId=u.id,a.combatResult=c;break}case"loot":{const u=r==null?void 0:r.some(d=>d.hintType==="loot"&&d.targetLocationId===e.id||d.hintType==="loot"&&!d.targetLocationId),c=wt(e.risk,void 0,i,u),f=s?.5:.7;if(Math.random()<f)a.item=c,s&&(a.specialMessage="Tu as dj explor ce lieu. Moins de dcouvertes.");else{const d=Math.floor(Math.random()*(e.richness*30-e.richness*10+1))+e.richness*10,m=s?.5:bo.economy.goldMultiplier,y=Math.floor(d*m);a.gold=y,s&&(a.specialMessage="Tu as dj explor ce lieu. Moins de dcouvertes.")}break}case"choice":{a.choiceId=`choice_${e.type}`,a.choiceText=`Tu arrives  ${e.name}. Que fais-tu ?`,a.choices=[{id:"explore_careful",text:"Explorer prudemment",consequence:"Tu trouves quelque chose, mais tu perds du temps."},{id:"explore_fast",text:"Fouiller rapidement",consequence:"Tu trouves moins, mais tu es plus rapide."},{id:"leave",text:"Partir",consequence:"Tu quittes le lieu sans rien."}];break}case"empty":{a.atmosphereText=`${e.description} Rien d'intressant ici.`;break}}return a}class x1{constructor(){ae(this,"daySummary",{itemsFound:0,combatsWon:0,combatsFled:0,goldEarned:0,goldSpent:0,events:[]})}advancePhase(t,n){switch(t){case"aube":return"exploration";case"exploration":return n.actionsRemaining===0?"crepuscule":"exploration";case"crepuscule":const r=this.checkEndConditions(n);return r==="victory"?"victory":r==="defeat"?"defeat":"aube";default:return t}}advanceDay(t,n){const r=t+1;let i=bo.economy.dailyInterest;r>=15&&n>150&&(i=3);const s=n+i;return{day:r,debt:s,actionsRemaining:3}}checkEndConditions(t){const n=t.day||1,r=t.debt||0;return n>=20?r<=0?"victory":"defeat":t.phase==="defeat"?"defeat":null}generateEveningEvent(t){if(Math.random()<.3){const n=["Un marchand passe par le camp. Il propose des quipements.","Tu entends des rumeurs sur un trsor cach dans les ruines.","Un groupe de voyageurs partage des nouvelles du royaume.","La nuit est calme. Trop calme.","Des lumires dans la fort. Quelqu'un d'autre explore.","Un message est accroch  un arbre. Une offre de travail.","Le vent apporte l'odeur de la guerre. Pas loin.","Des traces de pas. Rcentes. Tu n'es pas seul ici."];return n[Math.floor(Math.random()*n.length)]}return null}resetDaySummary(){this.daySummary={itemsFound:0,combatsWon:0,combatsFled:0,goldEarned:0,goldSpent:0,events:[]}}addToDaySummary(t){this.daySummary={...this.daySummary,...t}}getDaySummary(){return{...this.daySummary}}}const S1="souda_save",b1=1,ht="gameState";function wo(){return typeof indexedDB>"u"?Promise.reject(new Error("IndexedDB not available")):new Promise((e,t)=>{const n=indexedDB.open(S1,b1);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(ht)||i.createObjectStore(ht,{keyPath:"id"})}})}function Wh(e){const t={},n=["phase","day","debt","gold","reputation","playerStats","inventory","equipment","currentEnemy","combatResult","lootedItem","currentEvent","eventResult","dailyLocations","persistentLocations","actionsRemaining","marketStock","marketStockDay","forgeStock","forgeStockDay","npcFlags","rumors","hasEatenToday","narrativeCounters","triggeredEvents","eventCooldowns","recentMonologues","selectedOrigin","audioSettings","combatsWon","combatsFled","combatsLost","legendaryItemsFound","characterArcs"];for(const r of n)r in e&&typeof e[r]!="function"&&(t[r]=e[r]);return t}async function re(e){try{const r=(await wo()).transaction([ht],"readwrite").objectStore(ht),i=Wh(e);await new Promise((s,o)=>{const a=r.put({id:"current",...i,savedAt:Date.now()});a.onsuccess=()=>s(),a.onerror=()=>o(a.error)})}catch(t){console.error("Erreur lors de la sauvegarde:",t)}}async function $h(){try{const n=(await wo()).transaction([ht],"readonly").objectStore(ht);return new Promise((r,i)=>{const s=n.get("current");s.onsuccess=()=>{const o=s.result;if(o){const{id:a,savedAt:u,...c}=o;r(c)}else r(null)},s.onerror=()=>i(s.error)})}catch(e){return console.error("Erreur lors du chargement:",e),null}}async function rt(e){try{const r=(await wo()).transaction([ht],"readwrite").objectStore(ht),i=Wh(e);await new Promise((s,o)=>{const a=r.put({id:"current",...i,savedAt:Date.now(),day:e.day||1});a.onsuccess=()=>{s()},a.onerror=()=>{console.warn(" Erreur auto-save (non-bloquante):",a.error),s()}})}catch(t){console.warn(" Erreur auto-save (non-bloquante):",t)}}async function w1(){try{const n=(await wo()).transaction([ht],"readonly").objectStore(ht);return new Promise(r=>{const i=n.get("current");i.onsuccess=()=>{const s=i.result;s&&s.day&&s.phase?r({day:s.day,phase:s.phase}):r(null)},i.onerror=()=>{console.warn("Erreur lecture save info:",i.error),r(null)}})}catch(e){return console.warn("Erreur getSaveInfo:",e),null}}const T1={1:.6,2:.8,3:1,4:1.1,5:1.2},C1={1:1.4,2:1.2,3:1,4:.9,5:.8},Hh={common:1,uncommon:1.5,rare:2.5,legendary:5};function vl(e,t,n){const r=e.value,i=Hh[e.rarity],s=T1[t];let o=1;return n&&(n.humanite||0)>=8&&(o=1.1),Math.floor(r*i*s*o)}function pn(e,t,n){const r=e.value,i=Hh[e.rarity],s=C1[t];let o=1;return n&&(n.cynisme||0)>=8&&(o=.85),Math.floor(r*1.5*i*s*o)}function hn(e,t){const n=e.maxDurability-e.durability,r=e.rarity==="common"?1:e.rarity==="uncommon"?1.5:e.rarity==="rare"?2.5:5;let i=1;t&&(t.pragmatisme||0)>=8&&(i=.85);const s=n*bo.economy.repairCostPerPoint*r*i;return Math.ceil(s)}function k1(e){return{...e,durability:e.maxDurability}}function j1(e,t){return e<25?t>=4?"Encore un peu et c'tait bon pour la ferraille... Mais je vais arranger a.":"Encore un peu et c'tait bon pour la ferraille...":e<50?t>=4?"a a vcu, mais c'est rparable. Je m'en occupe.":"a a vcu, mais c'est rparable.":e<75?t>=4?"Pas mal us, mais rien de grave. Je peux arranger a.":"Pas mal us, mais rien de grave.":t>=4?"Presque neuf, pourquoi venir me voir ? Mais bon, je peux le polir un peu.":"Presque neuf, pourquoi venir me voir ?"}function E1(e){return e?"Reviens quand tu veux. J'ai toujours mes outils.":"Bertram, forgeron. Je rpare, je forge, je vends. Que veux-tu ?"}function M1(e){return e<=1?"Tu as l'air d'avoir des ennuis. Moi, je fais mon travail, c'est tout.":e<=2?"Tu commences  te faire connatre. Continue comme a.":e>=4?"Tu as une bonne rputation ici. Je peux te faire un petit prix.":"Besoin de quelque chose ?"}const Od=[{text:"On dit qu'un convoi traverse la rgion bientt. Riche, mais bien gard.",hintType:"combat"},{text:"Il y a des rumeurs sur un trsor dans les ruines du fort abandonn.",hintType:"loot"},{text:"Des voyageurs parlent d'un groupe de bandits dans les bois.",hintType:"combat"},{text:"Un marchand a perdu sa cargaison prs du village fantme.",hintType:"loot"},{text:"On raconte qu'un ancien guerrier a cach son quipement dans les ruines.",hintType:"loot"},{text:"Des lumires tranges ont t vues dans la fort la nuit dernire.",hintType:"event"},{text:"Un groupe de pillards rde dans la rgion. Ils sont bien quips.",hintType:"combat"},{text:"Il y a une cache d'armes dans l'ancien monastre.",hintType:"loot"},{text:"Des cratures rdent dans les champs de bataille abandonns.",hintType:"combat"},{text:"Un trsor a t enterr prs de la carrire. Personne ne l'a encore trouv.",hintType:"loot"}];function Vd(e,t,n){const r=t.filter(u=>u.day===e);if(r.length>0)return r;const i=Math.floor(Math.random()*2)+1,s=[],o=new Set,a=t.length;for(let u=0;u<i;u++){let c;do c=Math.floor(Math.random()*Od.length);while(o.has(c));o.add(c);const f=Od[c],m=`rumor_${`${e}_${a+u}_${Date.now()}_${Math.random().toString(36).substring(2,9)}`}`;let y,g;if(n&&n.length>0&&f.hintType==="location"){const x=n[Math.floor(Math.random()*n.length)];y=x.id,g=x.type}else if(n&&n.length>0&&(f.hintType==="loot"||f.hintType==="combat")){const x=n.filter(S=>!0);if(x.length>0){const S=x[Math.floor(Math.random()*x.length)];y=S.id,g=S.type}}s.push({id:m,text:f.text,day:e,hintType:f.hintType||"event",targetLocationId:y,targetLocationType:g})}return s}const ia={stages:[{stage:"menaces",dayRange:[1,5],conditions:e=>e>=1&&e<=5},{stage:"negociations",dayRange:[6,10],conditions:(e,t)=>e>=6&&e<=10&&t<60},{stage:"ultimatum",dayRange:[11,20],conditions:(e,t)=>e>=11&&t>=40},{stage:"consequences",dayRange:[16,20],conditions:(e,t)=>e>=16&&t>0}]};function sa(e,t,n,r,i){for(let s=e.stages.length-1;s>=0;s--){const o=e.stages[s],a=o.conditions||(()=>!0);if(t>=o.dayRange[0]&&t<=o.dayRange[1]&&a(t,n,r,i))return o.stage}return e.stages[0].stage}function Bd(e,t,n){let r=e;switch(t){case"repay":const i=n?Math.min(2,Math.floor(n/20)):1;r=Math.min(10,e+i);break;case"ignore":r=Math.max(0,e-1);break;case"negotiate":r=Math.min(10,e+1);break}return r}function Nd(e,t){return{characterId:e,trustLevel:5,storyStage:"menaces",flags:{},lastInteractionDay:t}}const Nt=[{id:"convoi",title:"La Rumeur du Convoi",description:"Un marchand mentionne un convoi de ravitaillement mal protg qui traverse la rgion. Une opportunit... ou un pige ?",triggerCondition:e=>e.day>=4&&e.day<=6&&!e.npcFlags.convoiDone,oneTime:!0,choices:[{id:"embuscade",text:"Tendre une embuscade",consequences:{gold:Math.floor(Math.random()*21)+30,reputation:-1,counters:{cynisme:1},flags:{convoiDone:!0},narrative:"Tu as tendu une embuscade au convoi. L'or est dans ta poche, mais tu as laiss des traces. Ta rputation en prend un coup."}},{id:"ignorer",text:"Ignorer",consequences:{counters:{humanite:1},narrative:"Tu laisses passer le convoi. Parfois, la meilleure action est de ne rien faire."}},{id:"prevenir",text:"Prvenir les gardes",consequences:{reputation:1,counters:{humanite:1},flags:{convoiDone:!0},narrative:"Tu as prvenu les gardes. Ils t'en sont reconnaissants. Ta rputation s'amliore lgrement."}}]},{id:"collecteurs",title:"Les Collecteurs",description:'Deux hommes de Morten vous trouvent  la taverne. Leurs regards sont froids. "Il est temps de rgler tes comptes."',triggerCondition:e=>e.day>=12&&e.debt>100&&!e.npcFlags.collecteursPaid,oneTime:!1,choices:[{id:"payer",text:"Payer 20 immdiatement",requirements:{gold:20},consequences:{gold:-20,flags:{collecteursPaid:!0},narrative:"Tu leur donnes l'or. Ils partent, mais tu sais qu'ils reviendront."}},{id:"negocier",text:"Ngocier un dlai",requirements:{reputation:3},consequences:{gold:-5,debt:-10,counters:{pragmatisme:1},narrative:"Tu ngocies un dlai. Ta rputation t'a sauv, mais la dette reste."}},{id:"resister",text:"Rsister",consequences:{durabilityLoss:20,debt:-30,counters:{cynisme:1},narrative:"Tu as rsist. C'tait dur, mais tu as gagn. La dette diminue, mais tu es marqu."}}]},{id:"peste",title:"La Peste",description:"La maladie se rpand dans la rgion. Les villages se ferment. Les morts s'accumulent. Que fais-tu ?",triggerCondition:e=>e.day>=10&&Math.random()<.15&&!e.npcFlags.pesteActive,oneTime:!1,choices:[{id:"eviter",text:"viter les villages",consequences:{actionsRemaining:-1,flags:{pesteActive:!0},narrative:"Tu vites les villages. Moins de lieux  explorer, mais tu restes en vie."}},{id:"masque",text:"Porter un masque (10)",requirements:{gold:10},consequences:{gold:-10,flags:{pesteActive:!0},narrative:"Tu portes un masque. C'est une protection, mais rien n'est sr."}},{id:"aider",text:"Aider les malades",requirements:{gold:5},consequences:{gold:-5,reputation:1,counters:{humanite:4},flags:{pesteActive:!0},narrative:"Tu aides les malades. C'est risqu, mais tu as fait le bon choix. Ta rputation grandit."}}]},{id:"marchand",title:"Le Marchand Mystrieux",description:`Un homme encapuchonn vous aborde dans une ruelle. "J'ai des objets... particuliers. Intress ?"`,triggerCondition:e=>e.day>=7&&e.day<=15&&!e.npcFlags.marchandMet&&Math.random()<.1,oneTime:!0,choices:[{id:"objet_compromis",text:"Acheter l'objet compromis (30)",requirements:{gold:30},consequences:{gold:-30,items:["cursed_item"],counters:{cynisme:1},flags:{marchandMet:!0},narrative:"Tu achtes l'objet. Il a l'air puissant, mais quelque chose ne va pas. Des marques suspectes, un poids inhabituel... Tu sens qu'il y a un prix  payer."}},{id:"carte",text:"Acheter la carte (20)",requirements:{gold:20},consequences:{gold:-20,flags:{carteRevelee:!0,marchandMet:!0},narrative:"Tu achtes la carte. Elle rvle un lieu riche que tu n'avais pas encore explor."}},{id:"decliner",text:"Dcliner poliment",consequences:{counters:{pragmatisme:1},flags:{marchandMet:!0},narrative:"Tu dclines. Mieux vaut ne pas s'embarrasser d'affaires douteuses."}},{id:"denoncer",text:"Le dnoncer",consequences:{reputation:1,counters:{cynisme:1},flags:{marchandMet:!0},narrative:"Tu le dnonces aux autorits. Il disparat dans la nuit. Ta rputation s'amliore, mais tu as peut-tre fait une erreur."}}]},{id:"refugies",title:"Rencontre avec des Rfugis",description:"Une famille de rfugis vous supplie de l'aide. Ils ont faim, ils ont froid. Que fais-tu ?",triggerCondition:e=>(e.narrativeCounters._refugiesCount||0)>=5?!1:Math.random()<.15,oneTime:!1,choices:[{id:"donner_or",text:"Donner 8",requirements:{gold:8},consequences:{gold:-8,counters:{humanite:4,_refugiesCount:1},narrative:"Tu leur donnes de l'or. Leurs yeux s'illuminent. Tu as fait une bonne action."}},{id:"partager",text:"Partager de la nourriture",consequences:{actionsRemaining:-1,counters:{humanite:2,_refugiesCount:1},narrative:"Tu partages ta nourriture. C'est peu, mais c'est mieux que rien."}},{id:"ignorer",text:"Les ignorer",consequences:{counters:{cynisme:1},narrative:"Tu les ignores. Tu as tes propres problmes. Mais a te pse."}},{id:"voler",text:"Les voler",consequences:{gold:Math.floor(Math.random()*11)+5,reputation:-1,counters:{cynisme:2,_refugiesCount:1},narrative:"Tu les voles. L'or est dans ta poche, mais tu as perdu quelque chose d'autre."}}]}];class R1{constructor(){ae(this,"COOLDOWN_DAYS",3)}checkEvents(t,n){const r=this.getEventsForPhase(n);if(r.length===0)return null;const i=r.filter(u=>{var c;if(u.oneTime&&t.triggeredEvents.includes(u.id))return!1;if(!u.oneTime){const f=(c=t.eventCooldowns)==null?void 0:c[u.id];if(f!==void 0&&t.day-f<this.COOLDOWN_DAYS)return!1}return u.triggerCondition(t)});if(i.length===0)return null;const s=i.filter(u=>u.oneTime),o=s.length>0?s:i,a=o[Math.floor(Math.random()*o.length)];return a&&!Nt.find(u=>u.id===a.id)?(console.error("vnement slectionn non trouv dans EVENT_POOL:",a.id),null):a}markEventTriggered(t,n,r){const i=Nt.find(a=>a.id===t);if(!i)return{triggeredEvents:r.triggeredEvents,eventCooldowns:r.eventCooldowns||{}};let s=[...r.triggeredEvents],o={...r.eventCooldowns||{}};return i.oneTime&&!s.includes(t)&&s.push(t),i.oneTime||(o[t]=n),{triggeredEvents:s,eventCooldowns:o}}getEventsForPhase(t){switch(t){case"aube":return Nt.filter(n=>n.id==="convoi"||n.id==="marchand");case"exploration":return Nt.filter(n=>n.id==="refugies");case"crepuscule":return Nt.filter(n=>n.id==="collecteurs"||n.id==="peste");case"taverne":return Nt.filter(n=>n.id==="marchand"||n.id==="collecteurs");default:return[]}}}const zt=new R1;function xt(e){let t=0,n=0,r=0;return Object.values(e).forEach(i=>{if(!i)return;const s=i1(i);let o=1;switch(i.rarity){case"uncommon":o=1.15;break;case"rare":o=1.3;break;case"legendary":o=1.5;break}let a=0,u=0,c=0;i.properties.forEach(f=>{switch(f){case"light":a+=1;break;case"heavy":a-=1,u+=2;break;case"rusty":c-=Math.floor(s.atk*.1);break}}),t+=Math.floor(s.atk*o)+c,n+=Math.floor(s.def*o)+u,r+=Math.floor(s.vit*o)+a,i.cursed&&i.hiddenMalus&&(t+=i.hiddenMalus.atk||0,n+=i.hiddenMalus.def||0,r+=i.hiddenMalus.vit||0)}),t=Math.max(2,t+2),n=Math.max(1,n+1),r=Math.max(3,r+2),{atk:t,def:n,vit:r}}function Gh(e){let t="";e.atk>=15?t="Je me sens assez fort pour les faire.":e.atk>=10?t="Mon arme devrait suffire.":e.atk>=6?t="Je peux tenir, mais a sera serr.":t="Je ne suis pas sr de gagner.";let n="";e.def>=15?n="Bien protg. Ils auront du mal  me toucher.":e.def>=10?n="Mon armure devrait tenir.":e.def>=6?n="Je ne suis pas bien couvert.":n="Presque  dcouvert. Dangereux.";let r="";return e.vit>=8?r="Lger. Je peux esquiver facilement.":e.vit>=6?r="Je bouge normalement.":e.vit>=4?r="Un peu lourd. Je bouge lentement.":r="Trs lourd. Difficile de fuir.",{attack:t,defense:n,speed:r}}const yn=class yn{constructor(){ae(this,"audioContext",null);ae(this,"soundCache",new Map);ae(this,"musicSource",null);ae(this,"musicGain",null);ae(this,"currentMusic",null);ae(this,"settings",{volume:.7,musicEnabled:!0,sfxEnabled:!0,muted:!1});ae(this,"initialized",!1);this.loadSettings()}static getInstance(){return yn.instance||(yn.instance=new yn),yn.instance}async init(){if(!this.initialized)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.initialized=!0}catch(t){console.warn("Audio context initialization failed:",t)}}async loadSound(t){if(this.soundCache.has(t))return this.soundCache.get(t);if(!this.audioContext&&(await this.init(),!this.audioContext))return null;try{const n=await fetch(`/assets/audio/${t}.mp3`);if(!n.ok)return null;const r=await n.arrayBuffer(),i=await this.audioContext.decodeAudioData(r);return this.soundCache.set(t,i),i}catch{return null}}async loadMusic(t){if(!this.audioContext&&(await this.init(),!this.audioContext))return null;try{const n=await fetch(`/assets/audio/${t}.mp3`);if(!n.ok)return null;const r=await n.arrayBuffer();return await this.audioContext.decodeAudioData(r)}catch{return null}}async playSound(t,n=1){if(this.settings.muted||!this.settings.sfxEnabled||!this.audioContext&&(await this.init(),!this.audioContext))return;const r=await this.loadSound(t);if(!(!r||!this.audioContext))try{const i=this.audioContext.createBufferSource(),s=this.audioContext.createGain();i.buffer=r,s.gain.value=n*this.settings.volume,i.connect(s),s.connect(this.audioContext.destination),i.start(0)}catch(i){console.warn(`Failed to play sound ${t}:`,i)}}async playMusic(t,n=0){if(this.settings.muted||!this.settings.musicEnabled||!this.audioContext&&(await this.init(),!this.audioContext))return;this.stopMusic(0);const r=await this.loadMusic(t);if(!(!r||!this.audioContext))try{const i=this.audioContext.createBufferSource(),s=this.audioContext.createGain();i.buffer=r,i.loop=!0,s.gain.value=0,s.gain.linearRampToValueAtTime(this.settings.volume,this.audioContext.currentTime+n/1e3),i.connect(s),s.connect(this.audioContext.destination),i.start(0),this.musicSource=i,this.musicGain=s,this.currentMusic=t}catch(i){console.warn(`Failed to play music ${t}:`,i)}}stopMusic(t=0){if(!this.musicSource||!this.musicGain||!this.audioContext)return;const n=t/1e3;this.musicGain.gain.linearRampToValueAtTime(0,this.audioContext.currentTime+n),setTimeout(()=>{var r;try{(r=this.musicSource)==null||r.stop()}catch{}this.musicSource=null,this.musicGain=null,this.currentMusic=null},t)}async crossfadeMusic(t,n=1e3){this.settings.muted||!this.settings.musicEnabled||(this.stopMusic(n/2),setTimeout(async()=>{await this.playMusic(t,n/2)},n/2))}setVolume(t){this.settings.volume=Math.max(0,Math.min(1,t)),this.saveSettings(),this.musicGain&&this.audioContext&&(this.musicGain.gain.value=this.settings.volume)}mute(){this.settings.muted=!0,this.stopMusic(0),this.saveSettings()}unmute(){this.settings.muted=!1,this.saveSettings()}setMusicEnabled(t){this.settings.musicEnabled=t,this.saveSettings(),t?this.currentMusic&&this.playMusic(this.currentMusic,500):this.stopMusic(0)}setSfxEnabled(t){this.settings.sfxEnabled=t,this.saveSettings()}loadSettings(){try{const t=localStorage.getItem("audioSettings");t&&(this.settings={...this.settings,...JSON.parse(t)})}catch(t){console.warn("Failed to load audio settings:",t)}}saveSettings(){try{localStorage.setItem("audioSettings",JSON.stringify(this.settings))}catch(t){console.warn("Failed to save audio settings:",t)}}getSettings(){return{...this.settings}}};ae(yn,"instance",null);let xl=yn;const F=xl.getInstance(),St=[{id:"deserteur",name:"Dserteur",description:"Tu as fui la guerre. Tu connais la survie, mais tu as des dettes.",unlockCondition:()=>!0,requiredLevel:1,bonuses:{},maluses:{}},{id:"veteran",name:"Vtran",description:"Tu as survcu  une guerre. Tu connais le combat, mais tu as perdu ta fortune.",unlockCondition:e=>e.globalCounters.victories>=1,requiredLevel:2,bonuses:{stats:{def:2}},maluses:{gold:-10}},{id:"pillard",name:"Pillard",description:"Tu as pill et vol. Tu es rapide, mais ta rputation te prcde.",unlockCondition:e=>e.globalCounters.totalLoots>=50,requiredLevel:5,bonuses:{stats:{vit:1}},maluses:{reputation:2}},{id:"moine",name:"Ancien Moine",description:"Tu as quitt le monastre. Tu connais les bndictions, mais le cynisme te ronge.",unlockCondition:e=>e.globalCounters.totalMonasteries>=5,requiredLevel:8,bonuses:{},maluses:{}},{id:"noble",name:"Noble Dchu",description:"Tu as perdu ta fortune. Tu as de l'or de dpart, mais une dette plus lourde.",unlockCondition:()=>!1,requiredLevel:12,bonuses:{gold:20},maluses:{debt:20}},{id:"survivant",name:"Survivant",description:"Tu as fui de nombreux combats. Tu sais survivre, mais tu es moins combatif.",unlockCondition:e=>e.globalCounters.totalFlees>=3,requiredLevel:15,bonuses:{},maluses:{stats:{atk:-1}}}];function Mr(e,t){return t.origins.includes(e)}function P1(e){return St.find(t=>t.id===e)}const Sl={weapon:{id:"sword_chipped",name:"pe brche",slot:"weapon",rarity:"common",stats:{atk:8,def:0,vit:0},durability:100,maxDurability:100,properties:[],value:10,description:"Ton pe de dpart. Elle a vu des combats."},torso:{id:"leather_armor",name:"Armure de Cuir",slot:"torso",rarity:"common",stats:{atk:0,def:6,vit:0},durability:100,maxDurability:100,properties:[],value:8,description:"Une armure use mais solide."},legs:{id:"boots_worn",name:"Bottes Uses",slot:"legs",rarity:"common",stats:{atk:0,def:2,vit:3},durability:100,maxDurability:100,properties:["light"],value:10,description:"Uses mais confortables. Tu bouges mieux."}},oa={day:1,phase:"start",debt:80,gold:0,reputation:3,marketStock:[],marketStockDay:0,equipment:Sl,inventory:[],playerStats:xt(Sl),actionsRemaining:3,dailyLocations:[],currentEvent:"none",eventResult:null,combatResult:null,lootedItem:null,currentEnemy:null,explorationResult:null,combatsWon:0,combatsFled:0,combatsLost:0,legendaryItemsFound:0,forgeStock:null,forgeStockDay:0,npcFlags:{},rumors:[],hasEatenToday:!1,persistentLocations:[],narrativeCounters:{},triggeredEvents:[],eventCooldowns:{},recentMonologues:[],selectedOrigin:"deserteur",characterArcs:{}},M=Bh((e,t)=>({...oa,setPhase:n=>{console.log(" setPhase appel avec:",n);const r=t();if(n==="taverne"){const s=zt.checkEvents(r,"taverne");if(s){const{triggeredEvents:o,eventCooldowns:a}=zt.markEventTriggered(s.id,r.day,r);e({phase:"narrative",currentEvent:"choice",eventResult:{type:"narrative",eventId:s.id},triggeredEvents:o,eventCooldowns:a}),re(t());return}}e({phase:n}),console.log(" Phase mise  jour dans le store:",t().phase),re(t()).catch(s=>{console.error("Erreur sauvegarde aprs setPhase:",s)}),["narrative","defeat","victory"].includes(n)&&rt(t()).catch(()=>{})},startNewGame:n=>{const r=P1(n);let i={...Sl},o={...oa,phase:"aube",selectedOrigin:n,equipment:i,inventory:[],playerStats:xt(i)};if(r&&(r.bonuses.gold&&(o.gold+=r.bonuses.gold),r.maluses.gold&&(o.gold=Math.max(0,o.gold+r.maluses.gold)),r.maluses.debt&&(o.debt+=r.maluses.debt),r.bonuses.reputation&&(o.reputation=Math.min(5,Math.max(1,o.reputation+r.bonuses.reputation))),r.maluses.reputation&&(o.reputation=Math.min(5,Math.max(1,o.reputation-r.maluses.reputation))),r.bonuses.stats||r.maluses.stats)){const u={...o.equipment};Object.entries(u).forEach(([c,f])=>{if(f){const d={...f.stats};r.bonuses.stats&&(d.atk=(d.atk||0)+(r.bonuses.stats.atk||0),d.def=(d.def||0)+(r.bonuses.stats.def||0),d.vit=(d.vit||0)+(r.bonuses.stats.vit||0)),r.maluses.stats&&(d.atk=Math.max(0,(d.atk||0)+(r.maluses.stats.atk||0)),d.def=Math.max(0,(d.def||0)+(r.maluses.stats.def||0)),d.vit=Math.max(0,(d.vit||0)+(r.maluses.stats.vit||0))),u[c]={...f,stats:d}}}),o.equipment=u,o.playerStats=xt(u)}o.characterArcs={morten:Nd("morten",o.day)};const a=o.characterArcs.morten;a.storyStage=sa(ia,o.day,o.debt,a.trustLevel,a.flags),e(o),re(o)},startDay:()=>{const n=t();if(n.gold===0&&n.actionsRemaining===0&&!n.hasEatenToday&&n.day>1){e({hasEatenToday:!1,actionsRemaining:1}),console.log(" Mcanisme de secours activ : 1 action gratuite (mendicit)");return}!n.hasEatenToday&&n.day>1?e({hasEatenToday:!1,actionsRemaining:Math.max(1,n.actionsRemaining-2)}):e({hasEatenToday:!1});const r=zt.checkEvents(n,"aube");if(r){const{triggeredEvents:i,eventCooldowns:s}=zt.markEventTriggered(r.id,n.day,n);e({phase:"narrative",currentEvent:"choice",eventResult:{type:"narrative",eventId:r.id},triggeredEvents:i,eventCooldowns:s}),re(t());return}e({phase:"aube"}),rt(t()).catch(()=>{})},goToExploration:()=>{const n=t();let r;const i=n.persistentLocations.map(a=>_d(a,n.day)),s=i.filter(a=>!a.explored);if(s.length>=5)r=[...s.slice(0,5)],e({persistentLocations:i});else{const a=Uh(n.day,void 0,n.persistentLocations);[...i,...a];const u=i.filter(c=>!c.explored);u.length>=5?r=u.slice(0,5):r=[...u,...a.slice(0,5-u.length)],e({persistentLocations:i})}if(n.npcFlags.carteRevelee&&!r.some(a=>a.type==="cache_tresor")){const a=Hs.cache_tresor,u={id:`cache_tresor_${n.day}_${Date.now()}`,type:"cache_tresor",name:a.name,description:a.description,risk:4,richness:5,explored:!1,explorationCount:0,firstSeenDay:n.day},c=Math.floor(Math.random()*r.length);r[c]=u}const o=Vd(n.day,n.rumors,r.map(a=>({id:a.id,type:a.type})));e({phase:"exploration",actionsRemaining:3,dailyLocations:r,rumors:[...n.rumors.filter(a=>a.day>=n.day-3),...o]})},exploreLocation:n=>{const r=t();if(r.actionsRemaining<=0||r.phase!=="exploration")return;const i=zt.checkEvents(r,"exploration");if(i){const{triggeredEvents:d,eventCooldowns:m}=zt.markEventTriggered(i.id,r.day,r);e({phase:"narrative",currentEvent:"choice",eventResult:{type:"narrative",eventId:i.id},triggeredEvents:d,eventCooldowns:m}),re(t());return}const s=r.rumors.filter(d=>d.day>=r.day-2&&(d.targetLocationId===n.id||!d.targetLocationId)),o=v1(n,r.playerStats,r.equipment,s),a=_d(n,r.day),u={...a,explored:!0,explorationCount:(a.explorationCount||0)+1},c=r.dailyLocations.map(d=>d.id===n.id?u:d),f=r.persistentLocations.map(d=>d.id===n.id?u:d);if(e({dailyLocations:c,persistentLocations:f}),o.event==="combat"){const d=o.combatResult,m=Fh(n.risk);if(d.outcome==="defeat"){e({actionsRemaining:r.actionsRemaining-1,currentEvent:"combat",eventResult:{type:"combat",enemy:m.name,enemyDescription:m.description,outcome:d.outcome},combatResult:d,currentEnemy:m,explorationResult:o});return}if(d.gold){const p=Object.values(r.equipment).filter(Boolean).some(v=>v.cursed&&v.id==="armor_compromised")?Math.floor(d.gold*.9):d.gold;e({gold:r.gold+p})}if(d.durabilityLoss.length>0){const S={...r.equipment};d.durabilityLoss.forEach(p=>{let v,w;if(Object.entries(S).forEach(([T,j])=>{(j==null?void 0:j.id)===p.itemId&&(v=j,w=T)}),v&&w){const T=Ad(v,p.amount);s1(T)?delete S[w]:S[w]=T}});const h=xt(S);e({equipment:S,playerStats:h})}if(d.lootEarned&&Math.random()<.3){const S=wt(n.risk);o.item=S}let y=r.combatsWon,g=r.combatsFled;d.outcome==="flee"?g=r.combatsFled+1:(d.outcome==="victory"||d.outcome==="crushing"||d.outcome==="costly")&&(y=r.combatsWon+1);let x=r.legendaryItemsFound;o.item&&o.item.rarity==="legendary"&&(x=r.legendaryItemsFound+1),e({actionsRemaining:r.actionsRemaining-1,currentEvent:"combat",eventResult:{type:"combat",enemy:m.name,enemyDescription:m.description,outcome:d.outcome},combatResult:d,currentEnemy:m,explorationResult:o,lootedItem:o.item||null,combatsWon:y,combatsFled:g,legendaryItemsFound:x})}else if(o.event==="loot"){e({actionsRemaining:r.actionsRemaining-1,currentEvent:"loot",eventResult:{type:"loot",item:o.item,gold:o.gold,message:o.specialMessage?`${o.specialMessage} ${o.item?`Tu trouves ${o.item.name}.`:`Tu trouves ${o.gold} pices d'or.`}`:o.item?`Tu trouves ${o.item.name}.`:`Tu trouves ${o.gold} pices d'or.`},lootedItem:o.item||null,explorationResult:o});const m=Object.values(r.equipment).filter(Boolean).some(x=>x.cursed&&x.id==="armor_cursed");let y=r.gold;if(o.gold){const x=m?Math.floor(o.gold*.9):o.gold;y=r.gold+x}let g=r.legendaryItemsFound;o.item&&o.item.rarity==="legendary"&&(g=r.legendaryItemsFound+1),e({gold:y,legendaryItemsFound:g})}else o.event==="empty"?e({actionsRemaining:r.actionsRemaining-1,currentEvent:"empty",eventResult:{type:"empty",message:o.atmosphereText},explorationResult:o}):o.event==="choice"&&e({actionsRemaining:r.actionsRemaining-1,currentEvent:"choice",eventResult:{type:"choice",choiceId:o.choiceId,choiceText:o.choiceText,choices:o.choices},explorationResult:o})},finishEvent:()=>{var i;const n=t();if(((i=n.combatResult)==null?void 0:i.outcome)==="defeat"){e({phase:"defeat",combatsLost:n.combatsLost+1}),re(t());return}const r=n.phase==="narrative"?"aube":n.phase;e({phase:r,currentEvent:"none",eventResult:null,combatResult:null}),rt(t()).catch(()=>{})},endDay:()=>{const n=t(),r=new x1,i=zt.checkEvents(n,"crepuscule");if(i){const{triggeredEvents:y,eventCooldowns:g}=zt.markEventTriggered(i.id,n.day,n);e({phase:"narrative",currentEvent:"choice",eventResult:{type:"narrative",eventId:i.id},triggeredEvents:y,eventCooldowns:g}),re(t());return}const s=2;let o=n.gold,a=n.debt;n.gold>=s?o=n.gold-s:a=n.debt+s;const{day:u,debt:c,actionsRemaining:f}=r.advanceDay(n.day,a),d=r.checkEndConditions({day:u,debt:c,gold:n.gold,phase:n.phase});if(d==="victory"){e({phase:"victory"}),re(t());return}else if(d==="defeat"){e({phase:"defeat"}),re(t());return}let m={...n.narrativeCounters};if(u===20){const y=m.humanite||0,g=m.cynisme||0,x=m.pragmatisme||0;y>=9&&y<10?m.humanite=10:g>=9&&g<10?m.cynisme=10:x>=9&&x<10&&(m.pragmatisme=10)}e({day:u,debt:c,gold:o,actionsRemaining:f,phase:"aube",narrativeCounters:m}),re(t())},handleDefeat:()=>{e({phase:"defeat"})},resetGame:()=>{e({...oa,phase:"start"})},addItemToInventory:n=>{const r=t();return r.inventory.length>=10?!1:(e({inventory:[...r.inventory,n]}),!0)},equipItem:n=>{const r=t(),i={...r.equipment};if(Object.values(i).some(c=>(c==null?void 0:c.id)===n.id))return;let o=null;if(i[n.slot]&&(o=i[n.slot]),o&&r.inventory.length>=10){console.warn("Inventaire plein, impossible d'quiper sans perdre l'ancien item");return}i[n.slot]=n;let a=r.inventory.filter(c=>c.id!==n.id);o&&(a=[...a,o]);const u=xt(i);e({equipment:i,inventory:a,playerStats:u}),re(t())},unequipItem:n=>{const r=t();if(!r.equipment[n])return;const i=r.equipment[n];if(r.inventory.length>=10)return;const s={...r.equipment};delete s[n];const o=xt(s);e({equipment:s,inventory:[...r.inventory,i],playerStats:o})},openInventory:()=>{e({phase:"inventory"})},closeInventory:()=>{t().currentEvent==="none"?e({phase:"aube"}):e({phase:"exploration"})},sellItem:n=>{const r=t();if(r.inventory.findIndex(a=>a.id===n.id)===-1){console.warn("Item non trouv dans l'inventaire");return}const s=vl(n,r.reputation,r.narrativeCounters),o=r.inventory.filter(a=>a.id!==n.id);e({inventory:o,gold:r.gold+s}),rt(t()).catch(()=>{})},buyItem:n=>{const r=t(),i=pn(n,r.reputation,r.narrativeCounters);if(r.gold<i)return console.warn("Or insuffisant"),!1;if(r.inventory.length>=10)return console.warn("Inventaire plein"),!1;const s=r.marketStock.filter(o=>o.id!==n.id);return e({gold:r.gold-i,marketStock:s,inventory:[...r.inventory,n]}),F.playSound("coins_loss",.7).catch(()=>{}),rt(t()).catch(()=>{}),!0},repayDebt:n=>{const r=t();if(r.gold<n)return console.warn("Or insuffisant"),!1;const i=Math.min(n,r.debt),s={...r.characterArcs};if(s.morten){const o=Bd(s.morten.trustLevel,"repay",i);s.morten.trustLevel=o,s.morten.lastInteractionDay=r.day,s.morten.storyStage=sa(ia,r.day,r.debt-i,o,s.morten.flags)}return e({gold:r.gold-i,debt:r.debt-i,characterArcs:s}),F.playSound("coins_loss",.7).catch(()=>{}),rt(t()).catch(()=>{}),!0},buyMeal:()=>{const n=t(),r=4;return n.gold<r?(console.warn("Or insuffisant pour le repas"),!1):n.hasEatenToday?(console.warn("Dj mang aujourd'hui"),!1):(e(i=>({gold:i.gold-r,hasEatenToday:!0,narrativeCounters:{...i.narrativeCounters,humanite:(i.narrativeCounters.humanite||0)+1}})),re(t()),!0)},generateMarketStock:()=>{const n=t();if(n.marketStockDay===n.day&&n.marketStock.length>0)return;const r=Math.floor(Math.random()*3)+3,i=[];for(let s=0;s<r;s++){const o=Math.min(4,Math.floor(n.day/5)+1),a=wt(o);i.push(a)}e({marketStock:i,marketStockDay:n.day})},repairItem:n=>{const r=t(),i=hn(n,r.narrativeCounters);if(r.gold<i)return console.warn("Or insuffisant pour rparer"),!1;if(n.durability>=n.maxDurability)return console.warn("Item dj  100%"),!1;const s=k1(n);let o={...r.equipment},a=[...r.inventory],u=!1;if(Object.entries(o).forEach(([f,d])=>{(d==null?void 0:d.id)===n.id&&(o[f]=s,u=!0)}),!u){const f=a.findIndex(d=>d.id===n.id);f>-1&&(a[f]=s,u=!0)}if(!u)return console.warn("Item non trouv"),!1;let c=r.playerStats;return Object.values(o).some(f=>(f==null?void 0:f.id)===n.id)&&(c=xt(o)),e({gold:r.gold-i,equipment:o,inventory:a,playerStats:c}),re(t()),!0},buyForgeItem:n=>{const r=t(),i=n.value*2;return r.gold<i?(console.warn("Or insuffisant"),!1):r.inventory.length>=10?(console.warn("Inventaire plein"),!1):(e({gold:r.gold-i,forgeStock:null,inventory:[...r.inventory,n]}),re(t()),!0)},generateForgeStock:()=>{const n=t();if(!(n.forgeStockDay===n.day&&n.forgeStock!==null))if(Math.random()<.2){const r=Math.min(4,Math.floor(n.day/3)+2),i=wt(r);if(i.rarity!=="rare"&&i.rarity!=="legendary")for(let s=0;s<5;s++){const o=wt(r);if(o.rarity==="rare"||o.rarity==="legendary"){e({forgeStock:o,forgeStockDay:n.day});return}}else e({forgeStock:i,forgeStockDay:n.day})}else e({forgeStock:null,forgeStockDay:n.day})},setNPCFlag:(n,r)=>{e(i=>({npcFlags:{...i.npcFlags,[n]:r}})),re(t())},generateRumors:()=>{const n=t(),r=n.dailyLocations.length>0?n.dailyLocations:n.persistentLocations.filter(u=>!u.explored),i=Vd(n.day,n.rumors,r.map(u=>({id:u.id,type:u.type}))),s=n.rumors.filter(u=>u.day>=n.day-3),o=new Set(s.map(u=>u.id)),a=i.filter(u=>!o.has(u.id));e({rumors:[...s,...a]})},triggerNarrativeEvent:n=>{e({phase:"narrative",currentEvent:"choice",eventResult:{type:"narrative",eventId:n}}),re(t())},applyEventConsequence:n=>{let i={...t()};if(n.gold){const a=Object.values(i.equipment).filter(Boolean).some(u=>u.cursed&&u.id==="armor_cursed")&&n.gold>0?Math.floor(n.gold*.9):n.gold;i.gold=Math.max(0,i.gold+a)}if(n.reputation){const o=Object.values(i.equipment).filter(Boolean).some(f=>f.cursed&&f.id==="amulet_compromised");let a=n.reputation;o&&a>0&&(a=Math.max(0,a-1));const u=i.narrativeCounters.humanite||0,c=i.narrativeCounters.cynisme||0;u>=15&&a>=0&&(a+=1),c>=15&&a>0&&(a=Math.max(0,a-1)),i.reputation=Math.max(1,Math.min(5,i.reputation+a))}if(n.debt&&(i.debt=Math.max(0,i.debt+n.debt)),n.actionsRemaining&&(i.actionsRemaining=Math.max(0,i.actionsRemaining+n.actionsRemaining)),n.items&&n.items.forEach(s=>{let o;if(s==="cursed_item"){const a=Dd[Math.floor(Math.random()*Dd.length)];o={...a,id:`${a.id}_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,durability:a.maxDurability}}else o=wt(4);i.inventory.length<10&&i.inventory.push(o)}),n.durabilityLoss){const s=Object.values(i.equipment).filter(Boolean);if(s.length>0){const o=s[Math.floor(Math.random()*s.length)],a=Ad(o,n.durabilityLoss);Object.entries(i.equipment).forEach(([u,c])=>{(c==null?void 0:c.id)===o.id&&(i.equipment[u]=a)}),i.playerStats=xt(i.equipment)}}n.flags&&(i.npcFlags={...i.npcFlags,...n.flags}),n.counters&&Object.entries(n.counters).forEach(([s,o])=>{i.narrativeCounters[s]=(i.narrativeCounters[s]||0)+o}),e(i),rt(t()).catch(()=>{})},incrementCounter:(n,r)=>{const s=t().narrativeCounters[n]||0,o=s+r;if(e(a=>({narrativeCounters:{...a.narrativeCounters,[n]:o}})),s<8&&o>=8||s<12&&o>=12){const a=o>=12?12:8;if(console.log(` ${n==="humanite"?"Humanit":n==="cynisme"?"Cynisme":n==="pragmatisme"?"Pragmatisme":n} atteint ${a}! Bonus activ.`),a===8)n==="humanite"?console.log(" Bonus : +10% prix de vente au march"):n==="cynisme"?console.log(" Bonus : -15% prix d'achat au march"):n==="pragmatisme"&&console.log(" Bonus : -15% cot de rparation  la forge");else if(a===12){const c=n==="humanite"?"La Rdemption":n==="cynisme"?"La Survie":n==="pragmatisme"?"L'Efficacit":"";c&&console.log(` Fin disponible : ${c}`)}}re(t())},initCharacterArc:n=>{const r=t();if(r.characterArcs[n])return;const i=Nd(n,r.day);e({characterArcs:{...r.characterArcs,[n]:i}}),re(t())},updateCharacterArc:(n,r)=>{const i=t(),s=i.characterArcs[n];if(!s){console.warn(`Arc narratif non trouv pour ${n}`);return}const o={...s,...r};e({characterArcs:{...i.characterArcs,[n]:o}}),re(t())},getCharacterArc:n=>t().characterArcs[n]||null,updateCharacterTrust:(n,r,i)=>{const s=t(),o=s.characterArcs[n];if(!o){console.warn(`Arc narratif non trouv pour ${n}`);return}const a=Bd(o.trustLevel,r,i),u={...o,trustLevel:a,lastInteractionDay:s.day};n==="morten"&&(u.storyStage=sa(ia,s.day,s.debt,a,u.flags)),e({characterArcs:{...s.characterArcs,[n]:u}}),re(t())}})),Nu=b.createContext({});function To(e){const t=b.useRef(null);return t.current===null&&(t.current=e()),t.current}const Kh=typeof window<"u",Xh=Kh?b.useLayoutEffect:b.useEffect,Co=b.createContext(null);function Fu(e,t){e.indexOf(t)===-1&&e.push(t)}function qu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const gt=(e,t,n)=>n>t?t:n<e?e:n;let Uu=()=>{};const It={},Yh=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Qh(e){return typeof e=="object"&&e!==null}const Jh=e=>/^0[^.\s]+$/u.test(e);function Wu(e){let t;return()=>(t===void 0&&(t=e()),t)}const Xe=e=>e,I1=(e,t)=>n=>t(e(n)),Mi=(...e)=>e.reduce(I1),yi=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class $u{constructor(){this.subscriptions=[]}add(t){return Fu(this.subscriptions,t),()=>qu(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const jt=e=>e*1e3,Ge=e=>e/1e3;function Zh(e,t){return t?e*(1e3/t):0}const eg=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,L1=1e-7,D1=12;function A1(e,t,n,r,i){let s,o,a=0;do o=t+(n-t)/2,s=eg(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>L1&&++a<D1);return o}function Ri(e,t,n,r){if(e===t&&n===r)return Xe;const i=s=>A1(s,0,1,e,n);return s=>s===0||s===1?s:eg(i(s),t,r)}const tg=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ng=e=>t=>1-e(1-t),rg=Ri(.33,1.53,.69,.99),Hu=ng(rg),ig=tg(Hu),sg=e=>(e*=2)<1?.5*Hu(e):.5*(2-Math.pow(2,-10*(e-1))),Gu=e=>1-Math.sin(Math.acos(e)),og=ng(Gu),ag=tg(Gu),_1=Ri(.42,0,1,1),z1=Ri(0,0,.58,1),lg=Ri(.42,0,.58,1),O1=e=>Array.isArray(e)&&typeof e[0]!="number",ug=e=>Array.isArray(e)&&typeof e[0]=="number",V1={linear:Xe,easeIn:_1,easeInOut:lg,easeOut:z1,circIn:Gu,circInOut:ag,circOut:og,backIn:Hu,backInOut:ig,backOut:rg,anticipate:sg},B1=e=>typeof e=="string",Fd=e=>{if(ug(e)){Uu(e.length===4);const[t,n,r,i]=e;return Ri(t,n,r,i)}else if(B1(e))return V1[e];return e},Ji=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function N1(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(c.schedule(f),e()),f(a)}const c={schedule:(f,d=!1,m=!1)=>{const g=m&&i?n:r;return d&&o.add(f),g.has(f)||g.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(a=f,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,c.process(f))}};return c}const F1=40;function cg(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Ji.reduce((v,w)=>(v[w]=N1(s),v),{}),{setup:a,read:u,resolveKeyframes:c,preUpdate:f,update:d,preRender:m,render:y,postRender:g}=o,x=()=>{const v=It.useManualTiming?i.timestamp:performance.now();n=!1,It.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,F1),1)),i.timestamp=v,i.isProcessing=!0,a.process(i),u.process(i),c.process(i),f.process(i),d.process(i),m.process(i),y.process(i),g.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(x))},S=()=>{n=!0,r=!0,i.isProcessing||e(x)};return{schedule:Ji.reduce((v,w)=>{const T=o[w];return v[w]=(j,C=!1,k=!1)=>(n||S(),T.schedule(j,C,k)),v},{}),cancel:v=>{for(let w=0;w<Ji.length;w++)o[Ji[w]].cancel(v)},state:i,steps:o}}const{schedule:H,cancel:nn,state:he,steps:aa}=cg(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xe,!0);let ys;function q1(){ys=void 0}const Ce={now:()=>(ys===void 0&&Ce.set(he.isProcessing||It.useManualTiming?he.timestamp:performance.now()),ys),set:e=>{ys=e,queueMicrotask(q1)}},dg=e=>t=>typeof t=="string"&&t.startsWith(e),fg=dg("--"),U1=dg("var(--"),Ku=e=>U1(e)?W1.test(e.split("/*")[0].trim()):!1,W1=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function qd(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const yr={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},vi={...yr,transform:e=>gt(0,1,e)},Zi={...yr,default:1},Kr=e=>Math.round(e*1e5)/1e5,Xu=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $1(e){return e==null}const H1=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Yu=(e,t)=>n=>!!(typeof n=="string"&&H1.test(n)&&n.startsWith(e)||t&&!$1(n)&&Object.prototype.hasOwnProperty.call(n,t)),mg=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Xu);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},G1=e=>gt(0,255,e),la={...yr,transform:e=>Math.round(G1(e))},wn={test:Yu("rgb","red"),parse:mg("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+la.transform(e)+", "+la.transform(t)+", "+la.transform(n)+", "+Kr(vi.transform(r))+")"};function K1(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const bl={test:Yu("#"),parse:K1,transform:wn.transform},Pi=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ot=Pi("deg"),pt=Pi("%"),L=Pi("px"),X1=Pi("vh"),Y1=Pi("vw"),Ud={...pt,parse:e=>pt.parse(e)/100,transform:e=>pt.transform(e*100)},Kn={test:Yu("hsl","hue"),parse:mg("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+pt.transform(Kr(t))+", "+pt.transform(Kr(n))+", "+Kr(vi.transform(r))+")"},se={test:e=>wn.test(e)||bl.test(e)||Kn.test(e),parse:e=>wn.test(e)?wn.parse(e):Kn.test(e)?Kn.parse(e):bl.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?wn.transform(e):Kn.transform(e),getAnimatableNone:e=>{const t=se.parse(e);return t.alpha=0,se.transform(t)}},Q1=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function J1(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Xu))==null?void 0:t.length)||0)+(((n=e.match(Q1))==null?void 0:n.length)||0)>0}const pg="number",hg="color",Z1="var",eS="var(",Wd="${}",tS=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xi(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=t.replace(tS,u=>(se.test(u)?(r.color.push(s),i.push(hg),n.push(se.parse(u))):u.startsWith(eS)?(r.var.push(s),i.push(Z1),n.push(u)):(r.number.push(s),i.push(pg),n.push(parseFloat(u))),++s,Wd)).split(Wd);return{values:n,split:a,indexes:r,types:i}}function gg(e){return xi(e).values}function yg(e){const{split:t,types:n}=xi(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const a=n[o];a===pg?s+=Kr(i[o]):a===hg?s+=se.transform(i[o]):s+=i[o]}return s}}const nS=e=>typeof e=="number"?0:se.test(e)?se.getAnimatableNone(e):e;function rS(e){const t=gg(e);return yg(e)(t.map(nS))}const rn={test:J1,parse:gg,createTransformer:yg,getAnimatableNone:rS};function ua(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function iS({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,u=2*n-a;i=ua(u,a,e+1/3),s=ua(u,a,e),o=ua(u,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Gs(e,t){return n=>n>0?t:e}const Q=(e,t,n)=>e+(t-e)*n,ca=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},sS=[bl,wn,Kn],oS=e=>sS.find(t=>t.test(e));function $d(e){const t=oS(e);if(!t)return!1;let n=t.parse(e);return t===Kn&&(n=iS(n)),n}const Hd=(e,t)=>{const n=$d(e),r=$d(t);if(!n||!r)return Gs(e,t);const i={...n};return s=>(i.red=ca(n.red,r.red,s),i.green=ca(n.green,r.green,s),i.blue=ca(n.blue,r.blue,s),i.alpha=Q(n.alpha,r.alpha,s),wn.transform(i))},wl=new Set(["none","hidden"]);function aS(e,t){return wl.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function lS(e,t){return n=>Q(e,t,n)}function Qu(e){return typeof e=="number"?lS:typeof e=="string"?Ku(e)?Gs:se.test(e)?Hd:dS:Array.isArray(e)?vg:typeof e=="object"?se.test(e)?Hd:uS:Gs}function vg(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>Qu(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function uS(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Qu(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function cS(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],a=e.values[o]??0;n[i]=a,r[s]++}return n}const dS=(e,t)=>{const n=rn.createTransformer(t),r=xi(e),i=xi(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?wl.has(e)&&!i.values.length||wl.has(t)&&!r.values.length?aS(e,t):Mi(vg(cS(r,i),i.values),n):Gs(e,t)};function xg(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Q(e,t,n):Qu(e)(e,t)}const fS=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>H.update(t,n),stop:()=>nn(t),now:()=>he.isProcessing?he.timestamp:Ce.now()}},Sg=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ks=2e4;function Ju(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Ks;)t+=n,r=e.next(t);return t>=Ks?1/0:t}function mS(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(Ju(r),Ks);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:Ge(i)}}const pS=5;function bg(e,t,n){const r=Math.max(t-pS,0);return Zh(n-e(r),t-r)}const ee={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},da=.001;function hS({duration:e=ee.duration,bounce:t=ee.bounce,velocity:n=ee.velocity,mass:r=ee.mass}){let i,s,o=1-t;o=gt(ee.minDamping,ee.maxDamping,o),e=gt(ee.minDuration,ee.maxDuration,Ge(e)),o<1?(i=c=>{const f=c*o,d=f*e,m=f-n,y=Tl(c,o),g=Math.exp(-d);return da-m/y*g},s=c=>{const d=c*o*e,m=d*n+n,y=Math.pow(o,2)*Math.pow(c,2)*e,g=Math.exp(-d),x=Tl(Math.pow(c,2),o);return(-i(c)+da>0?-1:1)*((m-y)*g)/x}):(i=c=>{const f=Math.exp(-c*e),d=(c-n)*e+1;return-da+f*d},s=c=>{const f=Math.exp(-c*e),d=(n-c)*(e*e);return f*d});const a=5/e,u=yS(i,s,a);if(e=jt(e),isNaN(u))return{stiffness:ee.stiffness,damping:ee.damping,duration:e};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:e}}}const gS=12;function yS(e,t,n){let r=n;for(let i=1;i<gS;i++)r=r-e(r)/t(r);return r}function Tl(e,t){return e*Math.sqrt(1-t*t)}const vS=["duration","bounce"],xS=["stiffness","damping","mass"];function Gd(e,t){return t.some(n=>e[n]!==void 0)}function SS(e){let t={velocity:ee.velocity,stiffness:ee.stiffness,damping:ee.damping,mass:ee.mass,isResolvedFromDuration:!1,...e};if(!Gd(e,xS)&&Gd(e,vS))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*gt(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:ee.mass,stiffness:i,damping:s}}else{const n=hS(e);t={...t,...n,mass:ee.mass},t.isResolvedFromDuration=!0}return t}function Xs(e=ee.visualDuration,t=ee.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:u,damping:c,mass:f,duration:d,velocity:m,isResolvedFromDuration:y}=SS({...n,velocity:-Ge(n.velocity||0)}),g=m||0,x=c/(2*Math.sqrt(u*f)),S=o-s,h=Ge(Math.sqrt(u/f)),p=Math.abs(S)<5;r||(r=p?ee.restSpeed.granular:ee.restSpeed.default),i||(i=p?ee.restDelta.granular:ee.restDelta.default);let v;if(x<1){const T=Tl(h,x);v=j=>{const C=Math.exp(-x*h*j);return o-C*((g+x*h*S)/T*Math.sin(T*j)+S*Math.cos(T*j))}}else if(x===1)v=T=>o-Math.exp(-h*T)*(S+(g+h*S)*T);else{const T=h*Math.sqrt(x*x-1);v=j=>{const C=Math.exp(-x*h*j),k=Math.min(T*j,300);return o-C*((g+x*h*S)*Math.sinh(k)+T*S*Math.cosh(k))/T}}const w={calculatedDuration:y&&d||null,next:T=>{const j=v(T);if(y)a.done=T>=d;else{let C=T===0?g:0;x<1&&(C=T===0?jt(g):bg(v,T,j));const k=Math.abs(C)<=r,I=Math.abs(o-j)<=i;a.done=k&&I}return a.value=a.done?o:j,a},toString:()=>{const T=Math.min(Ju(w),Ks),j=Sg(C=>w.next(T*C).value,T,30);return T+"ms "+j},toTransition:()=>{}};return w}Xs.applyToOptions=e=>{const t=mS(e,100,Xs);return e.ease=t.ease,e.duration=jt(t.duration),e.type="keyframes",e};function Cl({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:u,restDelta:c=.5,restSpeed:f}){const d=e[0],m={done:!1,value:d},y=k=>a!==void 0&&k<a||u!==void 0&&k>u,g=k=>a===void 0?u:u===void 0||Math.abs(a-k)<Math.abs(u-k)?a:u;let x=n*t;const S=d+x,h=o===void 0?S:o(S);h!==S&&(x=h-d);const p=k=>-x*Math.exp(-k/r),v=k=>h+p(k),w=k=>{const I=p(k),A=v(k);m.done=Math.abs(I)<=c,m.value=m.done?h:A};let T,j;const C=k=>{y(m.value)&&(T=k,j=Xs({keyframes:[m.value,g(m.value)],velocity:bg(v,k,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:f}))};return C(0),{calculatedDuration:null,next:k=>{let I=!1;return!j&&T===void 0&&(I=!0,w(k),C(k)),T!==void 0&&k>=T?j.next(k-T):(!I&&w(k),m)}}}function bS(e,t,n){const r=[],i=n||It.mix||xg,s=e.length-1;for(let o=0;o<s;o++){let a=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||Xe:t;a=Mi(u,a)}r.push(a)}return r}function wS(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(Uu(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=bS(t,r,i),u=a.length,c=f=>{if(o&&f<e[0])return t[0];let d=0;if(u>1)for(;d<e.length-2&&!(f<e[d+1]);d++);const m=yi(e[d],e[d+1],f);return a[d](m)};return n?f=>c(gt(e[0],e[s-1],f)):c}function TS(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=yi(0,t,r);e.push(Q(n,1,i))}}function CS(e){const t=[0];return TS(t,e.length-1),t}function kS(e,t){return e.map(n=>n*t)}function jS(e,t){return e.map(()=>t||lg).splice(0,e.length-1)}function Xr({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=O1(r)?r.map(Fd):Fd(r),s={done:!1,value:t[0]},o=kS(n&&n.length===t.length?n:CS(t),e),a=wS(o,t,{ease:Array.isArray(i)?i:jS(t,i)});return{calculatedDuration:e,next:u=>(s.value=a(u),s.done=u>=e,s)}}const ES=e=>e!==null;function Zu(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(ES),a=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const MS={decay:Cl,inertia:Cl,tween:Xr,keyframes:Xr,spring:Xs};function wg(e){typeof e.type=="string"&&(e.type=MS[e.type])}class ec{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const RS=e=>e/100;class tc extends ec{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Ce.now()&&this.tick(Ce.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;wg(t);const{type:n=Xr,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:a}=t;const u=n||Xr;u!==Xr&&typeof a[0]!="number"&&(this.mixKeyframes=Mi(RS,xg(a[0],a[1])),a=[0,100]);const c=u({...t,keyframes:a});s==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Ju(c));const{calculatedDuration:f}=c;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:f,repeat:d,repeatType:m,repeatDelay:y,type:g,onUpdate:x,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const h=this.currentTime-c*(this.playbackSpeed>=0?1:-1),p=this.playbackSpeed>=0?h<0:h>i;this.currentTime=Math.max(h,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let v=this.currentTime,w=r;if(d){const k=Math.min(this.currentTime,i)/a;let I=Math.floor(k),A=k%1;!A&&k>=1&&(A=1),A===1&&I--,I=Math.min(I,d+1),!!(I%2)&&(m==="reverse"?(A=1-A,y&&(A-=y/a)):m==="mirror"&&(w=o)),v=gt(0,1,A)*a}const T=p?{done:!1,value:f[0]}:w.next(v);s&&(T.value=s(T.value));let{done:j}=T;!p&&u!==null&&(j=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return C&&g!==Cl&&(T.value=Zu(f,this.options,S,this.speed)),x&&x(T.value),C&&this.finish(),T}then(t,n){return this.finished.then(t,n)}get duration(){return Ge(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ge(t)}get time(){return Ge(this.currentTime)}set time(t){var n;t=jt(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ce.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Ge(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:t=fS,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ce.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function PS(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Tn=e=>e*180/Math.PI,kl=e=>{const t=Tn(Math.atan2(e[1],e[0]));return jl(t)},IS={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:kl,rotateZ:kl,skewX:e=>Tn(Math.atan(e[1])),skewY:e=>Tn(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},jl=e=>(e=e%360,e<0&&(e+=360),e),Kd=kl,Xd=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Yd=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),LS={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Xd,scaleY:Yd,scale:e=>(Xd(e)+Yd(e))/2,rotateX:e=>jl(Tn(Math.atan2(e[6],e[5]))),rotateY:e=>jl(Tn(Math.atan2(-e[2],e[0]))),rotateZ:Kd,rotate:Kd,skewX:e=>Tn(Math.atan(e[4])),skewY:e=>Tn(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function El(e){return e.includes("scale")?1:0}function Ml(e,t){if(!e||e==="none")return El(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=LS,i=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=IS,i=a}if(!i)return El(t);const s=r[t],o=i[1].split(",").map(AS);return typeof s=="function"?s(o):o[s]}const DS=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Ml(n,t)};function AS(e){return parseFloat(e.trim())}const vr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xr=new Set(vr),Qd=e=>e===yr||e===L,_S=new Set(["x","y","z"]),zS=vr.filter(e=>!_S.has(e));function OS(e){const t=[];return zS.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const $t={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Ml(t,"x"),y:(e,{transform:t})=>Ml(t,"y")};$t.translateX=$t.x;$t.translateY=$t.y;const jn=new Set;let Rl=!1,Pl=!1,Il=!1;function Tg(){if(Pl){const e=Array.from(jn).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=OS(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Pl=!1,Rl=!1,jn.forEach(e=>e.complete(Il)),jn.clear()}function Cg(){jn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Pl=!0)})}function VS(){Il=!0,Cg(),Tg(),Il=!1}class nc{constructor(t,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(jn.add(this),Rl||(Rl=!0,H.read(Cg),H.resolveKeyframes(Tg))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i==null?void 0:i.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}PS(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),jn.delete(this)}cancel(){this.state==="scheduled"&&(jn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const BS=e=>e.startsWith("--");function NS(e,t,n){BS(t)?e.style.setProperty(t,n):e.style[t]=n}const FS=Wu(()=>window.ScrollTimeline!==void 0),qS={};function US(e,t){const n=Wu(e);return()=>qS[t]??n()}const kg=US(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zr=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Jd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zr([0,.65,.55,1]),circOut:zr([.55,0,1,.45]),backIn:zr([.31,.01,.66,-.59]),backOut:zr([.33,1.53,.69,.99])};function jg(e,t){if(e)return typeof e=="function"?kg()?Sg(e,t):"ease-out":ug(e)?zr(e):Array.isArray(e)?e.map(n=>jg(n,t)||Jd.easeOut):Jd[e]}function WS(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:u}={},c=void 0){const f={[t]:n};u&&(f.offset=u);const d=jg(a,i);Array.isArray(d)&&(f.easing=d);const m={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),e.animate(f,m)}function Eg(e){return typeof e=="function"&&"applyToOptions"in e}function $S({type:e,...t}){return Eg(e)&&kg()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class HS extends ec{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:u}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,Uu(typeof t.type!="string");const c=$S(t);this.animation=WS(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=Zu(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(f):NS(n,r,f),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ge(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ge(t)}get time(){return Ge(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=jt(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&FS()?(this.animation.timeline=t,Xe):n(this)}}const Mg={anticipate:sg,backInOut:ig,circInOut:ag};function GS(e){return e in Mg}function KS(e){typeof e.ease=="string"&&GS(e.ease)&&(e.ease=Mg[e.ease])}const fa=10;class XS extends HS{constructor(t){KS(t),wg(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new tc({...o,autoplay:!1}),u=Math.max(fa,Ce.now()-this.startTime),c=gt(0,fa,u-fa);n.setWithVelocity(a.sample(Math.max(0,u-c)).value,a.sample(u).value,c),a.stop()}}const Zd=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(rn.test(e)||e==="0")&&!e.startsWith("url("));function YS(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function QS(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=Zd(i,t),a=Zd(s,t);return!o||!a?!1:YS(e)||(n==="spring"||Eg(n))&&r}function Ll(e){e.duration=0,e.type="keyframes"}const JS=new Set(["opacity","clipPath","filter","transform"]),ZS=Wu(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function eb(e){var f;const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!(((f=t==null?void 0:t.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:c}=t.owner.getProps();return ZS()&&n&&JS.has(n)&&(n!=="transform"||!c)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const tb=40;class nb extends ec{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:u,motionValue:c,element:f,...d}){var g;super(),this.stop=()=>{var x,S;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=Ce.now();const m={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:c,element:f,...d},y=(f==null?void 0:f.KeyframeResolver)||nc;this.keyframeResolver=new y(a,(x,S,h)=>this.onKeyframesResolved(x,S,m,!h),u,c,f),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:u,isHandoff:c,onUpdate:f}=r;this.resolvedAt=Ce.now(),QS(t,s,o,a)||((It.instantAnimations||!u)&&(f==null||f(Zu(t,r,n))),t[0]=t[t.length-1],Ll(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>tb?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},y=!c&&eb(m)?new XS({...m,element:m.motionValue.owner.current}):new tc(m);y.finished.then(()=>this.notifyFinished()).catch(Xe),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),VS()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const rb=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ib(e){const t=rb.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function Rg(e,t,n=1){const[r,i]=ib(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return Yh(o)?parseFloat(o):o}return Ku(i)?Rg(i,t,n+1):i}function rc(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const sb={type:"spring",stiffness:500,damping:25,restSpeed:10},ob=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ab={type:"keyframes",duration:.8},lb={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ub=(e,{keyframes:t})=>t.length>2?ab:xr.has(e)?e.startsWith("scale")?ob(t[1]):sb:lb;function cb({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:u,elapsed:c,...f}){return!!Object.keys(f).length}const db=e=>e!==null;function fb(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(db),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}function Pg(e,t,n,r=0,i=1){const s=Array.from(e).sort((c,f)=>c.sortNodePosition(f)).indexOf(t),o=e.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}const ic=(e,t,n,r={},i,s)=>o=>{const a=rc(r,e)||{},u=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-jt(u);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:m=>{t.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:i};cb(a)||Object.assign(f,ub(e,f)),f.duration&&(f.duration=jt(f.duration)),f.repeatDelay&&(f.repeatDelay=jt(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Ll(f),f.delay===0&&(d=!0)),(It.instantAnimations||It.skipAnimations)&&(d=!0,Ll(f),f.delay=0),f.allowFlatten=!a.type&&!a.ease,d&&!s&&t.get()!==void 0){const m=fb(f.keyframes,a);if(m!==void 0){H.update(()=>{f.onUpdate(m),f.onComplete()});return}}return a.isSync?new tc(f):new nb(f)},Ig=new Set(["width","height","top","left","right","bottom",...vr]),ef=30,mb=e=>!isNaN(parseFloat(e));class pb{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Ce.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ce.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=mb(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new $u);const r=this.events[t].add(n);return t==="change"?()=>{r(),H.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ce.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>ef)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ef);return Zh(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ln(e,t){return new pb(e,t)}function tf(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function sc(e,t,n,r){if(typeof t=="function"){const[i,s]=tf(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=tf(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function ir(e,t,n){const r=e.getProps();return sc(r,t,n!==void 0?n:r.custom,e)}const Dl=e=>Array.isArray(e);function hb(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ln(n))}function gb(e){return Dl(e)?e[e.length-1]||0:e}function yb(e,t){const n=ir(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=gb(s[o]);hb(e,o,a)}}const be=e=>!!(e&&e.getVelocity);function vb(e){return!!(be(e)&&e.add)}function Al(e,t){const n=e.getValue("willChange");if(vb(n))return n.add(t);if(!n&&It.WillChange){const r=new It.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function oc(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const xb="framerAppearId",Lg="data-"+oc(xb);function Dg(e){return e.props[Lg]}function Sb({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Ag(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(s=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const f in a){const d=e.getValue(f,e.latestValues[f]??null),m=a[f];if(m===void 0||c&&Sb(c,f))continue;const y={delay:n,...rc(s||{},f)},g=d.get();if(g!==void 0&&!d.isAnimating&&!Array.isArray(m)&&m===g&&!y.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const h=Dg(e);if(h){const p=window.MotionHandoffAnimation(h,f,H);p!==null&&(y.startTime=p,x=!0)}}Al(e,f),d.start(ic(f,d,m,e.shouldReduceMotion&&Ig.has(f)?{type:!1}:y,e,x));const S=d.animation;S&&u.push(S)}return o&&Promise.all(u).then(()=>{H.update(()=>{o&&yb(e,o)})}),u}function _l(e,t,n={}){var u;const r=ir(e,t,n.type==="exit"?(u=e.presenceContext)==null?void 0:u.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Ag(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:m}=i;return bb(e,t,c,f,d,m,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,f]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>f())}else return Promise.all([s(),o(n.delay)])}function bb(e,t,n=0,r=0,i=0,s=1,o){const a=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),a.push(_l(u,t,{...o,delay:n+(typeof r=="function"?0:r)+Pg(e.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(a)}function wb(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>_l(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=_l(e,t,n);else{const i=typeof t=="function"?ir(e,t,n.custom):t;r=Promise.all(Ag(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const Tb={test:e=>e==="auto",parse:e=>e},_g=e=>t=>t.test(e),zg=[yr,L,pt,Ot,Y1,X1,Tb],nf=e=>zg.find(_g(e));function Cb(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Jh(e):!0}const kb=new Set(["brightness","contrast","saturate","opacity"]);function jb(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Xu)||[];if(!r)return e;const i=n.replace(r,"");let s=kb.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Eb=/\b([a-z-]*)\(.*?\)/gu,zl={...rn,getAnimatableNone:e=>{const t=e.match(Eb);return t?t.map(jb).join(" "):e}},rf={...yr,transform:Math.round},Mb={rotate:Ot,rotateX:Ot,rotateY:Ot,rotateZ:Ot,scale:Zi,scaleX:Zi,scaleY:Zi,scaleZ:Zi,skew:Ot,skewX:Ot,skewY:Ot,distance:L,translateX:L,translateY:L,translateZ:L,x:L,y:L,z:L,perspective:L,transformPerspective:L,opacity:vi,originX:Ud,originY:Ud,originZ:L},ac={borderWidth:L,borderTopWidth:L,borderRightWidth:L,borderBottomWidth:L,borderLeftWidth:L,borderRadius:L,radius:L,borderTopLeftRadius:L,borderTopRightRadius:L,borderBottomRightRadius:L,borderBottomLeftRadius:L,width:L,maxWidth:L,height:L,maxHeight:L,top:L,right:L,bottom:L,left:L,inset:L,insetBlock:L,insetBlockStart:L,insetBlockEnd:L,insetInline:L,insetInlineStart:L,insetInlineEnd:L,padding:L,paddingTop:L,paddingRight:L,paddingBottom:L,paddingLeft:L,paddingBlock:L,paddingBlockStart:L,paddingBlockEnd:L,paddingInline:L,paddingInlineStart:L,paddingInlineEnd:L,margin:L,marginTop:L,marginRight:L,marginBottom:L,marginLeft:L,marginBlock:L,marginBlockStart:L,marginBlockEnd:L,marginInline:L,marginInlineStart:L,marginInlineEnd:L,backgroundPositionX:L,backgroundPositionY:L,...Mb,zIndex:rf,fillOpacity:vi,strokeOpacity:vi,numOctaves:rf},Rb={...ac,color:se,backgroundColor:se,outlineColor:se,fill:se,stroke:se,borderColor:se,borderTopColor:se,borderRightColor:se,borderBottomColor:se,borderLeftColor:se,filter:zl,WebkitFilter:zl},Og=e=>Rb[e];function Vg(e,t){let n=Og(e);return n!==zl&&(n=rn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Pb=new Set(["auto","none","0"]);function Ib(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!Pb.has(s)&&xi(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=Vg(n,i)}class Lb extends nc{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<t.length;f++){let d=t[f];if(typeof d=="string"&&(d=d.trim(),Ku(d))){const m=Rg(d,n.current);m!==void 0&&(t[f]=m),f===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Ig.has(r)||t.length!==2)return;const[i,s]=t,o=nf(i),a=nf(s),u=qd(i),c=qd(s);if(u!==c&&$t[r]){this.needsMeasurement=!0;return}if(o!==a)if(Qd(o)&&Qd(a))for(let f=0;f<t.length;f++){const d=t[f];typeof d=="string"&&(t[f]=parseFloat(d))}else $t[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||Cb(t[i]))&&r.push(i);r.length&&Ib(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$t[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=$t[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([u,c])=>{t.getValue(u).set(c)}),this.resolveNoneKeyframes()}}function Db(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=(n==null?void 0:n[e])??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const Bg=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Ng(e){return Qh(e)&&"offsetHeight"in e}const{schedule:lc}=cg(queueMicrotask,!1),et={x:!1,y:!1};function Fg(){return et.x||et.y}function Ab(e){return e==="x"||e==="y"?et[e]?null:(et[e]=!0,()=>{et[e]=!1}):et.x||et.y?null:(et.x=et.y=!0,()=>{et.x=et.y=!1})}function qg(e,t){const n=Db(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function sf(e){return!(e.pointerType==="touch"||Fg())}function _b(e,t,n={}){const[r,i,s]=qg(e,n),o=a=>{if(!sf(a))return;const{target:u}=a,c=t(u,a);if(typeof c!="function"||!u)return;const f=d=>{sf(d)&&(c(d),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const Ug=(e,t)=>t?e===t?!0:Ug(e,t.parentElement):!1,uc=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,zb=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Wg(e){return zb.has(e.tagName)||e.isContentEditable===!0}const vs=new WeakSet;function of(e){return t=>{t.key==="Enter"&&e(t)}}function ma(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Ob=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=of(()=>{if(vs.has(n))return;ma(n,"down");const i=of(()=>{ma(n,"up")}),s=()=>ma(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function af(e){return uc(e)&&!Fg()}function Vb(e,t,n={}){const[r,i,s]=qg(e,n),o=a=>{const u=a.currentTarget;if(!af(a))return;vs.add(u);const c=t(u,a),f=(y,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",m),vs.has(u)&&vs.delete(u),af(y)&&typeof c=="function"&&c(y,{success:g})},d=y=>{f(y,u===window||u===document||n.useGlobalTarget||Ug(u,y.target))},m=y=>{f(y,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),Ng(a)&&(a.addEventListener("focus",c=>Ob(c,i)),!Wg(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function $g(e){return Qh(e)&&"ownerSVGElement"in e}function Bb(e){return $g(e)&&e.tagName==="svg"}const Nb=[...zg,se,rn],Fb=e=>Nb.find(_g(e)),lf=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xn=()=>({x:lf(),y:lf()}),uf=()=>({min:0,max:0}),le=()=>({x:uf(),y:uf()}),Ol={current:null},Hg={current:!1},qb=typeof window<"u";function Ub(){if(Hg.current=!0,!!qb)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ol.current=e.matches;e.addEventListener("change",t),t()}else Ol.current=!1}const Wb=new WeakMap;function ko(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Si(e){return typeof e=="string"||Array.isArray(e)}const cc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dc=["initial",...cc];function jo(e){return ko(e.animate)||dc.some(t=>Si(e[t]))}function Gg(e){return!!(jo(e)||e.variants)}function $b(e,t,n){for(const r in t){const i=t[r],s=n[r];if(be(i))e.addValue(r,i);else if(be(s))e.addValue(r,Ln(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,Ln(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const cf=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Ys={};function Kg(e){Ys=e}function Hb(){return Ys}class Gb{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nc,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Ce.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,H.render(this.render,!1,!0))};const{latestValues:u,renderState:c}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=jo(n),this.isVariantNode=Gg(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in d){const y=d[m];u[m]!==void 0&&be(y)&&y.set(u[m])}}mount(t){var n;this.current=t,Wb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Hg.current||Ub(),this.shouldReduceMotion=Ol.current),(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),nn(this.notifyUpdate),nn(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=xr.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&H.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ys){const n=Ys[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):le()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<cf.length;r++){const i=cf[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=$b(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ln(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Yh(r)||Jh(r))?r=parseFloat(r):!Fb(r)&&rn.test(n)&&(r=Vg(t,n)),this.setBaseTarget(t,be(r)?r.get():r)),be(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=sc(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!be(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new $u),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){lc.render(this.render)}}class ln{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Xg extends Gb{constructor(){super(...arguments),this.KeyframeResolver=Lb}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){const r=t.style;return r?r[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;be(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Yg({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Kb({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Xb(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function pa(e){return e===void 0||e===1}function Vl({scale:e,scaleX:t,scaleY:n}){return!pa(e)||!pa(t)||!pa(n)}function gn(e){return Vl(e)||Qg(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Qg(e){return df(e.x)||df(e.y)}function df(e){return e&&e!=="0%"}function Qs(e,t,n){const r=e-n,i=t*r;return n+i}function ff(e,t,n,r,i){return i!==void 0&&(e=Qs(e,i,r)),Qs(e,n,r)+t}function Bl(e,t=0,n=1,r,i){e.min=ff(e.min,t,n,r,i),e.max=ff(e.max,t,n,r,i)}function Jg(e,{x:t,y:n}){Bl(e.x,t.translate,t.scale,t.originPoint),Bl(e.y,n.translate,n.scale,n.originPoint)}const mf=.999999999999,pf=1.0000000000001;function Yb(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Qn(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Jg(e,o)),r&&gn(s.latestValues)&&Qn(e,s.latestValues))}t.x<pf&&t.x>mf&&(t.x=1),t.y<pf&&t.y>mf&&(t.y=1)}function Yn(e,t){e.min=e.min+t,e.max=e.max+t}function hf(e,t,n,r,i=.5){const s=Q(e.min,e.max,i);Bl(e,t,n,s,r)}function Qn(e,t){hf(e.x,t.x,t.scaleX,t.scale,t.originX),hf(e.y,t.y,t.scaleY,t.scale,t.originY)}function Zg(e,t){return Yg(Xb(e.getBoundingClientRect(),t))}function Qb(e,t,n){const r=Zg(e,n),{scroll:i}=t;return i&&(Yn(r.x,i.offset.x),Yn(r.y,i.offset.y)),r}const Jb={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Zb=vr.length;function ew(e,t,n){let r="",i=!0;for(let s=0;s<Zb;s++){const o=vr[s],a=e[o];if(a===void 0)continue;let u=!0;if(typeof a=="number"?u=a===(o.startsWith("scale")?1:0):u=parseFloat(a)===0,!u||n){const c=Bg(a,ac[o]);if(!u){i=!1;const f=Jb[o]||o;r+=`${f}(${c}) `}n&&(t[o]=c)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function fc(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,a=!1;for(const u in t){const c=t[u];if(xr.has(u)){o=!0;continue}else if(fg(u)){i[u]=c;continue}else{const f=Bg(c,ac[u]);u.startsWith("origin")?(a=!0,s[u]=f):r[u]=f}}if(t.transform||(o||n?r.transform=ew(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:u="50%",originY:c="50%",originZ:f=0}=s;r.transformOrigin=`${u} ${c} ${f}`}}function ey(e,{style:t,vars:n},r,i){const s=e.style;let o;for(o in t)s[o]=t[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function gf(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Rr={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(L.test(e))e=parseFloat(e);else return e;const n=gf(e,t.target.x),r=gf(e,t.target.y);return`${n}% ${r}%`}},tw={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=rn.parse(e);if(i.length>5)return r;const s=rn.createTransformer(e),o=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,u=n.y.scale*t.y;i[0+o]/=a,i[1+o]/=u;const c=Q(a,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},Nl={borderRadius:{...Rr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rr,borderTopRightRadius:Rr,borderBottomLeftRadius:Rr,borderBottomRightRadius:Rr,boxShadow:tw};function ty(e,{layout:t,layoutId:n}){return xr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Nl[e]||e==="opacity")}function mc(e,t,n){var o;const r=e.style,i=t==null?void 0:t.style,s={};if(!r)return s;for(const a in r)(be(r[a])||i&&be(i[a])||ty(a,e)||((o=n==null?void 0:n.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function nw(e){return window.getComputedStyle(e)}class rw extends Xg{constructor(){super(...arguments),this.type="html",this.renderInstance=ey}readValueFromInstance(t,n){var r;if(xr.has(n))return(r=this.projection)!=null&&r.isProjecting?El(n):DS(t,n);{const i=nw(t),s=(fg(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Zg(t,n)}build(t,n,r){fc(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return mc(t,n,r)}}const iw={offset:"stroke-dashoffset",array:"stroke-dasharray"},sw={offset:"strokeDashoffset",array:"strokeDasharray"};function ow(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?iw:sw;e[s.offset]=L.transform(-r);const o=L.transform(t),a=L.transform(n);e[s.array]=`${o} ${a}`}const aw=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function ny(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},u,c,f){if(fc(e,a,c),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:m}=e;d.transform&&(m.transform=d.transform,delete d.transform),(m.transform||d.transformOrigin)&&(m.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),m.transform&&(m.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete d.transformBox);for(const y of aw)d[y]!==void 0&&(m[y]=d[y],delete d[y]);t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&ow(d,i,s,o,!1)}const ry=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),iy=e=>typeof e=="string"&&e.toLowerCase()==="svg";function lw(e,t,n,r){ey(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(ry.has(i)?i:oc(i),t.attrs[i])}function sy(e,t,n){const r=mc(e,t,n);for(const i in e)if(be(e[i])||be(t[i])){const s=vr.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}class uw extends Xg{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=le}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(xr.has(n)){const r=Og(n);return r&&r.default||0}return n=ry.has(n)?n:oc(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return sy(t,n,r)}build(t,n,r){ny(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){lw(t,n,r,i)}mount(t){this.isSVGTag=iy(t.tagName),super.mount(t)}}const cw=dc.length;function oy(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?oy(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<cw;n++){const r=dc[n],i=e.props[r];(Si(i)||i===!1)&&(t[r]=i)}return t}function ay(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const dw=[...cc].reverse(),fw=cc.length;function mw(e){return t=>Promise.all(t.map(({animation:n,options:r})=>wb(e,n,r)))}function pw(e){let t=mw(e),n=yf(),r=!0;const i=u=>(c,f)=>{var m;const d=ir(e,f,u==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(d){const{transition:y,transitionEnd:g,...x}=d;c={...c,...x,...g}}return c};function s(u){t=u(e)}function o(u){const{props:c}=e,f=oy(e.parent)||{},d=[],m=new Set;let y={},g=1/0;for(let S=0;S<fw;S++){const h=dw[S],p=n[h],v=c[h]!==void 0?c[h]:f[h],w=Si(v),T=h===u?p.isActive:null;T===!1&&(g=S);let j=v===f[h]&&v!==c[h]&&w;if(j&&r&&e.manuallyAnimateOnMount&&(j=!1),p.protectedKeys={...y},!p.isActive&&T===null||!v&&!p.prevProp||ko(v)||typeof v=="boolean")continue;const C=hw(p.prevProp,v);let k=C||h===u&&p.isActive&&!j&&w||S>g&&w,I=!1;const A=Array.isArray(v)?v:[v];let V=A.reduce(i(h),{});T===!1&&(V={});const{prevResolvedValues:G={}}=p,Ae={...G,...V},yt=B=>{k=!0,m.has(B)&&(I=!0,m.delete(B)),p.needsAnimating[B]=!0;const R=e.getValue(B);R&&(R.liveStyle=!1)};for(const B in Ae){const R=V[B],_=G[B];if(y.hasOwnProperty(B))continue;let z=!1;Dl(R)&&Dl(_)?z=!ay(R,_):z=R!==_,z?R!=null?yt(B):m.add(B):R!==void 0&&m.has(B)?yt(B):p.protectedKeys[B]=!0}p.prevProp=v,p.prevResolvedValues=V,p.isActive&&(y={...y,...V}),r&&e.blockInitialAnimation&&(k=!1);const At=j&&C;k&&(!At||I)&&d.push(...A.map(B=>{const R={type:h};if(typeof B=="string"&&r&&!At&&e.manuallyAnimateOnMount&&e.parent){const{parent:_}=e,z=ir(_,B);if(_.enteringChildren&&z){const{delayChildren:X}=z.transition||{};R.delay=Pg(_.enteringChildren,e,X)}}return{animation:B,options:R}}))}if(m.size){const S={};if(typeof c.initial!="boolean"){const h=ir(e,Array.isArray(c.initial)?c.initial[0]:c.initial);h&&h.transition&&(S.transition=h.transition)}m.forEach(h=>{const p=e.getBaseTarget(h),v=e.getValue(h);v&&(v.liveStyle=!0),S[h]=p??null}),d.push({animation:S})}let x=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(x=!1),r=!1,x?t(d):Promise.resolve()}function a(u,c){var d;if(n[u].isActive===c)return Promise.resolve();(d=e.variantChildren)==null||d.forEach(m=>{var y;return(y=m.animationState)==null?void 0:y.setActive(u,c)}),n[u].isActive=c;const f=o(u);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=yf()}}}function hw(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!ay(t,e):!1}function dn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yf(){return{animate:dn(!0),whileInView:dn(),whileHover:dn(),whileTap:dn(),whileDrag:dn(),whileFocus:dn(),exit:dn()}}const ly=1e-4,gw=1-ly,yw=1+ly,uy=.01,vw=0-uy,xw=0+uy;function ke(e){return e.max-e.min}function Sw(e,t,n){return Math.abs(e-t)<=n}function vf(e,t,n,r=.5){e.origin=r,e.originPoint=Q(t.min,t.max,e.origin),e.scale=ke(n)/ke(t),e.translate=Q(n.min,n.max,e.origin)-e.originPoint,(e.scale>=gw&&e.scale<=yw||isNaN(e.scale))&&(e.scale=1),(e.translate>=vw&&e.translate<=xw||isNaN(e.translate))&&(e.translate=0)}function Yr(e,t,n,r){vf(e.x,t.x,n.x,r?r.originX:void 0),vf(e.y,t.y,n.y,r?r.originY:void 0)}function xf(e,t,n){e.min=n.min+t.min,e.max=e.min+ke(t)}function bw(e,t,n){xf(e.x,t.x,n.x),xf(e.y,t.y,n.y)}function Sf(e,t,n){e.min=t.min-n.min,e.max=e.min+ke(t)}function Js(e,t,n){Sf(e.x,t.x,n.x),Sf(e.y,t.y,n.y)}function bf(e,t,n,r,i){return e-=t,e=Qs(e,1/n,r),i!==void 0&&(e=Qs(e,1/i,r)),e}function ww(e,t=0,n=1,r=.5,i,s=e,o=e){if(pt.test(t)&&(t=parseFloat(t),t=Q(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Q(s.min,s.max,r);e===s&&(a-=t),e.min=bf(e.min,t,n,a,i),e.max=bf(e.max,t,n,a,i)}function wf(e,t,[n,r,i],s,o){ww(e,t[n],t[r],t[i],t.scale,s,o)}const Tw=["x","scaleX","originX"],Cw=["y","scaleY","originY"];function Tf(e,t,n,r){wf(e.x,t,Tw,n?n.x:void 0,r?r.x:void 0),wf(e.y,t,Cw,n?n.y:void 0,r?r.y:void 0)}function Cf(e,t){e.min=t.min,e.max=t.max}function Ze(e,t){Cf(e.x,t.x),Cf(e.y,t.y)}function kf(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function jf(e){return e.translate===0&&e.scale===1}function cy(e){return jf(e.x)&&jf(e.y)}function Ef(e,t){return e.min===t.min&&e.max===t.max}function kw(e,t){return Ef(e.x,t.x)&&Ef(e.y,t.y)}function Mf(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function dy(e,t){return Mf(e.x,t.x)&&Mf(e.y,t.y)}function Rf(e){return ke(e.x)/ke(e.y)}function Pf(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function Ue(e){return[e("x"),e("y")]}function jw(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:f,rotateX:d,rotateY:m,skewX:y,skewY:g}=n;c&&(r=`perspective(${c}px) ${r}`),f&&(r+=`rotate(${f}deg) `),d&&(r+=`rotateX(${d}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=e.x.scale*t.x,u=e.y.scale*t.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const fy=["TopLeft","TopRight","BottomLeft","BottomRight"],Ew=fy.length,If=e=>typeof e=="string"?parseFloat(e):e,Lf=e=>typeof e=="number"||L.test(e);function Mw(e,t,n,r,i,s){i?(e.opacity=Q(0,n.opacity??1,Rw(r)),e.opacityExit=Q(t.opacity??1,0,Pw(r))):s&&(e.opacity=Q(t.opacity??1,n.opacity??1,r));for(let o=0;o<Ew;o++){const a=`border${fy[o]}Radius`;let u=Df(t,a),c=Df(n,a);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||Lf(u)===Lf(c)?(e[a]=Math.max(Q(If(u),If(c),r),0),(pt.test(c)||pt.test(u))&&(e[a]+="%")):e[a]=c}(t.rotate||n.rotate)&&(e.rotate=Q(t.rotate||0,n.rotate||0,r))}function Df(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Rw=my(0,.5,og),Pw=my(.5,.95,Xe);function my(e,t,n){return r=>r<e?0:r>t?1:n(yi(e,t,r))}function Iw(e,t){const n=Ce.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(nn(r),e(s-t))};return H.setup(r,!0),()=>nn(r)}function bi(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function xs(e){return be(e)?e.get():e}function Lw(e,t,n){const r=be(e)?e:Ln(e);return r.start(ic("",r,t,n)),r.animation}const Dw=(e,t)=>e.depth-t.depth;class Aw{constructor(){this.children=[],this.isDirty=!1}add(t){Fu(this.children,t),this.isDirty=!0}remove(t){qu(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Dw),this.isDirty=!1,this.children.forEach(t)}}class _w{constructor(){this.members=[]}add(t){Fu(this.members,t),t.scheduleRender()}remove(t){if(qu(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Ss={hasAnimatedSinceResize:!0,hasEverUpdated:!1},ha=["","X","Y","Z"],zw=1e3;let Ow=0;function ga(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function py(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Dg(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",H,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&py(r)}function hy({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=t==null?void 0:t()){this.id=Ow++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Nw),this.nodes.forEach(Ww),this.nodes.forEach($w),this.nodes.forEach(Fw)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Aw)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new $u),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=$g(o)&&!Bb(o),this.instance=o;const{layoutId:a,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||a)&&(this.isLayoutDirty=!0),e){let f,d=0;const m=()=>this.root.updateBlockedByResize=!1;H.read(()=>{d=window.innerWidth}),e(o,()=>{const y=window.innerWidth;y!==d&&(d=y,this.root.updateBlockedByResize=!0,f&&f(),f=Iw(m,250),Ss.hasAnimatedSinceResize&&(Ss.hasAnimatedSinceResize=!1,this.nodes.forEach(zf)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||Yw,{onLayoutAnimationStart:x,onLayoutAnimationComplete:S}=c.getProps(),h=!this.targetLayout||!dy(this.targetLayout,y),p=!d&&m;if(this.options.layoutRoot||this.resumeFrom||p||d&&(h||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...rc(g,"layout"),onPlay:x,onComplete:S};(c.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(f,p)}else d||zf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),nn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hw),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&py(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Af);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(_f);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Uw),this.nodes.forEach(Vw),this.nodes.forEach(Bw)):this.nodes.forEach(_f),this.clearAllSnapshots();const a=Ce.now();he.delta=gt(0,1e3/60,a-he.timestamp),he.timestamp=a,he.isProcessing=!0,aa.update.process(he),aa.preRender.process(he),aa.render.process(he),he.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,lc.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(qw),this.sharedNodes.forEach(Gw)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,H.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){H.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ke(this.snapshot.measuredBox.x)&&!ke(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=le(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!cy(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||gn(this.latestValues)||f)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),Qw(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return le();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Jw))){const{scroll:f}=this.root;f&&(Yn(a.x,f.offset.x),Yn(a.y,f.offset.y))}return a}removeElementScroll(o){var u;const a=le();if(Ze(a,o),(u=this.scroll)!=null&&u.wasRoot)return a;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:d,options:m}=f;f!==this.root&&d&&m.layoutScroll&&(d.wasRoot&&Ze(a,o),Yn(a.x,d.offset.x),Yn(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const u=le();Ze(u,o);for(let c=0;c<this.path.length;c++){const f=this.path[c];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Qn(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),gn(f.latestValues)&&Qn(u,f.latestValues)}return gn(this.latestValues)&&Qn(u,this.latestValues),u}removeTransform(o){const a=le();Ze(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!gn(c.latestValues))continue;Vl(c.latestValues)&&c.updateSnapshot();const f=le(),d=c.measurePageBox();Ze(f,d),Tf(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return gn(this.latestValues)&&Tf(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==he.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var y;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==a;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:d}=this.options;if(!this.layout||!(f||d))return;this.resolvedRelativeTargetAt=he.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=le(),this.targetWithTransforms=le()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bw(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ze(this.target,this.layout.layoutBox),Jg(this.target,this.targetDelta)):Ze(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Vl(this.parent.latestValues)||Qg(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,u){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=le(),this.relativeTargetOrigin=le(),Js(this.relativeTargetOrigin,a,u),Ze(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var g;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(u=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===he.timestamp&&(u=!1),u)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;Ze(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,m=this.treeScale.y;Yb(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=le());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(kf(this.prevProjectionDelta.x,this.projectionDelta.x),kf(this.prevProjectionDelta.y,this.projectionDelta.y)),Yr(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==m||!Pf(this.projectionDelta.x,this.prevProjectionDelta.x)||!Pf(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Xn(),this.projectionDelta=Xn(),this.projectionDeltaWithTransform=Xn()}setAnimationOrigin(o,a=!1){const u=this.snapshot,c=u?u.latestValues:{},f={...this.latestValues},d=Xn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=le(),y=u?u.source:void 0,g=this.layout?this.layout.source:void 0,x=y!==g,S=this.getStack(),h=!S||S.members.length<=1,p=!!(x&&!h&&this.options.crossfade===!0&&!this.path.some(Xw));this.animationProgress=0;let v;this.mixTargetDelta=w=>{const T=w/1e3;Of(d.x,o.x,T),Of(d.y,o.y,T),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Js(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Kw(this.relativeTarget,this.relativeTargetOrigin,m,T),v&&kw(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=le()),Ze(v,this.relativeTarget)),x&&(this.animationValues=f,Mw(f,c,this.latestValues,T,p,h)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,u,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||c.stop(),this.pendingAnimation&&(nn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=H.update(()=>{Ss.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ln(0)),this.currentAnimation=Lw(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),o.onUpdate&&o.onUpdate(f)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:c,latestValues:f}=o;if(!(!a||!u||!c)){if(this!==o&&this.layout&&c&&gy(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||le();const d=ke(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+d;const m=ke(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}Ze(a,u),Qn(a,f),Yr(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new _w),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(a=!0),!a)return;const c={};u.z&&ga("z",o,c,this.animationValues);for(let f=0;f<ha.length;f++)ga(`rotate${ha[f]}`,o,c,this.animationValues),ga(`skew${ha[f]}`,o,c,this.animationValues);o.render();for(const f in c)o.setStaticValue(f,c[f]),this.animationValues&&(this.animationValues[f]=c[f]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=xs(a==null?void 0:a.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=xs(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!gn(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=jw(this.projectionDeltaWithTransform,this.treeScale,f);u&&(d=u(f,d)),o.transform=d;const{x:m,y}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,c.animationValues?o.opacity=c===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=c===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Nl){if(f[g]===void 0)continue;const{correct:x,applyTo:S,isCSSVariable:h}=Nl[g],p=d==="none"?f[g]:x(f[g],c);if(S){const v=S.length;for(let w=0;w<v;w++)o[S[w]]=p}else h?this.options.visualElement.renderState.vars[g]=p:o[g]=p}this.options.layoutId&&(o.pointerEvents=c===this?xs(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Af),this.root.sharedNodes.clear()}}}function Vw(e){e.updateLayout()}function Bw(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,o=t.source!==e.layout.source;s==="size"?Ue(d=>{const m=o?t.measuredBox[d]:t.layoutBox[d],y=ke(m);m.min=r[d].min,m.max=m.min+y}):gy(s,t.layoutBox,r)&&Ue(d=>{const m=o?t.measuredBox[d]:t.layoutBox[d],y=ke(r[d]);m.max=m.min+y,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+y)});const a=Xn();Yr(a,r,t.layoutBox);const u=Xn();o?Yr(u,e.applyTransform(i,!0),t.measuredBox):Yr(u,r,t.layoutBox);const c=!cy(a);let f=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:y}=d;if(m&&y){const g=le();Js(g,t.layoutBox,m.layoutBox);const x=le();Js(x,r,y.layoutBox),dy(g,x)||(f=!0),d.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:u,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:f})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Nw(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Fw(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function qw(e){e.clearSnapshot()}function Af(e){e.clearMeasurements()}function _f(e){e.isLayoutDirty=!1}function Uw(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function zf(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Ww(e){e.resolveTargetDelta()}function $w(e){e.calcProjection()}function Hw(e){e.resetSkewAndRotation()}function Gw(e){e.removeLeadSnapshot()}function Of(e,t,n){e.translate=Q(t.translate,0,n),e.scale=Q(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Vf(e,t,n,r){e.min=Q(t.min,n.min,r),e.max=Q(t.max,n.max,r)}function Kw(e,t,n,r){Vf(e.x,t.x,n.x,r),Vf(e.y,t.y,n.y,r)}function Xw(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Yw={duration:.45,ease:[.4,0,.1,1]},Bf=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Nf=Bf("applewebkit/")&&!Bf("chrome/")?Math.round:Xe;function Ff(e){e.min=Nf(e.min),e.max=Nf(e.max)}function Qw(e){Ff(e.x),Ff(e.y)}function gy(e,t,n){return e==="position"||e==="preserve-aspect"&&!Sw(Rf(t),Rf(n),.2)}function Jw(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Zw=hy({attachResizeListener:(e,t)=>bi(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ya={current:void 0},yy=hy({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ya.current){const e=new Zw({});e.mount(window),e.setOptions({layoutScroll:!0}),ya.current=e}return ya.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Eo=b.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function qf(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function eT(...e){return t=>{let n=!1;const r=e.map(i=>{const s=qf(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():qf(e[i],null)}}}}function tT(...e){return b.useCallback(eT(...e),e)}class nT extends b.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=Ng(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function rT({children:e,isPresent:t,anchorX:n,root:r}){var f;const i=b.useId(),s=b.useRef(null),o=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=b.useContext(Eo),u=((f=e.props)==null?void 0:f.ref)??(e==null?void 0:e.ref),c=tT(s,u);return b.useInsertionEffect(()=>{const{width:d,height:m,top:y,left:g,right:x}=o.current;if(t||!s.current||!d||!m)return;const S=n==="left"?`left: ${g}`:`right: ${x}`;s.current.dataset.motionPopId=i;const h=document.createElement("style");a&&(h.nonce=a);const p=r??document.head;return p.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${m}px !important;
            ${S}px !important;
            top: ${y}px !important;
          }
        `),()=>{p.contains(h)&&p.removeChild(h)}},[t]),l.jsx(nT,{isPresent:t,childRef:s,sizeRef:o,children:b.cloneElement(e,{ref:c})})}const iT=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:u})=>{const c=To(sT),f=b.useId();let d=!0,m=b.useMemo(()=>(d=!1,{id:f,initial:t,isPresent:n,custom:i,onExitComplete:y=>{c.set(y,!0);for(const g of c.values())if(!g)return;r&&r()},register:y=>(c.set(y,!1),()=>c.delete(y))}),[n,c,r]);return s&&d&&(m={...m}),b.useMemo(()=>{c.forEach((y,g)=>c.set(g,!1))},[n]),b.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(e=l.jsx(rT,{isPresent:n,anchorX:a,root:u,children:e})),l.jsx(Co.Provider,{value:m,children:e})};function sT(){return new Map}function vy(e=!0){const t=b.useContext(Co);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=b.useId();b.useEffect(()=>{if(e)return i(s)},[e]);const o=b.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const es=e=>e.key||"";function Uf(e){const t=[];return b.Children.forEach(e,n=>{b.isValidElement(n)&&t.push(n)}),t}const Oe=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:u})=>{const[c,f]=vy(o),d=b.useMemo(()=>Uf(e),[e]),m=o&&!c?[]:d.map(es),y=b.useRef(!0),g=b.useRef(d),x=To(()=>new Map),S=b.useRef(new Set),[h,p]=b.useState(d),[v,w]=b.useState(d);Xh(()=>{y.current=!1,g.current=d;for(let C=0;C<v.length;C++){const k=es(v[C]);m.includes(k)?(x.delete(k),S.current.delete(k)):x.get(k)!==!0&&x.set(k,!1)}},[v,m.length,m.join("-")]);const T=[];if(d!==h){let C=[...d];for(let k=0;k<v.length;k++){const I=v[k],A=es(I);m.includes(A)||(C.splice(k,0,I),T.push(I))}return s==="wait"&&T.length&&(C=T),w(Uf(C)),p(d),null}const{forceRender:j}=b.useContext(Nu);return l.jsx(l.Fragment,{children:v.map(C=>{const k=es(C),I=o&&!c?!1:d===v||m.includes(k),A=()=>{if(S.current.has(k))return;if(S.current.add(k),x.has(k))x.set(k,!0);else return;let V=!0;x.forEach(G=>{G||(V=!1)}),V&&(j==null||j(),w(g.current),o&&(f==null||f()),r&&r())};return l.jsx(iT,{isPresent:I,initial:!y.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:I?void 0:A,anchorX:a,children:C},k)})})},xy=b.createContext({strict:!1}),Wf={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let $f=!1;function oT(){if($f)return;const e={};for(const t in Wf)e[t]={isEnabled:n=>Wf[t].some(r=>!!n[r])};Kg(e),$f=!0}function Sy(){return oT(),Hb()}function aT(e){const t=Sy();for(const n in e)t[n]={...t[n],...e[n]};Kg(t)}const lT=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zs(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||lT.has(e)}let by=e=>!Zs(e);function uT(e){typeof e=="function"&&(by=t=>t.startsWith("on")?!Zs(t):e(t))}try{uT(require("@emotion/is-prop-valid").default)}catch{}function cT(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(by(i)||n===!0&&Zs(i)||!t&&!Zs(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const Mo=b.createContext({});function dT(e,t){if(jo(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Si(n)?n:void 0,animate:Si(r)?r:void 0}}return e.inherit!==!1?t:{}}function fT(e){const{initial:t,animate:n}=dT(e,b.useContext(Mo));return b.useMemo(()=>({initial:t,animate:n}),[Hf(t),Hf(n)])}function Hf(e){return Array.isArray(e)?e.join(" "):e}const pc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wy(e,t,n){for(const r in t)!be(t[r])&&!ty(r,n)&&(e[r]=t[r])}function mT({transformTemplate:e},t){return b.useMemo(()=>{const n=pc();return fc(n,t,e),Object.assign({},n.vars,n.style)},[t])}function pT(e,t){const n=e.style||{},r={};return wy(r,n,e),Object.assign(r,mT(e,t)),r}function hT(e,t){const n={},r=pT(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Ty=()=>({...pc(),attrs:{}});function gT(e,t,n,r){const i=b.useMemo(()=>{const s=Ty();return ny(s,t,iy(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};wy(s,e.style,e),i.style={...s,...i.style}}return i}const yT=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hc(e){return typeof e!="string"||e.includes("-")?!1:!!(yT.indexOf(e)>-1||/[A-Z]/u.test(e))}function vT(e,t,n,{latestValues:r},i,s=!1,o){const u=(o??hc(e)?gT:hT)(t,r,i,e),c=cT(t,typeof e=="string",s),f=e!==b.Fragment?{...c,...u,ref:n}:{},{children:d}=t,m=b.useMemo(()=>be(d)?d.get():d,[d]);return b.createElement(e,{...f,children:m})}function xT({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:ST(n,r,i,e),renderState:t()}}function ST(e,t,n,r){const i={},s=r(e,{});for(const m in s)i[m]=xs(s[m]);let{initial:o,animate:a}=e;const u=jo(e),c=Gg(e);t&&c&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const d=f?a:o;if(d&&typeof d!="boolean"&&!ko(d)){const m=Array.isArray(d)?d:[d];for(let y=0;y<m.length;y++){const g=sc(e,m[y]);if(g){const{transitionEnd:x,transition:S,...h}=g;for(const p in h){let v=h[p];if(Array.isArray(v)){const w=f?v.length-1:0;v=v[w]}v!==null&&(i[p]=v)}for(const p in x)i[p]=x[p]}}}return i}const Cy=e=>(t,n)=>{const r=b.useContext(Mo),i=b.useContext(Co),s=()=>xT(e,t,r,i);return n?s():To(s)},bT=Cy({scrapeMotionValuesFromProps:mc,createRenderState:pc}),wT=Cy({scrapeMotionValuesFromProps:sy,createRenderState:Ty}),TT=Symbol.for("motionComponentSymbol");function CT(e,t,n){const r=b.useRef(n);b.useInsertionEffect(()=>{r.current=n});const i=b.useRef(null);return b.useCallback(s=>{var a;s&&((a=e.onMount)==null||a.call(e,s)),t&&(s?t.mount(s):t.unmount());const o=r.current;if(typeof o=="function")if(s){const u=o(s);typeof u=="function"&&(i.current=u)}else i.current?(i.current(),i.current=null):o(s);else o&&(o.current=s)},[t])}const ky=b.createContext({});function Or(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function kT(e,t,n,r,i,s){var S,h;const{visualElement:o}=b.useContext(Mo),a=b.useContext(xy),u=b.useContext(Co),c=b.useContext(Eo).reducedMotion,f=b.useRef(null);r=r||a.renderer,!f.current&&r&&(f.current=r(e,{visualState:t,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c,isSVG:s}));const d=f.current,m=b.useContext(ky);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&jT(f.current,n,i,m);const y=b.useRef(!1);b.useInsertionEffect(()=>{d&&y.current&&d.update(n,u)});const g=n[Lg],x=b.useRef(!!g&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,g))&&((h=window.MotionHasOptimisedAnimation)==null?void 0:h.call(window,g)));return Xh(()=>{d&&(y.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),b.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)==null||p.call(window,g)}),x.current=!1),d.enteringChildren=void 0)}),d}function jT(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:u,layoutRoot:c,layoutCrossfade:f}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:jy(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Or(a),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:u,layoutRoot:c})}function jy(e){if(e)return e.options.allowProjection!==!1?e.projection:jy(e.parent)}function va(e,{forwardMotionProps:t=!1,type:n}={},r,i){r&&aT(r);const s=n?n==="svg":hc(e),o=s?wT:bT;function a(c,f){let d;const m={...b.useContext(Eo),...c,layoutId:ET(c)},{isStatic:y}=m,g=fT(c),x=o(c,y);if(!y&&Kh){MT();const S=RT(m);d=S.MeasureLayout,g.visualElement=kT(e,x,m,i,S.ProjectionNode,s)}return l.jsxs(Mo.Provider,{value:g,children:[d&&g.visualElement?l.jsx(d,{visualElement:g.visualElement,...m}):null,vT(e,c,CT(x,g.visualElement,f),x,y,t,s)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const u=b.forwardRef(a);return u[TT]=e,u}function ET({layoutId:e}){const t=b.useContext(Nu).id;return t&&e!==void 0?t+"-"+e:e}function MT(e,t){b.useContext(xy).strict}function RT(e){const t=Sy(),{drag:n,layout:r}=t;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(e)||r!=null&&r.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function PT(e,t){if(typeof Proxy>"u")return va;const n=new Map,r=(s,o)=>va(s,o,e,t),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,va(o,void 0,e,t)),n.get(o))})}const IT=(e,t)=>t.isSVG??hc(e)?new uw(t):new rw(t,{allowProjection:e!==b.Fragment});class LT extends ln{constructor(t){super(t),t.animationState||(t.animationState=pw(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();ko(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let DT=0;class AT extends ln{constructor(){super(...arguments),this.id=DT++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const _T={animation:{Feature:LT},exit:{Feature:AT}};function Ii(e){return{point:{x:e.pageX,y:e.pageY}}}const zT=e=>t=>uc(t)&&e(t,Ii(t));function Qr(e,t,n,r){return bi(e,t,zT(n),r)}const Ey=({current:e})=>e?e.ownerDocument.defaultView:null,Gf=(e,t)=>Math.abs(e-t);function OT(e,t){const n=Gf(e.x,t.x),r=Gf(e.y,t.y);return Math.sqrt(n**2+r**2)}const Kf=new Set(["auto","scroll"]);class My{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=y=>{this.handleScroll(y.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Sa(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=OT(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!x)return;const{point:S}=y,{timestamp:h}=he;this.history.push({...S,timestamp:h});const{onStart:p,onMove:v}=this.handlers;g||(p&&p(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,y)},this.handlePointerMove=(y,g)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=xa(g,this.transformPagePoint),H.update(this.updatePoint,!0)},this.handlePointerUp=(y,g)=>{this.end();const{onEnd:x,onSessionEnd:S,resumeAnimation:h}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&h&&h(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Sa(y.type==="pointercancel"?this.lastMoveEventInfo:xa(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(y,p),S&&S(y,p)},!uc(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const u=Ii(t),c=xa(u,this.transformPagePoint),{point:f}=c,{timestamp:d}=he;this.history=[{...f,timestamp:d}];const{onSessionStart:m}=n;m&&m(t,Sa(c,this.history)),this.removeListeners=Mi(Qr(this.contextWindow,"pointermove",this.handlePointerMove),Qr(this.contextWindow,"pointerup",this.handlePointerUp),Qr(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(t){let n=t.parentElement;for(;n;){const r=getComputedStyle(n);(Kf.has(r.overflowX)||Kf.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const n=this.scrollPositions.get(t);if(!n)return;const r=t===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},s={x:i.x-n.x,y:i.y-n.y};s.x===0&&s.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(t,i),H.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),nn(this.updatePoint)}}function xa(e,t){return t?{point:t(e.point)}:e}function Xf(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Sa({point:e},t){return{point:e,delta:Xf(e,Ry(t)),offset:Xf(e,VT(t)),velocity:BT(t,.1)}}function VT(e){return e[0]}function Ry(e){return e[e.length-1]}function BT(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Ry(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>jt(t)));)n--;if(!r)return{x:0,y:0};const s=Ge(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function NT(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Q(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Q(n,e,r.max):Math.min(e,n)),e}function Yf(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function FT(e,{top:t,left:n,bottom:r,right:i}){return{x:Yf(e.x,n,i),y:Yf(e.y,t,r)}}function Qf(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function qT(e,t){return{x:Qf(e.x,t.x),y:Qf(e.y,t.y)}}function UT(e,t){let n=.5;const r=ke(e),i=ke(t);return i>r?n=yi(t.min,t.max-r,e.min):r>i&&(n=yi(e.min,e.max-i,t.min)),gt(0,1,n)}function WT(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Fl=.35;function $T(e=Fl){return e===!1?e=0:e===!0&&(e=Fl),{x:Jf(e,"left","right"),y:Jf(e,"top","bottom")}}function Jf(e,t,n){return{min:Zf(e,t),max:Zf(e,n)}}function Zf(e,t){return typeof e=="number"?e:e[t]||0}const HT=new WeakMap;class GT{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=le(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{n?(this.stopAnimation(),this.snapToCursor(Ii(d).point)):this.pauseAnimation()},o=(d,m)=>{this.stopAnimation();const{drag:y,dragPropagation:g,onDragStart:x}=this.getProps();if(y&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ab(y),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ue(h=>{let p=this.getAxisMotionValue(h).get()||0;if(pt.test(p)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[h];w&&(p=ke(w)*(parseFloat(p)/100))}}this.originPoint[h]=p}),x&&H.postRender(()=>x(d,m)),Al(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},a=(d,m)=>{this.latestPointerEvent=d,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:g,onDirectionLock:x,onDrag:S}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:h}=m;if(g&&this.currentDirection===null){this.currentDirection=KT(h),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,h),this.updateAxis("y",m.point,h),this.visualElement.render(),S&&S(d,m)},u=(d,m)=>{this.latestPointerEvent=d,this.latestPanInfo=m,this.stop(d,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Ue(d=>{var m;return this.getAnimationState(d)==="paused"&&((m=this.getAxisMotionValue(d).animation)==null?void 0:m.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new My(t,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:Ey(this.visualElement),element:this.visualElement.current})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&H.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!ts(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=NT(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;t&&Or(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=FT(r.layoutBox,t):this.constraints=!1,this.elastic=$T(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ue(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=WT(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Or(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Qb(r,i.root,this.visualElement.getTransformPagePoint());let o=qT(i.layout.layoutBox,s);if(n){const a=n(Kb(o));this.hasMutatedConstraints=!!a,a&&(o=Yg(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},c=Ue(f=>{if(!ts(f,n,this.currentDirection))return;let d=u&&u[f]||{};o&&(d={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,g={type:"inertia",velocity:r?t[f]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,g)});return Promise.all(c).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Al(this.visualElement,t),r.start(ic(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ue(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ue(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ue(n=>{const{drag:r}=this.getProps();if(!ts(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n],u=s.get()||0;s.set(t[n]-Q(o,a,.5)+u)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Or(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ue(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const u=a.get();i[o]=UT({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ue(o=>{if(!ts(o,t,null))return;const a=this.getAxisMotionValue(o),{min:u,max:c}=this.constraints[o];a.set(Q(u,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;HT.set(this.visualElement,this);const t=this.visualElement.current,n=Qr(t,"pointerdown",u=>{const{drag:c,dragListener:f=!0}=this.getProps();c&&f&&!Wg(u.target)&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Or(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),H.read(r);const o=bi(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ue(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=u[f].translate,d.set(d.get()+u[f].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Fl,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function ts(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function KT(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class XT extends ln{constructor(t){super(t),this.removeGroupControls=Xe,this.removeListeners=Xe,this.controls=new GT(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xe}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const em=e=>(t,n)=>{e&&H.postRender(()=>e(t,n))};class YT extends ln{constructor(){super(...arguments),this.removePointerDownListener=Xe}onPointerDown(t){this.session=new My(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ey(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:em(t),onStart:em(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&H.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Qr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let ba=!1;class QT extends b.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),ba&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Ss.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,ba=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||H.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),lc.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;ba=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Py(e){const[t,n]=vy(),r=b.useContext(Nu);return l.jsx(QT,{...e,layoutGroup:r,switchLayoutGroup:b.useContext(ky),isPresent:t,safeToRemove:n})}const JT={pan:{Feature:YT},drag:{Feature:XT,ProjectionNode:yy,MeasureLayout:Py}};function tm(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&H.postRender(()=>s(t,Ii(t)))}class ZT extends ln{mount(){const{current:t}=this.node;t&&(this.unmount=_b(t,(n,r)=>(tm(this.node,r,"Start"),i=>tm(this.node,i,"End"))))}unmount(){}}class eC extends ln{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mi(bi(this.node.current,"focus",()=>this.onFocus()),bi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function nm(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&H.postRender(()=>s(t,Ii(t)))}class tC extends ln{mount(){const{current:t}=this.node;t&&(this.unmount=Vb(t,(n,r)=>(nm(this.node,r,"Start"),(i,{success:s})=>nm(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ql=new WeakMap,wa=new WeakMap,nC=e=>{const t=ql.get(e.target);t&&t(e)},rC=e=>{e.forEach(nC)};function iC({root:e,...t}){const n=e||document;wa.has(n)||wa.set(n,{});const r=wa.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(rC,{root:e,...t})),r[i]}function sC(e,t,n){const r=iC(t);return ql.set(e,n),r.observe(e),()=>{ql.delete(e),r.unobserve(e)}}const oC={some:0,all:1};class aC extends ln{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:oC[i]},a=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),m=c?f:d;m&&m(u)};return sC(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(lC(t,n))&&this.startObserver()}unmount(){}}function lC({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const uC={inView:{Feature:aC},tap:{Feature:tC},focus:{Feature:eC},hover:{Feature:ZT}},cC={layout:{ProjectionNode:yy,MeasureLayout:Py}},dC={..._T,...uC,...JT,...cC},P=PT(dC,IT);function eo(e){const t=To(()=>Ln(e)),{isStatic:n}=b.useContext(Eo);if(n){const[,r]=b.useState(e);b.useEffect(()=>t.on("change",r),[])}return t}const ns=["La bataille est perdue.","Vos compagnons sont morts.","Vous fuyez dans la nuit...","Tu es un dserteur.","Tu dois 80 pices d'or  Morten.","Tu as 20 jours.","PAYE... OU MEURS."];function fC({onComplete:e}){const[t,n]=b.useState(0),[r,i]=b.useState(!1),[s,o]=b.useState(!1),a=b.useRef([]);b.useEffect(()=>{const d=setTimeout(()=>{o(!0)},2e3);a.current.push(d),ns.forEach((y,g)=>{const x=setTimeout(()=>{n(g)},g*2e3);a.current.push(x)});const m=setTimeout(()=>{i(!0)},ns.length*2e3+2e3);return a.current.push(m),()=>{a.current.forEach(y=>clearTimeout(y)),a.current=[]}},[]);const u=()=>{a.current.forEach(d=>clearTimeout(d)),a.current=[],e()},c=t===ns.length-1,f=ns[t]||"";return l.jsxs("div",{onClick:u,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999,overflow:"hidden",cursor:"pointer"},children:[s&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},style:{position:"absolute",bottom:"2rem",fontSize:"0.85rem",color:"#666",fontStyle:"italic",textAlign:"center",pointerEvents:"none"},children:"Appuyez n'importe o pour passer"}),l.jsx(Oe,{mode:"wait",children:f&&l.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0,x:c?[0,-1,1,-1,1,0]:0},exit:{opacity:0,y:-20},transition:{opacity:{duration:1.5,ease:"easeOut"},y:{duration:1.5,ease:"easeOut"},x:c?{duration:.5,repeat:2,repeatType:"reverse",ease:"easeInOut"}:void 0},style:{fontSize:c?"2.5rem":"2rem",fontWeight:"bold",color:c?"#8B0000":"#ffffff",textAlign:"center",padding:"2rem",textShadow:c?"0 0 10px rgba(139, 0, 0, 0.8), 0 0 20px rgba(139, 0, 0, 0.5)":"0 0 10px rgba(255, 255, 255, 0.3)",letterSpacing:c?"0.2em":"0.1em",fontFamily:"serif"},children:f},t)}),l.jsx(Oe,{children:r&&l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:1,delay:.5},style:{marginTop:"3rem",background:"#2a2a2a",padding:"2rem",borderRadius:"8px",border:"2px solid #555",maxWidth:"500px",width:"90%"},onClick:d=>d.stopPropagation(),children:[l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem",color:"#ca8"},children:"Morten"}),l.jsxs("div",{style:{fontSize:"1rem",lineHeight:"1.6",marginBottom:"1.5rem",color:"#ddd"},children:['"Ah, un autre rat qui fuit le navire..."',l.jsx("br",{}),l.jsx("br",{}),`"Je peux te cacher. Mais rien n'est gratuit."`,l.jsx("br",{}),l.jsx("br",{}),`"Tu me dois 80 pices d'or. Tu as 20 jours."`]}),l.jsx(P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:1,type:"spring"},style:{fontSize:"1.5rem",fontWeight:"bold",color:"#c44",marginBottom:"1rem",textAlign:"center"},children:"Dette : 80"}),l.jsx("div",{style:{fontSize:"0.9rem",color:"#aaa",fontStyle:"italic",textAlign:"center",marginBottom:"2rem"},children:"Chaque jour, les intrts augmentent..."}),l.jsx(P.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:1.5},onClick:d=>{d.stopPropagation(),e()},style:{width:"100%",padding:"1.2rem 3rem",fontSize:"1.2rem",fontWeight:"bold",backgroundColor:"transparent",border:"2px solid #8B0000",color:"#8B0000",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.1em",fontFamily:"serif",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#8B0000",d.currentTarget.style.color="#000000",d.currentTarget.style.boxShadow="0 0 20px rgba(139, 0, 0, 0.8)"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent",d.currentTarget.style.color="#8B0000",d.currentTarget.style.boxShadow="none"},children:"COMMENCER MA DETTE"})]})})]})}function mC(){const e=M(g=>g.setPhase),[t,n]=b.useState(!0),[r,i]=b.useState(!1),[s,o]=b.useState(null),[a,u]=b.useState(!0),[c,f]=b.useState(!1);b.useEffect(()=>{localStorage.getItem("souda_intro_seen")==="true"&&(n(!1),i(!0))},[]),b.useEffect(()=>{(async()=>{try{const x=await w1();o(x)}catch(x){console.warn("Erreur vrification save:",x)}finally{u(!1)}})()},[]);const d=async()=>{try{const g=await $h();g&&(M.setState(g),e(g.phase||"aube"))}catch(g){console.error("Erreur chargement save:",g)}},m=()=>{localStorage.setItem("souda_intro_seen","true"),n(!1),i(!0)},y=g=>{g.preventDefault(),g.stopPropagation(),console.log(" Bouton NOUVELLE PARTIE cliqu"),console.log(" setPhase disponible:",typeof e),console.log(" Phase actuelle:",M.getState().phase);try{console.log(' Appel de setPhase("origin")...'),e("origin"),console.log(" setPhase appel, nouvelle phase:",M.getState().phase),setTimeout(()=>{const x=M.getState().phase;console.log(" Phase aprs 100ms:",x),x!=="origin"&&console.error(" La phase n'a pas chang ! Phase actuelle:",x)},100)}catch(x){console.error(" Erreur lors du changement de phase:",x)}};return t&&!r?l.jsx(fC,{onComplete:m}):l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",flex:1,justifyContent:"center",alignItems:"center",textAlign:"center",position:"relative",zIndex:1},children:[l.jsx("div",{style:{fontSize:"3rem",fontWeight:"bold",marginBottom:"1rem",color:"#fff",textShadow:"2px 2px 4px rgba(0,0,0,0.5)"},children:"SOUDA"}),l.jsxs("div",{style:{fontSize:"1.1rem",color:"#ccc",fontStyle:"italic",marginBottom:"2rem",maxWidth:"400px",lineHeight:"1.6"},children:[`"Tu es un dserteur qui pille les ruines d'une guerre oublie.`,l.jsx("br",{}),'20 jours pour rembourser tes dettes ou mourir."']}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1.5rem",borderRadius:"8px",border:"2px solid #555",marginBottom:"2rem",maxWidth:"400px"},children:[l.jsx("div",{style:{fontSize:"0.9rem",color:"#aaa",marginBottom:"0.5rem"},children:"Rgles du jeu"}),l.jsxs("div",{style:{fontSize:"0.85rem",color:"#ccc",lineHeight:"1.6",textAlign:"left"},children:[" Survie 20 jours",l.jsx("br",{})," Rembourse 80 de dette (+5/jour intrts)",l.jsx("br",{})," Mort en combat = fin de partie",l.jsx("br",{})," Chaque run compte"]})]}),!a&&s&&l.jsxs("button",{onClick:d,type:"button",style:{fontSize:"1.3rem",padding:"1.2rem 2.5rem",minWidth:"250px",background:"#3a5a3a",border:"2px solid #5a7a5a",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",cursor:"pointer",color:"#fff",fontWeight:"bold",transition:"all 0.2s ease",position:"relative",zIndex:10,marginBottom:"1rem"},onMouseEnter:g=>{g.currentTarget.style.background="#4a6a4a",g.currentTarget.style.transform="scale(1.05)"},onMouseLeave:g=>{g.currentTarget.style.background="#3a5a3a",g.currentTarget.style.transform="scale(1)"},children:["CONTINUER (Jour ",s.day,")"]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",width:"100%",maxWidth:"250px"},children:[l.jsx("button",{onClick:y,type:"button",style:{fontSize:"1.3rem",padding:"1.2rem 2.5rem",width:"100%",background:"#555",border:"2px solid #777",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",cursor:"pointer",color:"#fff",fontWeight:"bold",transition:"all 0.2s ease",position:"relative",zIndex:10},onMouseEnter:g=>{g.currentTarget.style.background="#666",g.currentTarget.style.transform="scale(1.05)"},onMouseLeave:g=>{g.currentTarget.style.background="#555",g.currentTarget.style.transform="scale(1)"},children:"NOUVELLE PARTIE"}),l.jsx("button",{onClick:()=>f(!0),type:"button",style:{fontSize:"1rem",padding:"0.8rem 1.5rem",width:"100%",background:"transparent",border:"1px solid #666",cursor:"pointer",color:"#aaa",fontWeight:"normal",transition:"all 0.2s ease"},onMouseEnter:g=>{g.currentTarget.style.borderColor="#888",g.currentTarget.style.color="#ccc"},onMouseLeave:g=>{g.currentTarget.style.borderColor="#666",g.currentTarget.style.color="#aaa"},children:" Comment jouer"})]}),c&&l.jsx("div",{onClick:()=>f(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"1rem"},children:l.jsxs("div",{onClick:g=>g.stopPropagation(),style:{background:"#2a2a2a",border:"2px solid #555",borderRadius:"8px",padding:"2rem",maxWidth:"500px",width:"100%",maxHeight:"80vh",overflowY:"auto"},children:[l.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1.5rem",color:"#fff",textAlign:"center"},children:"COMMENT JOUER"}),l.jsxs("div",{style:{fontSize:"1rem",lineHeight:"1.8",color:"#ddd",marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("strong",{style:{color:"#ca8"},children:"Objectif :"})," Survivez 20 jours et remboursez 80 de dette (+5/jour d'intrts)."]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("strong",{style:{color:"#ca8"},children:"Chaque jour :"}),l.jsxs("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem"},children:[l.jsx("li",{children:"Explorez les lieux pour trouver de l'or et des objets"}),l.jsx("li",{children:"Vendez au march pour gagner de l'or"}),l.jsx("li",{children:"Remboursez votre dette  l'usurier"}),l.jsx("li",{children:"Mangez  la taverne pour viter les pnalits"})]})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("strong",{style:{color:"#ca8"},children:"Combat :"})," Si vous perdez un combat, c'est la fin de partie. quipez-vous bien avant d'explorer."]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("strong",{style:{color:"#ca8"},children:"Progression :"})," Mme en perdant, vous gagnez de l'XP mta pour dbloquer de nouveaux contenus."]})]}),l.jsx("button",{onClick:()=>f(!1),style:{width:"100%",padding:"1rem",fontSize:"1.1rem",fontWeight:"bold",background:"#555",border:"2px solid #777",color:"#fff",cursor:"pointer",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:g=>{g.currentTarget.style.background="#666"},onMouseLeave:g=>{g.currentTarget.style.background="#555"},children:"Compris"})]})})]})}const Ul=["legs","torso","head","hands","weapon","offhand","accessory"];function pC(e){return Ul.filter(n=>e[n]).map(n=>`${n}:${e[n].id}`).join("_")}function rm(e){return`/sprites/${e.slot}_${e.rarity}_${e.id}.png`}function im(e,t){return`/sprites/${e}_${t}_placeholder.svg`}function Pr(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=()=>n(new Error(`Failed to load image: ${e}`)),r.src=e})}class hC{constructor(){ae(this,"cache",new Map);ae(this,"maxSize",100);ae(this,"accessCounter",0)}get(t){const n=this.cache.get(t);return n?(n.lastUsed=++this.accessCounter,n.imageData):null}set(t,n){this.cache.size>=this.maxSize&&!this.cache.has(t)&&this.evictLRU(),this.cache.set(t,{imageData:n,lastUsed:++this.accessCounter})}evictLRU(){let t=null,n=1/0;for(const[r,i]of this.cache.entries())i.lastUsed<n&&(n=i.lastUsed,t=r);t&&this.cache.delete(t)}clear(){this.cache.clear(),this.accessCounter=0}size(){return this.cache.size}}const sm=new hC,ie=64;function gC(){if(typeof window>"u")return!1;const e=window.innerWidth<400,t="ontouchstart"in window||navigator.maxTouchPoints>0,n=navigator.hardwareConcurrency<4,r=navigator.deviceMemory?navigator.deviceMemory<4:!1;return e&&t||n||r}async function om(e,t){const n=performance.now(),r=pC(e),i=t?`${r}_preview:${t.slot}:${t.id}`:r,s=sm.get(i);if(s)return s;const o=document.createElement("canvas");o.width=ie,o.height=ie;const a=o.getContext("2d");if(!a)throw new Error("Failed to get canvas context");const u=gC(),c=[];c.push(Pr("/sprites/body_base.svg").catch(()=>{const x=document.createElement("canvas");x.width=ie,x.height=ie;const S=x.getContext("2d");S.fillStyle="#444",S.fillRect(0,0,ie,ie);const h=new Image;return h.src=x.toDataURL(),h}).then(x=>({slot:"body",img:x})));for(const x of Ul){const S=e[x];if(S)if(u)c.push(rs(x,S.rarity).then(h=>({slot:x,img:h})));else{const h=rm(S);c.push(Pr(h).catch(()=>{const p=im(x,S.rarity);return Pr(p).catch(()=>rs(x,S.rarity))}).then(p=>({slot:x,img:p})))}}let f;if(u){f=[];for(const x of c)try{const S=await Promise.race([x,new Promise((h,p)=>{setTimeout(()=>p(new Error("Timeout")),500)})]);f.push(S)}catch{const S=await rs("unknown","common");f.push({slot:"unknown",img:S})}}else f=await Promise.all(c);const d=f.find(x=>x.slot==="body");d&&a.drawImage(d.img,0,0,ie,ie);for(const x of Ul){const S=f.find(h=>h.slot===x);S&&a.drawImage(S.img,0,0,ie,ie)}if(t){const x=rm(t);try{const S=await Pr(x).catch(()=>{const h=im(t.slot,t.rarity);return Pr(h.replace(".png",".svg")).catch(()=>rs(t.slot,t.rarity))});a.globalAlpha=.5,a.drawImage(S,0,0,ie,ie),a.globalAlpha=1}catch(S){console.warn("Failed to load preview image:",S)}}const m=a.getImageData(0,0,ie,ie);sm.set(i,m);const y=performance.now()-n,g=typeof window<"u"&&window.innerWidth<768?33:16;return y>g&&console.warn(`Render took ${y.toFixed(2)}ms (target: <${g}ms)`),m}function rs(e,t){return new Promise(n=>{const r=document.createElement("canvas");r.width=ie,r.height=ie;const i=r.getContext("2d"),s={common:"#808080",uncommon:"#2ecc71",rare:"#3498db",legendary:"#f39c12"};i.fillStyle=s[t]||"#808080",i.fillRect(0,0,ie,ie),i.strokeStyle="#000",i.lineWidth=2,i.strokeRect(1,1,ie-2,ie-2);const o=new Image;o.onload=()=>n(o),o.src=r.toDataURL()})}function Dt(e=768){const[t,n]=b.useState(()=>typeof window>"u"?!1:window.innerWidth<e);return b.useEffect(()=>{const r=()=>{n(window.innerWidth<e)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[e]),t}function Iy(){const[e,t]=b.useState(()=>{if(typeof window>"u")return!1;const n=window.innerWidth<400,r="ontouchstart"in window||navigator.maxTouchPoints>0,i=navigator.hardwareConcurrency<4,s=navigator.deviceMemory?navigator.deviceMemory<4:!1;return n&&r||i||s});return b.useEffect(()=>{(()=>{const r=performance.now();performance.now()-r>1&&t(!0)})()},[]),e}function Ly({equipment:e,showPreview:t,size:n=128}){const r=b.useRef(null),[i,s]=b.useState(!0),[o,a]=b.useState(null),u=Iy(),{narrativeCounters:c}=M(),f=c.humanite||0,d=c.cynisme||0,m=c.pragmatisme||0,y={humanite:Math.min(1,f/10),cynisme:Math.min(1,d/10),pragmatisme:Math.min(1,m/10)},g={humanite:f>=3,cynisme:d>=3,pragmatisme:m>=3},x=b.useMemo(()=>JSON.stringify(e),[e]),S=b.useMemo(()=>t?`${t.slot}:${t.id}`:null,[t]);b.useEffect(()=>{const p=r.current;if(!p)return;const v=p.getContext("2d",{alpha:!u,desynchronized:u,willReadFrequently:!1});if(!v)return;s(!0),a(null),(u?new Promise(T=>{setTimeout(()=>{om(e,t).then(T)},50)}):om(e,t)).then(T=>{v.clearRect(0,0,p.width,p.height),v.putImageData(T,0,0),s(!1)}).catch(T=>{console.error("Failed to render character:",T),a("Erreur de rendu"),s(!1)})},[x,S,u]);const h=p=>{if(!g[p])return;const v={humanite:"#4a4",cynisme:"#c44",pragmatisme:"#88a"},w=y[p],T=.15+w*.25;return{position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",borderRadius:"6px",border:`2px solid ${v[p]}`,opacity:T,boxShadow:`0 0 ${8+w*12}px ${v[p]}`,pointerEvents:"none",transition:"opacity 0.3s, box-shadow 0.3s"}};return l.jsxs("div",{style:{position:"relative",width:n,height:n,display:"flex",alignItems:"center",justifyContent:"center",background:"#1a1a1a",borderRadius:"4px",border:"1px solid #555"},children:[g.humanite&&l.jsx("div",{style:h("humanite")}),g.cynisme&&l.jsx("div",{style:h("cynisme")}),g.pragmatisme&&l.jsx("div",{style:h("pragmatisme")}),l.jsx("canvas",{ref:r,width:64,height:64,style:{width:n,height:n,imageRendering:"pixelated",position:"relative",zIndex:1}}),i&&l.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#888",fontSize:"0.8rem",zIndex:2},children:"Chargement..."}),o&&l.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#c44",fontSize:"0.8rem",textAlign:"center",zIndex:2},children:o})]})}function yC(){return typeof window<"u"&&window.document!==void 0}function vC(){return typeof navigator<"u"&&"vibrate"in navigator&&typeof navigator.vibrate=="function"}const vn=class vn{constructor(){ae(this,"enabled",!0);ae(this,"isWeb",!1);ae(this,"vibrationAvailable",!1);ae(this,"patterns",{loot_common:[10],loot_uncommon:[30],loot_rare:[50,30,50],loot_legendary:[100,50,100,50,200],combat_hit:[20],victory:[50,50,100],defeat:[200],button_press:[5]});this.isWeb=yC(),this.vibrationAvailable=vC(),this.loadSettings()}static getInstance(){return vn.instance||(vn.instance=new vn),vn.instance}triggerVisualFeedback(t){if(!this.isWeb||typeof document>"u")return;const n=document.createElement("div"),r=t==="light"?.05:t==="medium"?.1:.15;if(n.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, ${r});
      pointer-events: none;
      z-index: 99999;
      animation: haptic-flash 0.1s ease-out;
    `,!document.getElementById("haptic-flash-style")){const i=document.createElement("style");i.id="haptic-flash-style",i.textContent=`
        @keyframes haptic-flash {
          0% { opacity: 0; }
          50% { opacity: 1; }
          100% { opacity: 0; }
        }
      `,document.head.appendChild(i)}document.body.appendChild(n),setTimeout(()=>n.remove(),100)}vibrate(t){if(this.enabled){if(this.vibrationAvailable)try{navigator.vibrate(t);return}catch(n){console.warn("Vibration failed:",n)}if(this.isWeb){const n=t.reduce((i,s)=>i+s,0),r=n<20?"light":n<100?"medium":"strong";this.triggerVisualFeedback(r)}}}play(t){if(!this.enabled)return;const n=this.patterns[t];n&&this.vibrate(n)}setEnabled(t){this.enabled=t,this.saveSettings()}isEnabled(){return this.enabled}loadSettings(){try{const t=localStorage.getItem("hapticEnabled");t!==null&&(this.enabled=JSON.parse(t))}catch(t){console.warn("Failed to load haptic settings:",t)}}saveSettings(){try{localStorage.setItem("hapticEnabled",JSON.stringify(this.enabled))}catch(t){console.warn("Failed to save haptic settings:",t)}}};ae(vn,"instance",null);let Wl=vn;const sr=Wl.getInstance();function Ro(){const e=b.useCallback((s,o)=>{F.playSound(s,o)},[]),t=b.useCallback((s,o)=>{F.playMusic(s,o)},[]),n=b.useCallback(s=>{F.stopMusic(s)},[]),r=b.useCallback((s,o)=>{F.crossfadeMusic(s,o)},[]),i=b.useCallback(s=>{sr.play(s)},[]);return{playSound:e,playMusic:t,stopMusic:n,crossfadeMusic:r,playHaptic:i,setVolume:F.setVolume.bind(F),mute:F.mute.bind(F),unmute:F.unmute.bind(F),setMusicEnabled:F.setMusicEnabled.bind(F),setSfxEnabled:F.setSfxEnabled.bind(F),getSettings:F.getSettings.bind(F)}}function xC({compact:e=!1,isMobile:t=!1}){const{narrativeCounters:n}=M(),r=n.humanite||0,i=n.cynisme||0,s=n.pragmatisme||0;return e||t?l.jsxs("div",{style:{background:"#1a1a1a",padding:t?"0.5rem":"0.75rem",borderRadius:"4px",fontSize:t?"0.8rem":"0.85rem"},children:[l.jsx("div",{style:{marginBottom:"0.5rem",fontWeight:"bold",color:"#ddd"},children:"tat d'esprit"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[l.jsx("span",{style:{color:"#4a4"},children:"Humanit"}),l.jsxs("span",{style:{color:"#aaa"},children:[r,"/10"]})]}),l.jsx("div",{style:{width:"100%",height:"4px",background:"#2a2a2a",borderRadius:"2px",overflow:"hidden"},children:l.jsx("div",{style:{width:`${Math.min(100,r/10*100)}%`,height:"100%",background:"#4a4",transition:"width 0.3s"}})})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[l.jsx("span",{style:{color:"#c44"},children:"Cynisme"}),l.jsxs("span",{style:{color:"#aaa"},children:[i,"/10"]})]}),l.jsx("div",{style:{width:"100%",height:"4px",background:"#2a2a2a",borderRadius:"2px",overflow:"hidden"},children:l.jsx("div",{style:{width:`${Math.min(100,i/10*100)}%`,height:"100%",background:"#c44",transition:"width 0.3s"}})})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[l.jsx("span",{style:{color:"#88a"},children:"Pragmatisme"}),l.jsxs("span",{style:{color:"#aaa"},children:[s,"/10"]})]}),l.jsx("div",{style:{width:"100%",height:"4px",background:"#2a2a2a",borderRadius:"2px",overflow:"hidden"},children:l.jsx("div",{style:{width:`${Math.min(100,s/10*100)}%`,height:"100%",background:"#88a",transition:"width 0.3s"}})})]})]})]}):l.jsxs("div",{style:{background:"#2a2a2a",padding:t?"0.75rem":"1rem",borderRadius:"8px",border:"2px solid #555",marginTop:"1rem"},children:[l.jsx("div",{style:{fontSize:t?"1rem":"1.1rem",marginBottom:t?"0.75rem":"1rem",fontWeight:"bold"},children:"tat d'esprit"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"0.5rem",color:"#aaa"},children:"Compteurs narratifs"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[l.jsx("span",{style:{color:"#4a4"},children:"Humanit"}),l.jsxs("span",{style:{color:"#aaa"},children:[r,"/10"]})]}),l.jsx("div",{style:{width:"100%",height:"8px",background:"#1a1a1a",borderRadius:"4px",overflow:"hidden"},children:l.jsx("div",{style:{width:`${Math.min(100,r/10*100)}%`,height:"100%",background:"#4a4",transition:"width 0.3s"}})})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[l.jsx("span",{style:{color:"#c44"},children:"Cynisme"}),l.jsxs("span",{style:{color:"#aaa"},children:[i,"/10"]})]}),l.jsx("div",{style:{width:"100%",height:"8px",background:"#1a1a1a",borderRadius:"4px",overflow:"hidden"},children:l.jsx("div",{style:{width:`${Math.min(100,i/10*100)}%`,height:"100%",background:"#c44",transition:"width 0.3s"}})})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[l.jsx("span",{style:{color:"#88a"},children:"Pragmatisme"}),l.jsxs("span",{style:{color:"#aaa"},children:[s,"/10"]})]}),l.jsx("div",{style:{width:"100%",height:"8px",background:"#1a1a1a",borderRadius:"4px",overflow:"hidden"},children:l.jsx("div",{style:{width:`${Math.min(100,s/10*100)}%`,height:"100%",background:"#88a",transition:"width 0.3s"}})})]})]})]})})]})}function gc(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function SC(e,t){let n=0;const r=`${e}-${t}`;for(let i=0;i<r.length;i++){const s=r.charCodeAt(i);n=(n<<5)-n+s,n=n&n}return Math.abs(n%1e4)/1e4}const am=[{title:"Gagner de l'or",description:"Gagner {target}",type:"gold",target:50,xpReward:25},{title:"Gagner de l'or",description:"Gagner {target}",type:"gold",target:100,xpReward:50},{title:"Gagner de l'or",description:"Gagner {target}",type:"gold",target:150,xpReward:75},{title:"Survivre sans manger",description:"Survivre 1 jour sans manger",type:"survival",target:1,xpReward:30},{title:"Survivre plusieurs jours",description:"Survivre {target} jours conscutifs",type:"survival",target:2,xpReward:40},{title:"Parler  Morten",description:"Visiter l'usurier Morten",type:"npc",target:1,xpReward:20},{title:"Explorer les lieux",description:"Explorer {target} lieux diffrents",type:"exploration",target:3,xpReward:35},{title:"Explorer les lieux",description:"Explorer {target} lieux diffrents",type:"exploration",target:5,xpReward:50},{title:"Gagner un combat",description:"Gagner {target} combat(s)",type:"combat",target:1,xpReward:30},{title:"Gagner des combats",description:"Gagner {target} combat(s)",type:"combat",target:2,xpReward:50}];function lm(){const e=gc(),t=[],n=new Set;for(let r=0;r<3;r++){let i=0,s;do s=Math.floor(SC(e,r)*am.length),i++;while(n.has(s)&&i<10);n.add(s);const o=am[s],a=o.description.replace("{target}",String(o.target));t.push({id:`daily-${e}-${r}`,title:o.title,description:a,type:o.type,target:o.target,current:0,completed:!1,xpReward:o.xpReward})}return t}function bC(){try{const e=localStorage.getItem("souda_daily_objectives"),t=localStorage.getItem("souda_daily_objectives_date"),n=gc();if(!e||t!==n){const r=lm();return yc(r),r}return JSON.parse(e)}catch(e){return console.error("Erreur chargement objectifs quotidiens:",e),lm()}}function yc(e){try{localStorage.setItem("souda_daily_objectives",JSON.stringify(e)),localStorage.setItem("souda_daily_objectives_date",gc())}catch(t){console.error("Erreur sauvegarde objectifs quotidiens:",t)}}function wC(e,t,n=1){const r=e.map(s=>{if(s.completed||s.type!==t)return s;const o=s.current+n,a=o>=s.target;return{...s,current:Math.min(o,s.target),completed:a}}),i=r.filter(s=>{var o;return s.completed&&!((o=e.find(a=>a.id===s.id))!=null&&o.completed)});return yc(r),{objectives:r,completed:i}}const TC={};function Dy(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var s;const o=u=>u===null?null:JSON.parse(u,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const wi=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return wi(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return wi(r)(n)}}}},CC=(e,t)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,h)=>({...h,...S}),...t},o=!1;const a=new Set,u=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return e((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...S)},r,i);const f=wi(s.serialize),d=()=>{const S=s.partialize({...r()});let h;const p=f({state:S,version:s.version}).then(v=>c.setItem(s.name,v)).catch(v=>{h=v});if(h)throw h;return p},m=i.setState;i.setState=(S,h)=>{m(S,h),d()};const y=e((...S)=>{n(...S),d()},r,i);let g;const x=()=>{var S;if(!c)return;o=!1,a.forEach(p=>p(r()));const h=((S=s.onRehydrateStorage)==null?void 0:S.call(s,r()))||void 0;return wi(c.getItem.bind(c))(s.name).then(p=>{if(p)return s.deserialize(p)}).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==s.version){if(s.migrate)return s.migrate(p.state,p.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return p.state}).then(p=>{var v;return g=s.merge(p,(v=r())!=null?v:y),n(g,!0),d()}).then(()=>{h==null||h(g,void 0),o=!0,u.forEach(p=>p(g))}).catch(p=>{h==null||h(void 0,p)})};return i.persist={setOptions:S=>{s={...s,...S},S.getStorage&&(c=S.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(u.add(S),()=>{u.delete(S)})},x(),g||y},kC=(e,t)=>(n,r,i)=>{let s={storage:Dy(()=>localStorage),partialize:x=>x,version:0,merge:(x,S)=>({...S,...x}),...t},o=!1;const a=new Set,u=new Set;let c=s.storage;if(!c)return e((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...x)},r,i);const f=()=>{const x=s.partialize({...r()});return c.setItem(s.name,{state:x,version:s.version})},d=i.setState;i.setState=(x,S)=>{d(x,S),f()};const m=e((...x)=>{n(...x),f()},r,i);i.getInitialState=()=>m;let y;const g=()=>{var x,S;if(!c)return;o=!1,a.forEach(p=>{var v;return p((v=r())!=null?v:m)});const h=((S=s.onRehydrateStorage)==null?void 0:S.call(s,(x=r())!=null?x:m))||void 0;return wi(c.getItem.bind(c))(s.name).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==s.version){if(s.migrate)return[!0,s.migrate(p.state,p.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,p.state];return[!1,void 0]}).then(p=>{var v;const[w,T]=p;if(y=s.merge(T,(v=r())!=null?v:m),n(y,!0),w)return f()}).then(()=>{h==null||h(y,void 0),y=r(),o=!0,u.forEach(p=>p(y))}).catch(p=>{h==null||h(void 0,p)})};return i.persist={setOptions:x=>{s={...s,...x},x.storage&&(c=x.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:x=>(a.add(x),()=>{a.delete(x)}),onFinishHydration:x=>(u.add(x),()=>{u.delete(x)})},s.skipHydration||g(),y||m},jC=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((TC?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),CC(e,t)):kC(e,t),EC=jC;function MC(e){return e<=1?0:e===2?100:e<=5?100+(e-2)*150:e<=10?550+(e-5)*200:e<=20?1550+(e-10)*300:4550+(e-20)*500}function $l(e){let t=0;for(let n=2;n<=e;n++)t+=MC(n);return t}const um={globalXP:0,playerLevel:1,unlockedOrigins:["deserteur"],unlockedItems:[]},Li=Bh()(EC((e,t)=>({...um,addXP:n=>{const i=t().globalXP+n;return e({globalXP:i}),t().levelUp()},calculateRunXP:(n,r,i)=>{const s=n*50,o=Math.floor(r*.5),a=i*20;return s+o+a},levelUp:()=>{const n=t();let r=n.playerLevel,i=n.globalXP;const s=[];for(;r<30;){const o=$l(r+1);if(i>=o){r++;const a=RC(r);s.push(...a),a.forEach(u=>{if(u.startsWith("origin:")){const c=u.replace("origin:","");n.unlockedOrigins.includes(c)||t().unlockOrigin(c)}else if(u.startsWith("item:")){const c=u.replace("item:","");n.unlockedItems.includes(c)||t().unlockItem(c)}})}else break}return r>n.playerLevel?(e({playerLevel:r}),{leveledUp:!0,newLevel:r,unlockedContent:s}):{leveledUp:!1}},unlockOrigin:n=>{const r=t();r.unlockedOrigins.includes(n)||e({unlockedOrigins:[...r.unlockedOrigins,n]})},unlockItem:n=>{const r=t();r.unlockedItems.includes(n)||e({unlockedItems:[...r.unlockedItems,n]})},reset:()=>{e(um)}}),{name:"souda-meta-progression",storage:Dy(()=>({getItem:async e=>{try{const r=(await Ta()).transaction(["metaProgression"],"readonly").objectStore("metaProgression");return new Promise((i,s)=>{const o=r.get(e);o.onsuccess=()=>{const a=o.result;i(a?JSON.stringify(a.value):null)},o.onerror=()=>s(o.error)})}catch(t){return console.error("Erreur chargement mta-progression:",t),null}},setItem:async(e,t)=>{try{const i=(await Ta()).transaction(["metaProgression"],"readwrite").objectStore("metaProgression");return new Promise((s,o)=>{const a=i.put({key:e,value:JSON.parse(t)});a.onsuccess=()=>s(),a.onerror=()=>o(a.error)})}catch(n){console.error("Erreur sauvegarde mta-progression:",n)}},removeItem:async e=>{try{const r=(await Ta()).transaction(["metaProgression"],"readwrite").objectStore("metaProgression");return new Promise((i,s)=>{const o=r.delete(e);o.onsuccess=()=>i(),o.onerror=()=>s(o.error)})}catch(t){console.error("Erreur suppression mta-progression:",t)}}}))}));function Ta(){return new Promise((e,t)=>{if(typeof indexedDB>"u"){t(new Error("IndexedDB not available"));return}const n=indexedDB.open("souda_meta",4);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains("metaProgression")||i.createObjectStore("metaProgression"),i.objectStoreNames.contains("tutorial")||i.createObjectStore("tutorial"),i.objectStoreNames.contains("unlocks")||i.createObjectStore("unlocks"),i.objectStoreNames.contains("hallOfFame")||i.createObjectStore("hallOfFame",{keyPath:"id"})}})}function RC(e){const t=[];return e===2&&t.push("origin:veteran"),e===5&&t.push("origin:pillard"),e===8&&t.push("origin:moine"),e===12&&t.push("origin:noble"),e===15&&t.push("origin:survivant"),e===10&&t.push("item:heavy_weapons"),e===15&&t.push("item:plate_armor"),e===20&&t.push("item:legendary_items"),e===25&&t.push("item:noble_set"),e===30&&t.push("item:master_set"),t}function PC(e,t){const n=$l(t),r=$l(t+1),i=e-n,s=r-n,o=t>=30?1:i/s;return{currentLevelXP:i,nextLevelXP:s,progress:Math.max(0,Math.min(1,o))}}function IC(){const[e,t]=b.useState([]),{addXP:n}=Li(),{gold:r,combatsWon:i,day:s,phase:o,persistentLocations:a,dailyLocations:u,hasEatenToday:c}=M(),f=b.useRef(0),d=b.useRef(0),m=b.useRef(!1),y=b.useRef(new Set);return b.useEffect(()=>{const g=bC();t(g),f.current=r,d.current=i,y.current=new Set(g.filter(x=>x.completed).map(x=>x.id))},[]),b.useEffect(()=>{if(o==="morten"&&!m.current&&(m.current=!0,e.find(x=>x.type==="npc"&&!x.completed))){const{objectives:x,completed:S}=wC(e,"npc",1);S.forEach(h=>{n(h.xpReward)}),t(x)}o!=="morten"&&(m.current=!1)},[o,e,n]),b.useEffect(()=>{if(e.length===0)return;const g=e.map(h=>{if(h.completed)return h;let p=h.current;switch(h.type){case"gold":r>=h.target&&(p=h.target);break;case"combat":i>=h.target&&(p=Math.min(i,h.target));break;case"exploration":const v=[...a,...u].filter(w=>w.explored).length;v>=h.target&&(p=Math.min(v,h.target));break;case"survival":!c&&s>=2&&h.current<h.target&&(p=h.target);break}return{...h,current:p,completed:p>=h.target}}),x=g.filter((h,p)=>{var v;return h.completed&&!((v=e[p])!=null&&v.completed)});g.some((h,p)=>{var v,w;return h.current!==((v=e[p])==null?void 0:v.current)||h.completed!==((w=e[p])==null?void 0:w.completed)})&&(yc(g),x.forEach(h=>{h.completed&&h.xpReward>0&&!y.current.has(h.id)&&(y.current.add(h.id),n(h.xpReward))}),t(g))},[r,i,a,u,c,s,e,n]),e.length===0?null:l.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555",marginBottom:"1rem"},children:[l.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",marginBottom:"0.75rem",color:"#fff",textAlign:"center"},children:" OBJECTIFS QUOTIDIENS"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.map((g,x)=>l.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:x*.1},style:{background:g.completed?"#1a3a1a":"#1a1a1a",border:`1px solid ${g.completed?"#2ecc71":"#444"}`,borderRadius:"4px",padding:"0.75rem",fontSize:"0.85rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem"},children:[l.jsxs("div",{style:{color:g.completed?"#2ecc71":"#ccc",fontWeight:g.completed?"bold":"normal"},children:[g.completed?"":""," ",g.title]}),g.completed&&l.jsxs("div",{style:{fontSize:"0.75rem",color:"#2ecc71"},children:["+",g.xpReward," XP"]})]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"#aaa",marginBottom:"0.25rem"},children:g.description}),l.jsx("div",{style:{width:"100%",height:"4px",background:"#1a1a1a",borderRadius:"2px",overflow:"hidden",marginTop:"0.25rem"},children:l.jsx(P.div,{initial:{width:0},animate:{width:`${Math.min(100,g.current/g.target*100)}%`},transition:{duration:.5},style:{height:"100%",background:g.completed?"#2ecc71":"#4a9eff",borderRadius:"2px"}})}),l.jsxs("div",{style:{fontSize:"0.75rem",color:"#888",marginTop:"0.25rem",textAlign:"right"},children:[g.current," / ",g.target]})]},g.id))})]})}function LC(e,t=500){const[n,r]=b.useState(!1),i=b.useRef(null),s=()=>{n||(r(!0),e(),i.current=setTimeout(()=>{r(!1)},t))};return b.useEffect(()=>()=>{i.current&&clearTimeout(i.current)},[]),[s,n]}function Ay({showActions:e=!1,showHunger:t=!1}){const{day:n,debt:r,gold:i,reputation:s,actionsRemaining:o,hasEatenToday:a}=M(),u=Dt(),[c,f]=b.useState(!1),[d,m]=b.useState(!1),y=20-n,g=80+5*19,S=r/g*100>80,h=!a;return b.useEffect(()=>{if(S){f(!0);const p=setTimeout(()=>f(!1),2e3);return()=>clearTimeout(p)}},[S,r]),b.useEffect(()=>{if(h&&t){m(!0);const p=setTimeout(()=>m(!1),2e3);return()=>clearTimeout(p)}},[h,t]),l.jsxs("div",{style:{position:"sticky",top:0,zIndex:100,background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",padding:u?"0.5rem":"0.6rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem",fontSize:u?"0.75rem":"0.85rem",minHeight:u?"40px":"44px",maxHeight:u?"60px":"64px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontWeight:"bold",color:"#fff"},children:[l.jsx("span",{style:{fontSize:u?"0.7rem":"0.8rem",opacity:.7},children:"J"}),l.jsx("span",{style:{fontSize:u?"0.9rem":"1rem",color:y<=5?"#c44":y<=10?"#ca8":"#fff"},children:y}),l.jsx("span",{style:{fontSize:u?"0.7rem":"0.8rem",opacity:.5},children:"/20"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:u?"0.75rem":"1rem"},children:[l.jsxs(P.div,{animate:c?{scale:[1,1.1,1],color:["#c44","#f44","#c44"]}:{},transition:{duration:.5,repeat:c?1/0:0,repeatDelay:1},style:{display:"flex",alignItems:"center",gap:"0.25rem",color:S?"#c44":"#ca8",fontWeight:S?"bold":"normal"},children:[l.jsx("span",{style:{fontSize:u?"0.7rem":"0.8rem"},children:""}),l.jsx("span",{children:r})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#ca8",fontWeight:"bold"},children:[l.jsx("span",{style:{fontSize:u?"0.7rem":"0.8rem"},children:""}),l.jsx("span",{children:i})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:u?"0.5rem":"0.75rem"},children:[t&&l.jsxs(P.div,{animate:d?{scale:[1,1.15,1],color:["#c44","#f44","#c44"]}:{},transition:{duration:.5,repeat:d?1/0:0,repeatDelay:1},style:{display:"flex",alignItems:"center",gap:"0.25rem",color:h?"#c44":"#666",fontSize:u?"0.7rem":"0.75rem",fontWeight:h?"bold":"normal"},title:h?"Tu as faim !":"Rassasi",children:[l.jsx("span",{children:""}),l.jsx("span",{children:a?"":""})]}),e&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:o===0?"#c44":"#888",fontSize:u?"0.7rem":"0.75rem"},children:[l.jsx("span",{children:""}),l.jsx("span",{children:o})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.15rem",color:"#666",fontSize:u?"0.65rem":"0.7rem"},children:l.jsx("span",{children:"".repeat(s)})})]})]})}function DC(){const{playerStats:e,equipment:t,goToExploration:n,openInventory:r}=M(),{playSound:i,playHaptic:s}=Ro(),o=Dt(),[a,u]=b.useState(!1),[c,f]=b.useState(!1),d=()=>{i("ui_open"),s("button_press"),M.setState({phase:"marche"})},m=()=>{i("ui_open"),s("button_press"),M.setState({phase:"morten"})},y=()=>{i("ui_open"),s("button_press"),M.setState({phase:"settings"})},g=()=>{i("ui_open"),s("button_press"),r()},x=()=>{if(!a){if(e.atk<8){f(!0);return}u(!0),i("ui_open"),s("button_press"),n(),setTimeout(()=>u(!1),500)}},S=()=>{f(!1),u(!0),i("ui_open"),s("button_press"),n(),setTimeout(()=>u(!1),500)},[h,p]=LC(x,500),v=Gh(e);return l.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[l.jsx(Ay,{showHunger:!0}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",flex:1,padding:"1rem",overflowY:"auto",justifyContent:"center"},children:[l.jsx("div",{style:{textAlign:"center",fontSize:o?"1rem":"1.1rem",fontWeight:"bold",color:"#888",opacity:.7,marginBottom:"0.5rem"},children:"AUBE"}),l.jsx("div",{style:{fontSize:o?"1.1rem":"1.2rem",lineHeight:"1.8",color:"#ddd",marginBottom:"1.5rem",padding:"1rem",background:"rgba(26, 26, 26, 0.6)",borderRadius:"4px",fontStyle:"italic"},children:`"Bourg-Creux. Des murs. Un toit. a fera l'affaire. Pour l'instant."`}),l.jsxs("div",{style:{background:"#2a2a2a",padding:o?"1rem":"1.5rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsxs("div",{style:{display:"flex",gap:o?"0.75rem":"1rem",alignItems:"center",flexWrap:o?"wrap":"nowrap",marginBottom:"1rem"},children:[l.jsx(Ly,{equipment:t,size:o?80:96}),l.jsxs("div",{style:{padding:o?"0.75rem":"1rem",background:"#1a1a1a",borderRadius:"4px",fontSize:o?"0.85rem":"0.9rem",color:"#ccc",lineHeight:"1.6",flex:1,minWidth:o?"100%":"auto"},children:[l.jsx("div",{style:{marginBottom:"0.3rem"},children:v.attack}),l.jsx("div",{style:{marginBottom:"0.3rem"},children:v.defense}),l.jsx("div",{children:v.speed})]})]}),l.jsxs("details",{style:{marginBottom:"1rem"},children:[l.jsx("summary",{style:{cursor:"pointer",color:"#aaa",fontSize:"0.9rem",padding:"0.5rem",userSelect:"none"},children:" Progression et objectifs"}),l.jsxs("div",{style:{marginTop:"0.75rem"},children:[l.jsx(xC,{compact:o}),l.jsx(IC,{})]})]})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:o?"0.75rem":"1rem"},children:[l.jsxs("div",{style:{display:"flex",gap:o?"0.5rem":"1rem",flexWrap:o?"wrap":"nowrap"},children:[l.jsx("button",{onClick:g,style:{fontSize:"1rem",padding:"1rem",minHeight:o?"48px":"44px",flex:1,minWidth:o?"calc(50% - 0.25rem)":"auto"},children:"INVENTAIRE"}),l.jsx("button",{onClick:d,style:{fontSize:"1rem",padding:"1rem",minHeight:o?"48px":"44px",flex:1,minWidth:o?"calc(50% - 0.25rem)":"auto"},children:"MARCH"})]}),l.jsxs("div",{style:{display:"flex",gap:o?"0.5rem":"1rem",flexWrap:o?"wrap":"nowrap"},children:[l.jsx("button",{onClick:m,style:{fontSize:"1rem",padding:"1rem",minHeight:o?"48px":"44px",flex:1,minWidth:o?"calc(50% - 0.25rem)":"auto"},children:"USURIER"}),l.jsx("button",{onClick:()=>{i("ui_open"),s("button_press"),M.setState({phase:"forge"})},style:{fontSize:"1rem",padding:"1rem",minHeight:o?"48px":"44px",flex:1,minWidth:o?"calc(50% - 0.25rem)":"auto"},children:"FORGE"})]}),l.jsxs("div",{style:{display:"flex",gap:o?"0.5rem":"1rem",flexWrap:o?"wrap":"nowrap"},children:[l.jsx("button",{onClick:()=>{i("ui_open"),s("button_press"),M.setState({phase:"taverne"})},style:{fontSize:"1rem",padding:"1rem",minHeight:o?"48px":"44px",flex:o?"1 1 100%":1,minWidth:o?"100%":"auto"},children:"TAVERNE"}),l.jsx("button",{onClick:y,style:{fontSize:o?"0.9rem":"1.1rem",padding:o?"0.875rem 1rem":"0.75rem 1.5rem",minHeight:o?"48px":"44px",background:"#2a2a2a",border:"2px solid #444",flex:o?"1 1 calc(50% - 0.25rem)":"none"},children:"PARAMTRES"}),l.jsx("button",{onClick:h,disabled:p||a,style:{fontSize:o?"1rem":"1.1rem",padding:"1rem",minHeight:o?"48px":"44px",flex:o?"1 1 100%":2,opacity:p||a?.6:1,cursor:p||a?"not-allowed":"pointer"},children:a?"CHARGEMENT...":"PARTIR EN MISSION "})]})]})]}),l.jsx(Oe,{children:c&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"1rem"},onClick:()=>f(!1),children:l.jsxs(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:w=>w.stopPropagation(),style:{background:"#2a2a2a",padding:"2rem",borderRadius:"8px",border:"2px solid #c44",maxWidth:"400px",width:"100%"},children:[l.jsx("div",{style:{fontSize:"1.3rem",fontWeight:"bold",marginBottom:"1rem",color:"#c44",textAlign:"center"},children:" ATTENTION"}),l.jsxs("div",{style:{fontSize:"1rem",color:"#ccc",lineHeight:"1.6",marginBottom:"1.5rem",textAlign:"center"},children:["Tes stats sont faibles (ATK: ",e.atk,").",l.jsx("br",{}),l.jsx("br",{}),"Explorer sans quipement adquat est trs dangereux. Tu risques de perdre au combat.",l.jsx("br",{}),l.jsx("br",{}),l.jsx("strong",{style:{color:"#ca8"},children:"quipe-toi d'abord dans l'inventaire."})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[l.jsx("button",{onClick:S,style:{fontSize:"1rem",padding:"0.75rem 1.5rem",background:"#c44",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontWeight:"bold"},children:"CONTINUER QUAND MME"}),l.jsx("button",{onClick:()=>f(!1),style:{fontSize:"1rem",padding:"0.75rem 1.5rem",background:"#555",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"ANNULER"})]})]})})})]})}function AC({enemy:e,showStats:t=!1}){return l.jsxs(P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[l.jsx(P.div,{initial:{scale:.5},animate:{scale:1},transition:{duration:.5,delay:.2},style:{width:"64px",height:"64px",background:"#444",border:"2px solid #666",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem"},children:""}),l.jsx(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},style:{fontSize:"1.3rem",fontWeight:"bold",color:"#fff"},children:e.name}),l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.6},style:{fontSize:"0.9rem",color:"#999",fontStyle:"italic",textAlign:"center",maxWidth:"300px"},children:e.description}),t&&l.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.8},style:{fontSize:"0.85rem",color:"#aaa",display:"flex",gap:"1rem"},children:[l.jsxs("span",{children:["ATK: ",e.atk]}),l.jsxs("span",{children:["DEF: ",e.def]}),l.jsxs("span",{children:["VIT: ",e.vit]})]})]})}function _C({onComplete:e}){const[t,n]=b.useState(0);return b.useEffect(()=>{const s=[];for(let a=0;a<4;a++){const u=window.setTimeout(()=>{n(d=>d+1);const c=["hit_01","hit_02","hit_03"],f=c[Math.floor(Math.random()*c.length)];F.playSound(f,.8),sr.play("combat_hit")},a*500);s.push(u)}const o=window.setTimeout(()=>{e()},2e3);return()=>{s.forEach(a=>clearTimeout(a)),clearTimeout(o)}},[e]),l.jsxs("div",{style:{position:"relative",width:"100%",height:"200px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:[Array.from({length:t}).map((r,i)=>l.jsx(P.div,{initial:{opacity:0,scale:.5},animate:{opacity:[0,1,0],scale:[.5,1.5,.5]},transition:{duration:.3,times:[0,.5,1]},style:{position:"absolute",width:"100px",height:"100px",background:"radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 70%)",borderRadius:"50%",pointerEvents:"none"}},i)),l.jsx(P.div,{animate:{x:[0,-5,5,-5,5,0],y:[0,-3,3,-3,3,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{fontSize:"3rem",color:"#fff"},children:""}),Array.from({length:10}).map((r,i)=>l.jsx(P.div,{initial:{x:0,y:0,opacity:0},animate:{x:(Math.random()-.5)*200,y:(Math.random()-.5)*200,opacity:[0,1,0]},transition:{duration:1,delay:Math.random()*1,repeat:1/0},style:{position:"absolute",width:"4px",height:"4px",background:"#fff",borderRadius:"50%",pointerEvents:"none"}},i))]})}function zC({result:e,onComplete:t}){const r=(()=>{switch(e.outcome){case"crushing":return{text:" VICTOIRE CRASANTE",color:"#ffd700",bgColor:"rgba(255, 215, 0, 0.1)"};case"victory":return{text:" VICTOIRE",color:"#4a8",bgColor:"rgba(68, 170, 136, 0.1)"};case"costly":return{text:" VICTOIRE COTEUSE",color:"#ca8",bgColor:"rgba(204, 170, 136, 0.1)"};case"flee":return{text:" FUITE",color:"#888",bgColor:"rgba(136, 136, 136, 0.1)"};case"defeat":return{text:" MORT",color:"#c44",bgColor:"rgba(204, 68, 68, 0.1)"}}})(),i=e.ratio>=.4&&e.ratio<=.5&&e.outcome!=="defeat";return b.useEffect(()=>{const s=setTimeout(()=>{t()},1500);return()=>clearTimeout(s)},[t]),l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},style:{background:"#2a2a2a",padding:"2rem",borderRadius:"8px",border:`2px solid ${r.color}`,textAlign:"center",backgroundImage:`linear-gradient(${r.bgColor}, ${r.bgColor})`},children:[l.jsx(P.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.3,type:"spring"},style:{fontSize:"1.5rem",fontWeight:"bold",color:r.color,marginBottom:"1rem"},children:r.text}),l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},style:{fontSize:"1rem",color:"#ccc",marginBottom:"1rem",lineHeight:"1.6"},children:e.message}),i&&l.jsx(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},style:{marginTop:"1rem",padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px",fontSize:"0.9rem",color:"#c44",fontStyle:"italic",border:"1px solid #c44"},children:" Vous avez frl la mort. Un coup de plus et c'en tait fini."}),e.nearMissMessage&&!i&&l.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{marginTop:"1rem",padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px",fontSize:"0.9rem",color:"#ddd",fontStyle:"italic"},children:[" ",e.nearMissMessage]}),e.gold&&l.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},style:{marginTop:"1rem",fontSize:"1.3rem",color:"#ddd",fontWeight:"bold"},children:["+",e.gold,""]}),e.durabilityLoss.length>0&&l.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},style:{marginTop:"1rem",fontSize:"0.9rem",color:e.outcome==="costly"?"#ca8":"#c84",fontStyle:"italic"},children:[" ",e.outcome==="costly"?"quipement endommag":"Matriel perdu"," (",e.durabilityLoss.map(s=>`-${s.amount}%`).join(", "),")"]})]})}function _y(){const[e,t]=b.useState(!1),n=eo(0),r=eo(0);return{isShaking:e,triggerShake:(s=3,o=500)=>{if(e)return;t(!0);const a=Array.from({length:10},()=>({x:(Math.random()-.5)*s*10,y:(Math.random()-.5)*s*10})),u=Date.now(),c=()=>{const d=(Date.now()-u)/o;if(d>=1){n.set(0),r.set(0),t(!1);return}const m=1-Math.pow(1-d,3),y=Math.floor(m*(a.length-1)),g=a[y];n.set(g.x*(1-m)),r.set(g.y*(1-m)),requestAnimationFrame(c)};requestAnimationFrame(c)},shakeStyle:{x:n,y:r}}}function zy({children:e,intensity:t=3,duration:n=500,trigger:r=!1}){const i=eo(0),s=eo(0);return b.useEffect(()=>{if(r){const o=Array.from({length:10},()=>({x:(Math.random()-.5)*t*10,y:(Math.random()-.5)*t*10})),a=Date.now(),u=()=>{const f=(Date.now()-a)/n;if(f>=1){i.set(0),s.set(0);return}const d=1-Math.pow(1-f,3),m=Math.floor(d*(o.length-1)),y=o[m];i.set(y.x*(1-d)),s.set(y.y*(1-d)),requestAnimationFrame(u)};requestAnimationFrame(u)}},[r,t,n,i,s]),l.jsx(P.div,{style:{x:i,y:s,width:"100%",height:"100%"},children:e})}function OC({enemy:e,playerStats:t,onCombatEnd:n}){const[r,i]=b.useState("anticipation"),[s,o]=b.useState(null),[a,u]=b.useState(!1);b.useEffect(()=>{const m=qh(t,e);o(m),(m.outcome==="costly"||m.outcome==="flee"||m.outcome==="defeat")&&(u(!0),setTimeout(()=>u(!1),500));const y=M.getState();rt({...y,currentEnemy:e,combatResult:m,currentEvent:"combat"}).catch(()=>{})},[e,t]),b.useEffect(()=>{if(r==="anticipation"){F.crossfadeMusic("ambient_combat",1e3),F.playSound("combat_start");const m=M.getState();rt({...m,currentEnemy:e,combatResult:s,currentEvent:"combat",phase:"exploration"}).catch(()=>{});const y=setTimeout(()=>{i("resolution")},500);return()=>clearTimeout(y)}},[r,e,s]),b.useEffect(()=>{if(r==="resolution"&&s){const m=M.getState();rt({...m,currentEnemy:e,combatResult:s,currentEvent:"combat",phase:"exploration"}).catch(()=>{})}},[r,e,s]),b.useEffect(()=>{if(r==="result"&&s){const m=M.getState();rt({...m,currentEnemy:e,combatResult:s,currentEvent:"combat",phase:"exploration"}).catch(()=>{})}},[r,e,s]),b.useEffect(()=>(r==="complete"&&F.crossfadeMusic("ambient_explore",1e3),()=>{r==="complete"&&F.crossfadeMusic("ambient_explore",1e3)}),[r]);const c=()=>{i("result")},f=()=>{i("complete"),s&&(s.outcome==="defeat"?F.playSound("defeat"):s.outcome==="flee"?F.playSound("flee"):F.playSound("victory"),n(s))},d={hidden:{opacity:0},visible:{opacity:.7},exit:{opacity:0}};return l.jsx(zy,{intensity:4,duration:500,trigger:a,children:l.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"1rem"},children:[l.jsx(Oe,{children:r==="anticipation"&&l.jsx(P.div,{variants:d,initial:"hidden",animate:"visible",exit:"exit",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"#000",zIndex:1}})}),l.jsx(Oe,{children:r==="anticipation"&&l.jsxs(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.5},style:{position:"relative",zIndex:2,width:"100%",maxWidth:"500px",textAlign:"center"},children:[l.jsx(P.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"2rem",color:"#fff"},children:" COMBAT !"}),l.jsx(AC,{enemy:e})]})}),l.jsx(Oe,{children:r==="resolution"&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},style:{width:"100%",maxWidth:"500px",textAlign:"center"},children:l.jsx(_C,{onComplete:c})})}),l.jsx(Oe,{children:r==="result"&&s&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},style:{width:"100%",maxWidth:"500px"},children:l.jsx(zC,{result:s,onComplete:f})})}),r==="complete"&&l.jsx("div",{style:{opacity:0}})]})})}const VC={head:"",torso:"",legs:"",hands:"",weapon:"",offhand:"",accessory:""},BC={light:"Lger",heavy:"Lourd",rusty:"Rouill",bloody:"Ensanglant",blessed:"Bni",stolen:"Vol",solid:"Solide"};function cm({item:e,showBack:t=!1}){const n=dt(e.rarity);return t?l.jsxs("div",{style:{width:"200px",height:"280px",background:"#333",border:"3px solid #555",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[l.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",background:"repeating-linear-gradient(45deg, #2a2a2a, #2a2a2a 10px, #333 10px, #333 20px)",opacity:.3}}),l.jsx("div",{style:{fontSize:"3rem",color:"#555",zIndex:1},children:"?"})]}):l.jsxs("div",{style:{width:"200px",height:"280px",background:"#2a2a2a",border:`3px solid ${n}`,borderRadius:"12px",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem",position:"relative",overflow:"hidden"},children:[l.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:n}}),l.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",fontSize:"1.2rem",color:n},children:e.rarity==="common"?"":e.rarity==="uncommon"?"":e.rarity==="rare"?"":""}),l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:e.cursed?"#c44":n,marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.name,e.cursed&&l.jsx("span",{style:{fontSize:"0.7rem",padding:"0.2rem 0.4rem",background:"#c44",color:"#fff",borderRadius:"4px",fontWeight:"bold"},children:"COMPROMIS"})]}),l.jsx("div",{style:{fontSize:"0.75rem",color:"#999",textTransform:"uppercase"},children:hi(e.rarity)}),e.cursed&&l.jsxs("div",{style:{fontSize:"0.7rem",color:"#c44",padding:"0.75rem",background:"#2a1a1a",borderRadius:"4px",border:"2px solid #c44",marginTop:"0.5rem"},children:[l.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:" ITEM COMPROMIS"}),e.curseDescription&&l.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"0.7rem",color:"#a88",lineHeight:"1.4"},children:e.curseDescription}),e.curseEffect&&l.jsxs("div",{style:{marginBottom:"0.5rem",fontSize:"0.7rem",color:"#f44",fontWeight:"bold"},children:["Effet : ",e.curseEffect]}),(e.hiddenMalus||e.visibleMalus)&&l.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #c44"},children:[l.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.25rem",fontSize:"0.7rem"},children:"Malus appliqus :"}),e.visibleMalus&&l.jsxs("div",{style:{fontSize:"0.65rem"},children:[e.visibleMalus.atk&&l.jsxs("div",{style:{color:"#f44"},children:[" ATK: -",e.visibleMalus.atk]}),e.visibleMalus.def&&l.jsxs("div",{style:{color:"#f44"},children:[" DEF: -",e.visibleMalus.def]}),e.visibleMalus.vit&&l.jsxs("div",{style:{color:"#f44"},children:[" VIT: -",e.visibleMalus.vit]})]}),e.hiddenMalus&&l.jsxs("div",{style:{fontSize:"0.65rem",marginTop:"0.25rem",color:"#a88",fontStyle:"italic"},children:[e.hiddenMalus.atk&&l.jsxs("div",{children:[" ATK: -",e.hiddenMalus.atk," (malus cach, appliqu automatiquement)"]}),e.hiddenMalus.def&&l.jsxs("div",{children:[" DEF: -",e.hiddenMalus.def," (malus cach, appliqu automatiquement)"]}),e.hiddenMalus.vit&&l.jsxs("div",{children:[" VIT: -",e.hiddenMalus.vit," (malus cach, appliqu automatiquement)"]})]})]}),l.jsx("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #c44",fontSize:"0.65rem",color:"#888",fontStyle:"italic"},children:" Les items compromis ont des dfauts (lourdeur, rputation, etc.). Les malus sont appliqus mme si non visibles."})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",color:"#ccc"},children:[l.jsx("span",{children:VC[e.slot]||""}),l.jsx("span",{style:{textTransform:"capitalize"},children:e.slot})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",fontSize:"0.85rem",color:"#aaa",marginTop:"0.5rem"},children:[e.stats.atk>0&&l.jsxs("div",{children:["Attaque : ",l.jsxs("span",{style:{color:"#fff"},children:["+",e.stats.atk]})]}),e.stats.def>0&&l.jsxs("div",{children:["Dfense : ",l.jsxs("span",{style:{color:"#fff"},children:["+",e.stats.def]})]}),e.stats.vit>0&&l.jsxs("div",{children:["Vitesse : ",l.jsxs("span",{style:{color:"#fff"},children:["+",e.stats.vit]})]})]}),e.properties.length>0&&l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",marginTop:"0.5rem"},children:e.properties.map((r,i)=>l.jsx("div",{style:{fontSize:"0.7rem",padding:"0.2rem 0.4rem",background:"#1a1a1a",border:`1px solid ${n}`,borderRadius:"4px",color:n},children:BC[r]||r},i))}),l.jsx("div",{style:{marginTop:"auto",paddingTop:"0.5rem"},children:l.jsx(gi,{item:e,size:"small"})}),l.jsx("div",{style:{fontSize:"0.7rem",color:"#777",fontStyle:"italic",marginTop:"0.5rem",lineHeight:"1.3",maxHeight:"2.6rem",overflow:"hidden"},children:e.description})]})}function NC({rarity:e}){const n=(()=>{switch(e){case"common":return{count:8,color:"#888",size:3,speed:50,duration:.3};case"uncommon":return{count:15,color:"#4a8",size:4,speed:80,duration:.4};case"rare":return{count:25,color:"#4af",size:5,speed:120,duration:.5};case"legendary":return{count:40,color:"#ffd700",size:6,speed:150,duration:.6}}})();return l.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",width:"200px",height:"280px",pointerEvents:"none",transform:"translate(-50%, -50%)"},children:[Array.from({length:n.count}).map((r,i)=>{const o=360/n.count*i*Math.PI/180;return l.jsx(P.div,{initial:{x:0,y:0,opacity:1,scale:1},animate:{x:Math.cos(o)*n.speed,y:Math.sin(o)*n.speed,opacity:[1,1,0],scale:[1,1.5,0]},transition:{duration:n.duration,times:[0,.5,1],ease:"easeOut"},style:{position:"absolute",top:"50%",left:"50%",width:`${n.size}px`,height:`${n.size}px`,background:n.color,borderRadius:"50%",boxShadow:`0 0 ${n.size*2}px ${n.color}`}},i)}),(e==="rare"||e==="legendary")&&l.jsx(P.div,{initial:{scale:0,opacity:0},animate:{scale:[0,1.5,1.2],opacity:[0,.6,0]},transition:{duration:n.duration,times:[0,.5,1]},style:{position:"absolute",top:"50%",left:"50%",width:"300px",height:"300px",border:`2px solid ${n.color}`,borderRadius:"50%",transform:"translate(-50%, -50%)",opacity:.3}}),e==="legendary"&&l.jsx(l.Fragment,{children:Array.from({length:8}).map((r,i)=>{const s=45*i;return l.jsx(P.div,{initial:{scale:0,opacity:0},animate:{scale:[0,1,0],opacity:[0,1,0],rotate:s},transition:{duration:n.duration,times:[0,.3,1]},style:{position:"absolute",top:"50%",left:"50%",width:"4px",height:"100px",background:`linear-gradient(to bottom, ${n.color}, transparent)`,transformOrigin:"top center",transform:`translate(-50%, -50%) rotate(${s}deg)`}},i)})})]})}function FC({item:e,onRevealComplete:t,autoStart:n=!0}){const[r,i]=b.useState(n?"hidden":"revealed");return b.useEffect(()=>{if(!n)return;const s=setTimeout(()=>{i("shaking")},300);return()=>clearTimeout(s)},[n]),b.useEffect(()=>{if(r!=="shaking")return;const s=setTimeout(()=>{i("flipping");const o={common:"loot_common",uncommon:"loot_uncommon",rare:"loot_rare",legendary:"loot_legendary"},a={common:"loot_common",uncommon:"loot_uncommon",rare:"loot_rare",legendary:"loot_legendary"},u=o[e.rarity],c=a[e.rarity];u&&F.playSound(u),c&&sr.play(c)},500);return()=>clearTimeout(s)},[r]),b.useEffect(()=>{if(r!=="flipping")return;const s=setTimeout(()=>{i("revealed")},400);return()=>clearTimeout(s)},[r]),b.useEffect(()=>{if(r!=="revealed")return;const s=setTimeout(()=>{i("complete"),t()},300);return()=>clearTimeout(s)},[r,t]),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"2rem",flex:1,minHeight:"100vh",padding:"2rem",position:"relative"},children:[l.jsx("div",{style:{perspective:"1000px",perspectiveOrigin:"center center"},children:l.jsxs(P.div,{animate:{rotateY:r==="flipping"||r==="revealed"||r==="complete"?180:0,scale:r==="shaking"?[1,1.05,1]:1,x:r==="shaking"?[0,-5,5,-5,5,0]:0},transition:{rotateY:{duration:.4,ease:"easeOut"},scale:{duration:.5,repeat:1/0,repeatType:"reverse"},x:{duration:.1,repeat:5,ease:"easeInOut"}},style:{transformStyle:"preserve-3d",position:"relative",width:"200px",height:"280px"},children:[l.jsx(P.div,{animate:{opacity:r==="hidden"||r==="shaking"?1:0,scale:r==="shaking"?[1,1.02,1]:1},transition:{opacity:{duration:.1},scale:{duration:.5,repeat:r==="shaking"?1/0:0,repeatType:"reverse"}},style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(0deg)"},children:l.jsx(cm,{item:e,showBack:!0})}),l.jsx(P.div,{animate:{opacity:r==="flipping"||r==="revealed"||r==="complete"?1:0},transition:{duration:.1},style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:l.jsx(cm,{item:e,showBack:!1})})]})}),l.jsx(Oe,{children:(r==="revealed"||r==="complete")&&l.jsx(NC,{rarity:e.rarity})}),r==="revealed"||r==="complete"?l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},style:{textAlign:"center",fontSize:"1.1rem",color:"#ccc"},children:[e.name," trouv !"]}):l.jsx(P.div,{animate:{opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0},style:{textAlign:"center",fontSize:"0.9rem",color:"#666",fontStyle:"italic"},children:"..."})]})}function qC({item:e,gold:t,onContinue:n}){const{addItemToInventory:r,inventory:i}=M(),[s,o]=b.useState(!1),a=i.length>=10,u=()=>{o(!0)},c=()=>{a||r(e),n()},f=()=>{n()};return s?l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",flex:1,justifyContent:"center",alignItems:"center",padding:"2rem"},children:[l.jsxs("div",{style:{fontSize:"1.2rem",color:"#ccc",textAlign:"center",marginBottom:"1rem"},children:[e.name," trouv !"]}),t&&l.jsxs("div",{style:{fontSize:"1.3rem",color:"#ddd",fontWeight:"bold"},children:["+",t,""]}),a&&l.jsx("div",{style:{padding:"1rem",background:"#3a2a2a",borderRadius:"4px",color:"#c44",fontSize:"0.9rem",textAlign:"center",maxWidth:"400px"},children:"Inventaire plein ! Tu dois laisser un item."}),l.jsxs("div",{style:{display:"flex",gap:"1rem",width:"100%",maxWidth:"400px"},children:[l.jsx("button",{onClick:c,disabled:a,style:{flex:1},children:"PRENDRE"}),l.jsx("button",{onClick:f,style:{flex:1},children:"LAISSER"})]})]}):l.jsx(FC,{item:e,onRevealComplete:u,autoStart:!0})}function Oy({locations:e,onExplore:t,onEndDay:n}){const{actionsRemaining:r,day:i,rumors:s,playerStats:o}=M(),a=Dt(),[u,c]=b.useState(null),f=s.filter(d=>d.day>=i-2);return l.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1,overflowY:"auto"},children:[l.jsx(Ay,{showActions:!0,showHunger:!0}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",flex:1,padding:"1rem"},children:[l.jsx("div",{style:{textAlign:"center",marginBottom:"0.5rem"},children:l.jsx("div",{style:{fontSize:a?"1.1rem":"1.2rem",fontWeight:"bold",color:"#aaa",opacity:.7},children:"EXPLORATION"})}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.map((d,m)=>{const y=Hs[d.type],g=m===0&&i===1,x=r>0,S=f.filter(I=>I.targetLocationId===d.id||I.hintType==="location"&&!I.targetLocationId),h=S.length>0,p=h?S[0].hintType:null,v=p==="combat"?"":p==="loot"?"":p==="event"?"":p==="location"?"":null,w=c1(d.risk);let T=null,j=null,C=null,k=null;return w>.1&&(j=f1(d.risk),T=d1(o,j),k=p1(T.ratio),T.ratio<.5?C="danger":T.ratio<.7?C="risky":T.ratio>1&&(C="safe")),l.jsxs("div",{"data-tutorial-location":g?"true":void 0,style:{background:"#2a2a2a",border:"2px solid #555",borderRadius:"8px",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsxs("div",{style:{fontSize:"2rem",position:"relative"},children:[y.icon,h&&v&&l.jsx("span",{style:{position:"absolute",top:"-0.25rem",right:"-0.25rem",fontSize:"1rem",background:"#ca8",borderRadius:"50%",width:"1.25rem",height:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #2a2a2a"},title:"Rumeur active",children:v})]}),l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.name,d.explored&&l.jsxs("span",{style:{fontSize:"0.75rem",color:"#888",fontStyle:"italic"},children:["(Explor ",d.explorationCount||0,"x)"]})]}),l.jsx("div",{style:{fontSize:"0.85rem",color:"#aaa",fontStyle:"italic"},children:d.description})]})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.9rem",color:"#ccc",flexWrap:"wrap",alignItems:"center"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx("span",{children:"Risque:"}),l.jsx("span",{style:{color:"#c44"},children:"".repeat(d.risk)})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx("span",{children:"Richesse:"}),l.jsx("span",{style:{color:"#ca8"},children:"".repeat(d.richness)})]}),C&&T&&j&&k&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginTop:"0.25rem",padding:"0.75rem",background:C==="danger"?"#2a1a1a":C==="risky"?"#2a2a1a":"#1a2a1a",borderRadius:"4px",border:`1px solid ${C==="danger"?"#c44":C==="risky"?"#ca8":"#4a4"}`,position:"relative"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[C==="danger"&&l.jsx("span",{style:{background:"#c44",color:"#fff",padding:"0.2rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"bold"},children:" DANGER"}),C==="risky"&&l.jsx("span",{style:{background:"#ca8",color:"#000",padding:"0.2rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"bold"},children:" RISQU"}),C==="safe"&&l.jsx("span",{style:{background:"#4a4",color:"#fff",padding:"0.2rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"bold"},children:" SR"}),l.jsxs("span",{style:{fontSize:"0.8rem",color:"#aaa"},children:["Ratio: ",T.ratio.toFixed(2)]}),l.jsxs("span",{style:{fontSize:"0.8rem",color:"#aaa"},children:["Victoire: ",m1(T.ratio),"%"]}),l.jsxs("button",{onClick:()=>c(u===d.id?null:d.id),style:{background:"transparent",border:"1px solid #555",borderRadius:"4px",padding:"0.2rem 0.5rem",fontSize:"0.75rem",color:"#aaa",cursor:"pointer"},title:"Afficher dtails",children:[u===d.id?"":""," Dtails"]})]}),l.jsx("div",{style:{fontSize:"0.75rem",color:"#888",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:l.jsxs("span",{children:["Ennemi estim: ATK ",j.atk," | DEF ",j.def," | VIT ",j.vit]})}),u===d.id&&l.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem",background:"#1a1a1a",borderRadius:"4px",fontSize:"0.75rem",display:"flex",flexDirection:"column",gap:"0.25rem"},children:[l.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.25rem",color:"#ddd"},children:"Probabilits de rsultats :"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.15rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{style:{color:"#4a8"},children:"Victoire crasante :"}),l.jsxs("span",{style:{color:"#4a8"},children:[k.crushing,"%"]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{style:{color:"#4a4"},children:"Victoire :"}),l.jsxs("span",{style:{color:"#4a4"},children:[k.victory,"%"]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{style:{color:"#ca8"},children:"Victoire coteuse :"}),l.jsxs("span",{style:{color:"#ca8"},children:[k.costly,"%"]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{style:{color:"#c84"},children:"Fuite :"}),l.jsxs("span",{style:{color:"#c84"},children:[k.flee,"%"]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{style:{color:"#c44"},children:"Dfaite :"}),l.jsxs("span",{style:{color:"#c44"},children:[k.defeat,"%"]})]})]}),l.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #333",fontSize:"0.7rem",color:"#666",fontStyle:"italic"},children:[C==="danger"&&" Tu risques de perdre ce combat. vite ou amliore ton quipement.",C==="risky"&&" Combat difficile. Tu risques de fuir ou de subir des dgts.",C==="safe"&&" Tu devrais gagner ce combat sans trop de difficult."]})]}),u!==d.id&&l.jsxs("div",{style:{fontSize:"0.75rem",color:"#888",fontStyle:"italic"},children:[C==="danger"&&"Tu risques de perdre ce combat. vite ou amliore ton quipement.",C==="risky"&&"Combat difficile. Tu risques de fuir ou de subir des dgts.",C==="safe"&&"Tu devrais gagner ce combat sans trop de difficult."]})]})]}),l.jsx("button",{"data-tutorial-explore-button":g?"true":void 0,onClick:()=>t(d),disabled:!x,style:{width:"100%",padding:a?"0.875rem":"0.75rem",fontSize:a?"0.95rem":"1rem",minHeight:"44px",opacity:x?1:.5,cursor:x?"pointer":"not-allowed"},children:"EXPLORER"})]},d.id)}),l.jsx("button",{onClick:n,style:{marginTop:"1rem",padding:a?"0.875rem":"1rem",fontSize:a?"1rem":"1.1rem",minHeight:"44px",background:"#3a2a2a",border:"2px solid #666"},children:"TERMINER LA JOURNE"})]})]})]})}function UC(){const{currentEvent:e,eventResult:t,combatResult:n,lootedItem:r,currentEnemy:i,playerStats:s,dailyLocations:o,exploreLocation:a,finishEvent:u,endDay:c}=M();return e==="combat"&&i&&n?l.jsx(OC,{enemy:i,playerStats:s,onCombatEnd:()=>{u()}}):e==="loot"&&t?r?l.jsx(qC,{item:r,gold:t.gold,onContinue:u}):l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",flex:1,justifyContent:"center"},children:[l.jsxs("div",{style:{background:"#2a2a2a",padding:"2rem",borderRadius:"8px",border:"2px solid #555",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.3rem",marginBottom:"1rem"},children:""}),l.jsx("div",{style:{fontSize:"1.1rem",marginBottom:"1rem",color:"#ccc"},children:t.message}),t.gold&&l.jsxs("div",{style:{color:"#ddd",fontSize:"1.2rem",marginTop:"1rem"},children:["+",t.gold,""]})]}),l.jsx("button",{onClick:u,children:"CONTINUER"})]}):o.length===0?l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",flex:1,justifyContent:"center",alignItems:"center"},children:[l.jsx("div",{children:"Chargement des lieux..."}),l.jsx("button",{onClick:()=>M.getState().goToExploration(),children:"GNRER LES LIEUX"})]}):l.jsx(Oy,{locations:o,onExplore:a,onEndDay:c})}const dm={5:["La nuit tombe. Tu te demandes si tout a en vaut la peine. Peut-tre que la mort serait plus simple.","Chaque jour, tu perds un peu plus de toi-mme. Les choix faciles deviennent les seuls possibles.","Tu regardes tes mains. Elles sont sales. De sang ? D'or ? Peut-tre les deux.","Les autres te regardent avec mfiance. Tu comprends pourquoi. Tu ne te reconnais plus.","La dette grandit. Tes choix aussi. O est la diffrence ?","Tu as vol. Tu as menti. Tu as tu. Mais tu es vivant. C'est tout ce qui compte.","Les remords ? Tu les as enterrs. Avec les autres morts.","Chaque pice d'or te cote un peu plus. Mais tu continues. Tu n'as pas le choix.","Tu te souviens de qui tu tais. Avant. Mais c'est trop tard maintenant.","La compassion est un luxe. Tu ne peux pas te le permettre."],10:["La nuit est sombre. Comme ton me. Tu ne ressens plus rien.","Chaque pice d'or te cote un peu plus d'humanit. Bientt, il n'en restera plus.","Tu as fait des choses. Des choses que tu ne peux pas oublier. Peut-tre que tu ne devrais pas.","Les morts te suivent. Dans tes rves. Dans tes penses. Ils ne te lchent pas.","Tu es devenu ce que tu dtestais. Un monstre. Mais au moins, tu es vivant.","Tu as appris. Appris que la bont est une faiblesse. Appris que la survie est tout.","Les autres sont des outils. Des moyens. Rien de plus. Tu l'as accept.","Tu ne pleures plus. Il n'y a plus rien  pleurer. Tu es vide.","Chaque choix te rapproche de la damnation. Mais tu continues. Par habitude.","Tu as vendu ton me. Pice par pice. Il ne reste presque plus rien."],15:["La nuit ne te fait plus peur. Tu es la nuit.","Tu as vendu ton me pice par pice. Il ne reste plus grand-chose.","Les autres sont des obstacles. Des ressources. Des moyens. Rien de plus.","Tu ris. Tu ris de ta propre damnation. C'est tout ce qui te reste.","La mort te guette. Tu l'attends. Tu l'espres presque.","Tu as perdu. Perdu ce qui faisait de toi un homme. Mais tu as gagn. Gagn la survie.","Les remords sont morts. Comme tout le reste. Tu es libre. Libre de tout.","Tu calcules. Tu calcules chaque geste. Chaque choix. Chaque trahison.","La compassion est morte. Tu l'as tue. Pour survivre.","Tu es devenu efficace. Efficace dans ta propre destruction."],20:["Tu es vide. Vide de tout. Vide de rien. Vide.","La nuit est ton royaume. Les tnbres, ta couronne. Tu es roi de rien.","Tu as perdu. Perdu ce qui faisait de toi un homme. Mais tu as gagn. Gagn quoi ?","Les larmes ne coulent plus. Il n'y a plus rien  pleurer.","Tu es libre. Libre de toute morale. Libre de toute humanit. Libre de tout.","Tu es la mort. La mort qui marche. La mort qui tue. La mort qui survit.","Il ne reste rien. Rien de toi. Rien en toi. Rien.","Tu as gagn. Gagn en perdant tout. C'est ta victoire.","Les autres te craignent. Tu les comprends. Tu te crains toi-mme.","Tu es devenu parfait. Parfaitement vide. Parfaitement mort."]},fm={5:["Malgr tout, tu gardes espoir. Peut-tre qu'un jour, tu pourras racheter tes erreurs.","Chaque geste de bont te rappelle que tu es encore humain. C'est important.","La nuit est sombre, mais tu vois encore des lueurs. Des lueurs d'humanit.","Tu as fait des erreurs. Mais tu peux encore faire mieux. Tu le dois.","Les autres comptent. Leurs vies comptent. La tienne aussi.","Tu as aid. Tu as donn. a compte. a compte vraiment.","Chaque jour, tu choisis de rester humain. C'est un choix difficile, mais tu le fais.","La compassion n'est pas morte. Elle vit en toi. Tu la gardes prcieusement.","Tu refuses de perdre espoir. Mme dans les tnbres, il y a de la lumire.","Les autres te voient. Ils voient ta bont. a leur donne espoir."],10:["Tu refuses de perdre espoir. Mme dans les tnbres, il y a de la lumire.","Chaque jour, tu choisis de rester humain. C'est un choix. Un choix difficile.","Tu as aid. Tu as donn. Tu as partag. a compte. a compte vraiment.","La bont n'est pas morte. Elle vit en toi. Tu la gardes prcieusement.","Tu n'es pas seul. D'autres souffrent. D'autres esprent. Comme toi.","Chaque geste de compassion te rapproche de la rdemption. Tu y crois.","Tu as choisi l'humanit. Encore et encore. C'est ta force.","Les autres te remercient. Leurs sourires te rchauffent le cur.","Tu as partag. Tu as donn. Tu as aid. C'est ta faon de survivre.","La nuit est sombre, mais tu portes une lumire. Une petite lumire, mais une lumire."],15:["Tu es une lumire dans les tnbres. Une petite lumire, mais une lumire quand mme.","Chaque geste de compassion te rapproche de la rdemption. Tu y crois.","Tu as choisi l'humanit. Encore et encore. C'est ta force.","Les autres te voient. Ils voient ta bont. a leur donne espoir.","Tu n'es pas parfait. Mais tu essaies. C'est ce qui compte.","Tu as rachet tes erreurs. Pice par pice. Gestes par gestes.","La bont n'est pas une faiblesse. C'est ta force. Tu l'as prouv.","Tu as protg. Tu as aid. Tu as sauv. C'est ta victoire.","Les autres te suivent. Ils croient en toi. Tu crois en eux.","Tu es redevenu humain. Pleinement humain. C'est ta rdemption."],20:["Tu es un phare. Un phare dans la tempte. Tu guides. Tu protges.","L'humanit n'est pas morte. Elle vit en toi. Elle grandit en toi.","Tu as choisi la lumire. Encore et encore. Tu es devenu la lumire.","Les autres te suivent. Ils croient en toi. Tu crois en eux.","Tu es redevenu humain. Pleinement humain. C'est ta victoire.","Tu as rachet. Rachet tes erreurs. Rachet ton me. Tu es libre.","La compassion est ta force. Ta lumire. Ta victoire.","Tu as choisi. Choisi l'humanit. Choisi la bont. Choisi la rdemption.","Les autres te respectent. Ils t'admirent. Tu es un exemple.","Tu es la lumire. La lumire dans les tnbres. La lumire qui guide."]},mm={5:["Tu calcules. Tu pses. Tu dcides. C'est ta faon de survivre.","Les motions sont un luxe. Tu ne peux pas te le permettre. Pas maintenant.","Tu fais ce qu'il faut. Rien de plus. Rien de moins. C'est tout.","La logique guide tes pas. La raison, tes choix. C'est ainsi.","Tu es efficace. Pratique. Utile. C'est ta force.","Tu analyses. Tu values. Tu optimises. C'est ta mthode.","Les sentiments sont des obstacles. Tu les vites. Tu gagnes.","Tu calcules chaque mouvement. Chaque choix. Chaque consquence.","La raison prime. Toujours. C'est ta rgle.","Tu es mthodique. Prcis. Efficace. C'est ta faon de vivre."],10:["Tu as appris. Appris  survivre. Appris  calculer. Appris  gagner.","Les sentiments sont des faiblesses. Tu les as limins. Ou presque.","Tu es une machine. Une machine de survie. Parfaitement huile.","Tu fais les bons choix. Les choix logiques. Les choix qui marchent.","Tu es pragmatique. C'est ta nature. C'est ta force.","Tu optimises. Chaque action. Chaque dcision. Chaque mouvement.","La logique est ton guide. La raison, ton matre. Tu obis.","Tu calcules. Tu pses. Tu dcides. Toujours. Sans exception.","Les motions sont des distractions. Tu les ignores. Tu gagnes.","Tu es efficace. Parfaitement efficace. C'est ta victoire."],15:["Tu calcules tout. Chaque mouvement. Chaque choix. Chaque consquence.","Tu es devenu efficace. Parfaitement efficace. Rien ne te ralentit.","Les motions sont des obstacles. Tu les as surmonts. Tu as gagn.","Tu es la logique incarne. La raison pure. C'est ta puissance.","Tu fais ce qui fonctionne. Toujours. Sans exception. C'est ta rgle.","Tu as limin. limin tout ce qui tait inutile. Tu es pur.","La logique est ta religion. La raison, ton dieu. Tu adores.","Tu optimises. Optimises tout. Optimises toujours. Tu es parfait.","Les sentiments sont morts. Tu les as tus. Pour gagner.","Tu es la machine. La machine parfaite. La machine qui gagne."],20:["Tu es la machine parfaite. Calculatrice. Efficace. Imparable.","Tu as limin tout ce qui te ralentissait. Tu es libre. Libre de gagner.","Tu es la logique. La raison. L'efficacit. C'est toi.","Rien ne t'arrte. Rien ne te ralentit. Tu es parfait.","Tu as gagn. Gagn en liminant tout ce qui tait inutile. Tu es pur.","Tu es la perfection. La perfection de la logique. La perfection de l'efficacit.","Les motions sont mortes. Tu les as tues. Tu es libre.","Tu calcules. Tu optimises. Tu gagnes. Toujours. Sans exception.","Tu es devenu. Devenu la logique. Devenu la raison. Devenu l'efficacit.","Tu as gagn. Gagn en devenant parfait. Parfaitement logique. Parfaitement efficace."]},is={cynisme_humanite:["Tu es dchir. Entre le cynisme et l'humanit. Entre le dsespoir et l'espoir.","Tu te bats. Tu te bats contre toi-mme. Contre tes propres dmons.","Tu es en guerre. Une guerre intrieure. Tu ne sais pas qui va gagner.","Tu oscilles. Entre la lumire et les tnbres. Entre l'humanit et le dsespoir.","Tu es un paradoxe. Un tre dchir. Mais tu vis. Tu vis encore.","Tu balances. Entre la bont et la survie. Entre l'espoir et le dsespoir.","Tu es dchir. Dchir entre ce que tu veux tre et ce que tu dois tre.","Les deux voix se battent. La voix de la bont. La voix de la survie.","Tu oscilles. Entre la lumire et les tnbres. Tu ne sais pas o tu es.","Tu es un conflit. Un conflit vivant. Un conflit qui survit."],cynisme_pragmatisme:["Tu calcules ta propre damnation. Tu la mesures. Tu l'acceptes.","Tu es efficace dans ta destruction. Mthodique. Implacable.","Tu as choisi la logique. La logique de la survie. Peu importe le prix.","Tu es froid. Calculant. Efficace. C'est ta force. C'est ta faiblesse.","Tu as limin tout ce qui tait inutile. Y compris ton humanit.","Tu optimises. Optimises ta survie. Optimises ta destruction.","Tu calcules. Calcules chaque trahison. Calcules chaque choix.","Tu es efficace. Efficace dans ta damnation. Efficace dans ta survie.","La logique guide ta chute. La raison, ta destruction.","Tu es devenu. Devenu efficace. Devenu froid. Devenu vide."],humanite_pragmatisme:["Tu balances. Entre la bont et l'efficacit. Entre le cur et la raison.","Tu essaies. Tu essaies de rester humain tout en tant efficace.","Tu calcules ta bont. Tu mesures ta compassion. C'est trange.","Tu es pragmatique dans ta bont. Efficace dans ta compassion.","Tu combines. La logique et l'humanit. C'est ta faon de survivre.","Tu optimises. Optimises ta bont. Optimises ta compassion.","Tu calcules. Calcules comment tre bon. Calcules comment tre efficace.","Tu es pragmatique. Pragmatique dans ta bont. Pragmatique dans ta survie.","La logique guide ta bont. La raison, ta compassion.","Tu combines. Combines l'humanit et l'efficacit. C'est ta force."],balanced:["Tu es quilibr. Entre tout. Entre rien. Tu es toi.","Tu n'es ni bon ni mauvais. Tu es. C'est tout.","Tu balances. Entre les extrmes. Tu restes au centre.","Tu es complexe. Comme tout le monde. Comme personne.","Tu es humain. Dans toute ta complexit. C'est ta force.","Tu oscilles. Entre la lumire et les tnbres. Tu restes au milieu.","Tu es quilibr. quilibr entre tout. quilibr entre rien.","Tu combines. Combines tout. Combines rien. Tu es toi.","Tu es complexe. Complexe comme la vie. Complexe comme la mort.","Tu es humain. Humain dans ta complexit. Humain dans ton quilibre."]};function WC(e,t=[]){const n=e.cynisme||0,r=e.humanite||0,i=e.pragmatisme||0;if(n<5&&r<5&&i<5)return null;const s=Math.max(n,r,i);if([n>=10,r>=10,i>=10].filter(Boolean).length>=2){if(n>=10&&r>=10){const d=is.cynisme_humanite;return Ir(d,t)}if(n>=10&&i>=10){const d=is.cynisme_pragmatisme;return Ir(d,t)}if(r>=10&&i>=10){const d=is.humanite_pragmatisme;return Ir(d,t)}}if([Math.abs(n-r),Math.abs(n-i),Math.abs(r-i)].every(d=>d<5)&&s>=5){const d=is.balanced;return Ir(d,t)}let c=null,f=5;return n>=r&&n>=i&&n>=5?(n>=20?f=20:n>=15?f=15:n>=10?f=10:f=5,c=dm[f]||dm[5]):r>=i&&r>=5?(r>=20?f=20:r>=15?f=15:r>=10?f=10:f=5,c=fm[f]||fm[5]):i>=5&&(i>=20?f=20:i>=15?f=15:i>=10?f=10:f=5,c=mm[f]||mm[5]),c?Ir(c,t):null}function Ir(e,t){const n=e.filter(o=>!t.includes(o)),r=Math.max(1,Math.floor(e.length*.3)),i=n.length>=r?n:e;return i[Math.floor(Math.random()*i.length)]}function $C(e){return M.getState(),[{id:"marchand_passe",text:"Un marchand passe par le camp. Il propose des quipements.",type:"text"},{id:"rumeurs_tresor",text:"Tu entends des rumeurs sur un trsor cach dans les ruines.",type:"text"},{id:"voyageurs",text:"Un groupe de voyageurs partage des nouvelles du royaume.",type:"text"},{id:"nuit_calme",text:"La nuit est calme. Trop calme.",type:"text"},{id:"lumires_foret",text:"Des lumires dans la fort. Quelqu'un d'autre explore.",type:"text"},{id:"message_arbre",text:"Un message est accroch  un arbre. Une offre de travail.",type:"text"},{id:"odeur_guerre",text:"Le vent apporte l'odeur de la guerre. Pas loin.",type:"text"},{id:"traces_pas",text:"Des traces de pas. Rcentes. Tu n'es pas seul ici.",type:"text"},{id:"marchand_interactif",text:"Un marchand passe par le camp. Il propose des quipements  prix rduit.",type:"interactive",choices:[{text:"Acheter un quipement (12)",description:"Tu achtes un quipement de qualit.",consequence:()=>{const t=M.getState();if(t.gold>=12&&t.inventory.length<10){const n=wt(3);M.setState({gold:t.gold-12,inventory:[...t.inventory,n]})}}},{text:"Ngocier (10, rputation  requise)",description:"Tu ngocies un meilleur prix grce  ta rputation.",consequence:()=>{const t=M.getState();if(t.gold>=10&&t.reputation>=3&&t.inventory.length<10){const n=wt(3);M.setState({gold:t.gold-10,inventory:[...t.inventory,n]})}}},{text:"Refuser poliment",description:"Tu dclines. Le marchand part.",consequence:()=>{}}]},{id:"lumires_foret_interactif",text:"Des lumires dans la fort. Quelqu'un d'autre explore. Que fais-tu ?",type:"interactive",choices:[{text:"Aller voir",description:"Tu dcouvres un campement. Ils te proposent de partager leur feu.",consequence:()=>{const t=M.getState();M.setState({narrativeCounters:{...t.narrativeCounters,humanite:(t.narrativeCounters.humanite||0)+1}})}},{text:"Rester cach",description:"Tu observes de loin. Tu apprends des informations utiles.",consequence:()=>{const t=M.getState();M.setState({gold:t.gold+5})}},{text:"Prparer une embuscade",description:"Tu prpares une embuscade. Tu gagnes de l'or, mais tu perds de l'humanit.",consequence:()=>{const t=M.getState();M.setState({gold:t.gold+Math.floor(Math.random()*11)+10,narrativeCounters:{...t.narrativeCounters,cynisme:(t.narrativeCounters.cynisme||0)+1},reputation:Math.max(1,t.reputation-1)})}}]},{id:"message_arbre_interactif",text:"Un message est accroch  un arbre. Une offre de travail.",type:"interactive",choices:[{text:"Accepter l'offre",description:"Tu acceptes. C'est un travail dangereux, mais bien pay.",consequence:()=>{const t=M.getState();M.setState({gold:t.gold+20,narrativeCounters:{...t.narrativeCounters,pragmatisme:(t.narrativeCounters.pragmatisme||0)+1}})}},{text:"Ignorer",description:"Tu ignores le message. Mieux vaut ne pas s'embarrasser.",consequence:()=>{}},{text:"Dtruire le message",description:"Tu dtruis le message. Personne d'autre ne tombera dans le pige.",consequence:()=>{const t=M.getState();M.setState({narrativeCounters:{...t.narrativeCounters,humanite:(t.narrativeCounters.humanite||0)+1}})}}]},{id:"voyageurs_interactif",text:"Un groupe de voyageurs partage des nouvelles du royaume. Ils te proposent de te joindre  eux.",type:"interactive",choices:[{text:"Partager un repas avec eux",description:"Tu partages un repas. Tu te sens moins seul.",consequence:()=>{const t=M.getState();M.setState({narrativeCounters:{...t.narrativeCounters,humanite:(t.narrativeCounters.humanite||0)+1}})}},{text:"changer des informations",description:"Tu changes des informations. Tu apprends des choses utiles.",consequence:()=>{const t=M.getState();M.setState({gold:t.gold+10})}},{text:"Les voler",description:"Tu profites de leur confiance pour les voler.",consequence:()=>{const t=M.getState();M.setState({gold:t.gold+Math.floor(Math.random()*11)+12,narrativeCounters:{...t.narrativeCounters,cynisme:(t.narrativeCounters.cynisme||0)+3},reputation:Math.max(1,t.reputation-1)})}}]},{id:"ancien_soldat",text:"Tu croises un ancien soldat. Il te reconnat.",type:"interactive",choices:[{text:"Partager une exprience",description:"Vous partagez vos histoires. Tu te sens moins seul.",consequence:()=>{const t=M.getState();M.setState({narrativeCounters:{...t.narrativeCounters,humanite:(t.narrativeCounters.humanite||0)+1}})}},{text:"viter",description:"Tu passes ton chemin.",consequence:()=>{}},{text:"Voler ses affaires",description:"Tu profites de sa distraction.",consequence:()=>{const t=M.getState();M.setState({gold:t.gold+Math.floor(Math.random()*11)+8,narrativeCounters:{...t.narrativeCounters,cynisme:(t.narrativeCounters.cynisme||0)+1},reputation:Math.max(1,t.reputation-1)})}}]},{id:"campement_abandonne",text:"Tu dcouvres un campement abandonn. Des traces rcentes, mais personne.",type:"interactive",choices:[{text:"Explorer prudemment",description:"Tu trouves quelques objets utiles.",consequence:()=>{const t=M.getState();if(t.inventory.length<10){const n=wt(2);M.setState({inventory:[...t.inventory,n]})}else M.setState({gold:t.gold+15})}},{text:"Laisser tel quel",description:"Tu respectes les morts. Peut-tre que quelqu'un reviendra.",consequence:()=>{const t=M.getState();M.setState({narrativeCounters:{...t.narrativeCounters,humanite:(t.narrativeCounters.humanite||0)+1}})}},{text:"Piller le campement",description:"Tu prends tout ce qui a de la valeur.",consequence:()=>{const t=M.getState();M.setState({gold:t.gold+Math.floor(Math.random()*16)+15,narrativeCounters:{...t.narrativeCounters,cynisme:(t.narrativeCounters.cynisme||0)+3},reputation:Math.max(1,t.reputation-1)})}}]},{id:"message_contact",text:"Un message discret te parvient. Un contact te propose une mission.",type:"interactive",choices:[{text:"Suivre le contact",description:"Tu acceptes la mission. C'est risqu mais payant.",consequence:()=>{const t=M.getState();M.setState({gold:t.gold+Math.floor(Math.random()*21)+20,narrativeCounters:{...t.narrativeCounters,pragmatisme:(t.narrativeCounters.pragmatisme||0)+1}})}},{text:"Ignorer",description:"Tu ignores le message. Mieux vaut ne pas s'embarrasser.",consequence:()=>{}},{text:"Dnoncer le contact",description:"Tu dnonces le contact aux autorits. Tu gagnes en rputation.",consequence:()=>{const t=M.getState();M.setState({reputation:Math.min(5,t.reputation+1),narrativeCounters:{...t.narrativeCounters,humanite:(t.narrativeCounters.humanite||0)+1}})}}]},{id:"refugies_camp",text:"Un groupe de rfugis s'est install prs de ton campement. Ils ont faim.",type:"interactive",choices:[{text:"Partager ta nourriture",description:"Tu partages ce que tu as. Ils te remercient.",consequence:()=>{const t=M.getState();M.setState({gold:t.gold-5,narrativeCounters:{...t.narrativeCounters,humanite:(t.narrativeCounters.humanite||0)+2},reputation:Math.min(5,t.reputation+1)})}},{text:"Les chasser",description:"Tu les chasses. Ils partent, mais tu gagnes de l'or qu'ils avaient cach.",consequence:()=>{const t=M.getState();M.setState({gold:t.gold+Math.floor(Math.random()*11)+10,narrativeCounters:{...t.narrativeCounters,cynisme:(t.narrativeCounters.cynisme||0)+3},reputation:Math.max(1,t.reputation-2)})}},{text:"Ngocier avec eux",description:"Tu leur proposes un march. Information contre protection.",consequence:()=>{const t=M.getState();M.setState({gold:t.gold+8,narrativeCounters:{...t.narrativeCounters,pragmatisme:(t.narrativeCounters.pragmatisme||0)+1}})}}]}]}function HC(e){const t=$C();return Math.random()<.45?t[Math.floor(Math.random()*t.length)]:null}const GC=["La nuit efface les traces. Le jour les rvle.","Chaque aube est une nouvelle chance. Ou une nouvelle dette.","Les murs coutent. Les ombres jugent.","Dans l'obscurit, les choix deviennent plus clairs.","Le sommeil n'efface pas les dettes. Seul l'or le fait.","Les ruines gardent leurs secrets. Et leurs trsors.","Morten attend. Le temps passe.","La survie n'est pas une victoire. C'est juste un autre jour.","Les combats d'hier forgent les choix de demain.","L'or brille dans l'obscurit. Mais la dette aussi."],KC=["Explorer tt permet de trouver plus de lieux.","Manger  la taverne restaure l'humanit.","Rembourser rgulirement amliore ta relation avec Morten.","Les items lgendaires valent cher au march.","La forge peut rparer tes quipements endommags.","Les rumeurs  la taverne rvlent des trsors cachs.","Survivre sans manger rduit tes actions le lendemain.","Les choix narratifs influencent tes fins possibles."];function XC({nextDay:e,onComplete:t}){const[n,r]=b.useState("fadeOut"),[i,s]=b.useState("");return b.useEffect(()=>{const o=setTimeout(()=>{r("black");const c=[...GC,...KC],f=c[Math.floor(Math.random()*c.length)];s(f)},2e3),a=setTimeout(()=>{r("fadeIn")},4e3),u=setTimeout(()=>{t()},5e3);return()=>{clearTimeout(o),clearTimeout(a),clearTimeout(u)}},[t]),l.jsx(P.div,{initial:{opacity:0},animate:{opacity:n==="fadeOut"||n==="black"?1:0},transition:{duration:2,ease:"easeInOut"},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:n==="black"?"#000000":"rgba(0, 0, 0, 0)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4,pointerEvents:"none"},children:l.jsx(Oe,{children:n==="black"&&i&&l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.8},style:{maxWidth:"500px",padding:"2rem",textAlign:"center"},children:[l.jsxs("div",{style:{fontSize:"1.1rem",color:"#888",fontStyle:"italic",lineHeight:"1.8",marginBottom:"2rem"},children:['"',i,'"']}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"#555",marginTop:"2rem"},children:["JOUR ",e]})]})})})}function YC(){const{day:e,debt:t,endDay:n,narrativeCounters:r,recentMonologues:i,gold:s,reputation:o,inventory:a}=M(),u=Dt(),[c,f]=b.useState(null),[d,m]=b.useState(null),[y,g]=b.useState(null),[x,S]=b.useState(!1),[h,p]=b.useState(null),[v,w]=b.useState(!1),{triggerShake:T}=_y();b.useEffect(()=>{const V=HC();f(V),m(null),g(null),S(!0),T(2,400),setTimeout(()=>S(!1),1e3);const G=WC(r,i||[]);p(G),G&&M.setState({recentMonologues:[...(i||[]).slice(-4),G]})},[e,r,i,T]);const j=V=>{if(!c||!c.choices)return;const G=c.choices[V];m(V),G.consequence(),g(G.description||"Tu as fait ton choix.")},C=bo.economy.dailyInterest,k=2,I=s>=k,A=t+C+(I?0:k);return l.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1,position:"relative",padding:"1rem",width:"100%"},children:[l.jsxs("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden",paddingBottom:"100px",WebkitOverflowScrolling:"touch"},children:[l.jsxs("div",{style:{textAlign:"center",fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#fff"},children:["CRPUSCULE  JOUR ",e,"/20"]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1.5rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.1rem",marginBottom:"1rem",fontWeight:"bold"},children:"RSUM DU JOUR"}),l.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#1a1a1a",borderRadius:"4px",fontSize:"0.9rem",color:"#aaa"},children:[l.jsx("div",{style:{marginBottom:"0.5rem"},children:" 3 lieux explors"}),l.jsxs("div",{style:{marginBottom:"0.5rem"},children:[" ",Math.floor(Math.random()*3)," items trouvs"]}),l.jsxs("div",{children:[" ",Math.floor(Math.random()*2)," combats"]})]}),l.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsxs("div",{style:{marginBottom:"0.5rem",fontSize:"1rem"},children:["Dette actuelle : ",l.jsxs("span",{style:{color:"#c44"},children:[t,""]})]}),l.jsx("div",{style:{marginBottom:"0.75rem",padding:"0.5rem",background:I?"#1a2a1a":"#2a1a1a",borderRadius:"4px",fontSize:"0.85rem",color:I?"#4a8":"#c84",border:`1px solid ${I?"#4a8":"#c84"}`},children:I?l.jsxs(l.Fragment,{children:[" Logement pay : -",k,""]}):l.jsxs(l.Fragment,{children:[" Logement ajout  la dette : +",k,""]})}),l.jsxs(P.div,{animate:x?{scale:[1,1.1,1],color:["#c44","#f44","#c44"]}:{},transition:{duration:.5},style:{fontSize:"1.1rem",fontWeight:"bold"},children:["Nouvelle dette : ",l.jsxs("span",{style:{color:"#c44"},children:[A,""]}),l.jsxs("span",{style:{color:"#888",fontSize:"0.9rem",marginLeft:"0.5rem",fontWeight:"normal"},children:["(+",C," intrts",I?"":` + ${k} logement`,")"]})]})]}),c&&l.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"#2a1a1a",borderRadius:"4px",border:"1px solid #555"},children:[l.jsx("div",{style:{fontSize:"0.9rem",color:"#ca8",fontStyle:"italic",lineHeight:"1.6",marginBottom:c.type==="interactive"?"1rem":"0"},children:c.text}),y&&l.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px",fontSize:"0.85rem",color:"#ca8",fontStyle:"italic"},children:y})]}),h&&l.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"#1a1a2a",borderRadius:"4px",border:"1px solid #444",fontSize:"0.9rem",color:"#888",fontStyle:"italic",lineHeight:"1.6"},children:h}),l.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"#1a1a1a",borderRadius:"4px",fontSize:"0.9rem",color:"#aaa",fontStyle:"italic"},children:'"La nuit tombe. Demain, tu recommences."'})]})]}),l.jsxs("div",{style:{position:"absolute",bottom:0,left:0,right:0,zIndex:10,padding:"1rem",background:"linear-gradient(to top, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.85) 70%, transparent 100%)",borderTop:"1px solid #333"},children:[c&&c.type==="interactive"&&c.choices&&!y&&l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem"},children:c.choices.map((V,G)=>{const Ae=!V.text.includes("15")||s>=15,yt=!V.text.includes("10")||s>=10,At=!V.text.includes("")||o>=3,qe=!V.text.includes("quipement")||a.length<10,B=Ae&&yt&&At&&qe;return l.jsx("button",{onClick:()=>j(G),disabled:!B,style:{padding:u?"1rem":"0.875rem",fontSize:u?"1rem":"0.95rem",minHeight:u?"48px":"44px",textAlign:"left",background:B?"#1a1a1a":"#0a0a0a",border:`1px solid ${B?"#555":"#333"}`,borderRadius:"4px",color:B?"#ccc":"#666",cursor:B?"pointer":"not-allowed",opacity:B?1:.5,boxShadow:"0 -2px 8px rgba(0, 0, 0, 0.3)"},children:V.text},G)})}),l.jsx("button",{onClick:()=>{e>=20?n():w(!0)},style:{fontSize:"1.1rem",padding:"1rem",width:"100%",background:"#2a2a2a",border:"1px solid #555",borderRadius:"4px",color:"#fff",cursor:"pointer",boxShadow:"0 -2px 8px rgba(0, 0, 0, 0.3)"},children:e>=20?"TERMINER":`DORMIR  JOUR ${e+1}`})]}),v&&l.jsx(XC,{currentDay:e,nextDay:e+1,onComplete:()=>{w(!1),n()}})]})}const QC="souda_meta",to="hallOfFame";async function Vy(){return new Promise((e,t)=>{const n=indexedDB.open(QC,4);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains("metaProgression")||i.createObjectStore("metaProgression"),i.objectStoreNames.contains("tutorial")||i.createObjectStore("tutorial"),i.objectStoreNames.contains("unlocks")||i.createObjectStore("unlocks"),i.objectStoreNames.contains("hallOfFame")||i.createObjectStore("hallOfFame",{keyPath:"id"})}})}async function By(e){const t=await Vy();return new Promise((n,r)=>{const o=t.transaction([to],"readwrite").objectStore(to).put(e);o.onerror=()=>r(o.error),o.onsuccess=()=>n()})}async function vc(){const e=await Vy();return new Promise((t,n)=>{const s=e.transaction([to],"readonly").objectStore(to).getAll();s.onerror=()=>n(s.error),s.onsuccess=()=>{const o=s.result;o.sort((a,u)=>u.timestamp-a.timestamp),t(o)}})}async function JC(){const e=await vc();if(e.length===0)return{totalRuns:0,victories:0,defeats:0,bestDays:0,bestGold:0,totalLegendaryItems:0,totalCombatsWon:0,totalCombatsLost:0};const t=e.filter(u=>u.endType==="victory").length,n=e.filter(u=>u.endType!=="victory").length,r=Math.max(...e.map(u=>u.daysLived)),i=Math.max(...e.map(u=>u.finalGold)),s=e.reduce((u,c)=>u+c.legendaryItems.length,0),o=e.reduce((u,c)=>u+c.combatsWon,0),a=e.reduce((u,c)=>u+c.combatsLost,0);return{totalRuns:e.length,victories:t,defeats:n,bestDays:r,bestGold:i,totalLegendaryItems:s,totalCombatsWon:o,totalCombatsLost:a}}function Ny(e){const t=ZC(e);return t||ek(e)}function ZC(e){const{day:t,debt:n,reputation:r,combatResult:i,currentEnemy:s}=e;return(i==null?void 0:i.outcome)==="defeat"?{id:"mort_combat",type:"defeat",title:"Mort au Combat",text:`${(s==null?void 0:s.name)||"Un ennemi"} a eu raison de vous. Votre cadavre sera pill comme vous avez pill tant d'autres. Terra Incognita n'a pas de piti pour les faibles.`,ambiance:{backgroundColor:"#1a0000",textColor:"#ccc",titleColor:"#c44",particles:"ashes",musicId:"defeat"},variables:{enemyName:(s==null?void 0:s.name)||"Un ennemi"}}:t>=20&&n>0&&r<4?{id:"dette_sang",type:"defeat",title:"La Dette de Sang",text:"Les hommes de Morten vous trouvent  l'aube. Pas de ngociation. Pas de piti. Votre corps rejoint les autres dans la fosse derrire l'choppe. La dette est paye.",ambiance:{backgroundColor:"#2a0000",textColor:"#ccc",titleColor:"#c44",particles:"ashes",musicId:"defeat"}}:t>=20&&n>0&&r>=4?{id:"fuite",type:"defeat",title:"La Fuite",text:"Votre rputation vous permet de fuir avant que Morten n'envoie ses hommes. Mais vous fuyez sans rien.  nouveau dserteur.  nouveau seul. La dette vous suivra.",ambiance:{backgroundColor:"#1a1a1a",textColor:"#aaa",titleColor:"#888",particles:"mist",musicId:"flee"}}:null}function ek(e){const{gold:t,reputation:n,debt:r,narrativeCounters:i}=e;if(r>0)return pm();const s=i.cynisme||0,o=i.humanite||0,a=i.pragmatisme||0;return o>=10?{id:"humanite",type:"victory",title:"La Rdemption",text:"Vous avez choisi l'humanit. Malgr les tnbres, vous avez gard votre cur. Les rfugis que vous avez aids parlent de vous comme d'un protecteur. Sur Margaux vous offre une place au monastre. Vous avez rachet vos erreurs.",ambiance:{backgroundColor:"#1a2a1a",textColor:"#ddd",titleColor:"#fff",particles:"light",musicId:"victory"}}:s>=10?{id:"cynisme",type:"victory",title:"La Survie",text:"Vous avez survcu. Peu importe le prix. Vous avez fait ce qu'il fallait. Les autres peuvent juger, mais vous tes vivant. C'est tout ce qui compte. La dette est paye, mais votre me aussi.",ambiance:{backgroundColor:"#2a1a1a",textColor:"#aaa",titleColor:"#c44",particles:"ashes",musicId:"defeat"}}:a>=10?{id:"pragmatisme",type:"victory",title:"L'Efficacit",text:"Vous avez gagn. Par la logique et l'efficacit. Vous avez calcul chaque mouvement, chaque choix. La dette est paye. Vous tes libre. Et vous avez appris que dans ce monde, seule la logique compte.",ambiance:{backgroundColor:"#1a1a2a",textColor:"#aaa",titleColor:"#88a",particles:"mist",musicId:"victory"}}:[Math.abs(o-s),Math.abs(o-a),Math.abs(s-a)].every(f=>f<7)&&o>=3&&s>=3&&a>=3?{id:"equilibre",type:"victory",title:"L'quilibre",text:"Vous avez trouv l'quilibre. Entre tout et rien. Entre le bien et le mal. Entre la logique et l'motion. Vous avez pay votre dette. Vous tes libre. Et vous tes humain, dans toute votre complexit.",ambiance:{backgroundColor:"#1a1a1a",textColor:"#aaa",titleColor:"#888",particles:"none",musicId:"victory"}}:n===5&&t>=200&&o>s?{id:"seigneur",type:"victory",title:"Le Seigneur des Ruines",text:"Votre rputation vous prcde. Les seigneurs locaux vous offrent terres et titre. De mercenaire, vous devenez noble. La dette n'tait que le premier chapitre.",ambiance:{backgroundColor:"#2a2a00",textColor:"#ddd",titleColor:"#ca8",particles:"gold",musicId:"victory"}}:t>=300?{id:"marchand",type:"victory",title:"Le Roi des Charognes",text:"L'or appelle l'or. Vous rachetez l'choppe de Morten, puis une autre, puis une autre. Bientt, c'est vous qui prtez aux dsesprs. Le cycle continue.",ambiance:{backgroundColor:"#2a1a00",textColor:"#ddd",titleColor:"#ca8",particles:"gold",musicId:"victory"}}:o>=10&&s<3?{id:"redempteur",type:"victory",title:"Le Rdempteur",text:"Vous avez pay votre dette, mais aussi celle de votre conscience. Les rfugis que vous avez aids parlent de vous comme d'un saint. Sur Margaux vous offre une place au monastre.",ambiance:{backgroundColor:"#2a2a1a",textColor:"#ddd",titleColor:"#fff",particles:"light",musicId:"victory"}}:n<=2&&a>o&&a>s?{id:"fantome",type:"victory",title:"Le Fantme",text:"Personne ne se souvient de vous. Vous payez Morten dans l'ombre et disparaissez avant l'aube. Quelque part, une nouvelle guerre commence. Vous y serez.",ambiance:{backgroundColor:"#1a1a1a",textColor:"#888",titleColor:"#666",particles:"mist",musicId:"flee"}}:pm()}function pm(){return{id:"survivant",type:"victory",title:"Le Survivant",text:"Vous avez survcu. C'est plus que la plupart peuvent dire. La route continue, sans gloire ni honte. Juste un autre jour.",ambiance:{backgroundColor:"#1a1a1a",textColor:"#aaa",titleColor:"#888",particles:"none",musicId:"victory"}}}function tk(e,t){if(!t)return e;let n=e;return Object.entries(t).forEach(([r,i])=>{n=n.replace(new RegExp(`\\[${r}\\]`,"g"),i)}),n}async function Fy(e,t){const n={...t};e.daysLived&&(n.globalCounters.totalDaysSurvived+=e.daysLived),e.combatsFled&&(n.globalCounters.totalFlees+=e.combatsFled),e.totalGoldEarned&&(n.globalCounters.totalGoldEarned+=e.totalGoldEarned),e.endType==="victory"?n.globalCounters.victories+=1:n.globalCounters.defeats+=1;for(const r of St)n.origins.includes(r.id)||(r.id==="noble"?(await vc()).some(o=>o.finalGold>200)&&!n.origins.includes("noble")&&n.origins.push("noble"):r.unlockCondition(n)&&(n.origins.includes(r.id)||n.origins.push(r.id)));return e.daysLived&&e.daysLived>=5&&(n.itemPoolAdditions.includes("heavy_weapons")||n.itemPoolAdditions.push("heavy_weapons")),e.daysLived&&e.daysLived>=10&&(n.itemPoolAdditions.includes("plate_armor")||n.itemPoolAdditions.push("plate_armor")),n.globalCounters.totalDaysSurvived>=20&&(n.itemPoolAdditions.includes("legendary_items")||n.itemPoolAdditions.push("legendary_items")),e.endTitle==="Le Seigneur"&&(n.itemPoolAdditions.includes("noble_set")||n.itemPoolAdditions.push("noble_set")),n}async function xc(){return new Promise((e,t)=>{const n=indexedDB.open("souda_meta",4);n.onerror=()=>t(n.error),n.onsuccess=()=>{const o=n.result.transaction(["unlocks"],"readonly").objectStore("unlocks").get("state");o.onerror=()=>t(o.error),o.onsuccess=()=>{const a=o.result;e(a||{origins:["deserteur"],itemPoolAdditions:[],achievements:[],globalCounters:{totalLoots:0,totalMonasteries:0,totalDaysSurvived:0,totalFlees:0,totalGoldEarned:0,victories:0,defeats:0}})}},n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains("metaProgression")||i.createObjectStore("metaProgression"),i.objectStoreNames.contains("tutorial")||i.createObjectStore("tutorial"),i.objectStoreNames.contains("unlocks")||i.createObjectStore("unlocks"),i.objectStoreNames.contains("hallOfFame")||i.createObjectStore("hallOfFame",{keyPath:"id"})}})}async function qy(e){return new Promise((t,n)=>{const r=indexedDB.open("souda_meta",4);r.onerror=()=>n(r.error),r.onsuccess=()=>{const a=r.result.transaction(["unlocks"],"readwrite").objectStore("unlocks").put(e,"state");a.onerror=()=>n(a.error),a.onsuccess=()=>t()},r.onupgradeneeded=i=>{const s=i.target.result;s.objectStoreNames.contains("metaProgression")||s.createObjectStore("metaProgression"),s.objectStoreNames.contains("tutorial")||s.createObjectStore("tutorial"),s.objectStoreNames.contains("unlocks")||s.createObjectStore("unlocks"),s.objectStoreNames.contains("hallOfFame")||s.createObjectStore("hallOfFame",{keyPath:"id"})}})}function nk({ambiance:e}){if(e.particles==="none"||!e.particles)return null;const t=20;return e.particles==="gold"?l.jsx(l.Fragment,{children:Array.from({length:t}).map((n,r)=>l.jsx(P.div,{initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,opacity:0,scale:0},animate:{y:window.innerHeight+100,opacity:[0,1,0],scale:[0,1,0],rotate:360},transition:{duration:3+Math.random()*2,repeat:1/0,delay:Math.random()*2,ease:"linear"},style:{position:"fixed",width:"8px",height:"8px",background:"#ca8",borderRadius:"50%",pointerEvents:"none",zIndex:1,boxShadow:"0 0 10px #ca8"}},r))}):e.particles==="ashes"?l.jsx(l.Fragment,{children:Array.from({length:t}).map((n,r)=>l.jsx(P.div,{initial:{x:Math.random()*window.innerWidth,y:-50,opacity:0,rotate:0},animate:{y:window.innerHeight+100,opacity:[0,.5,0],rotate:360},transition:{duration:4+Math.random()*3,repeat:1/0,delay:Math.random()*2,ease:"linear"},style:{position:"fixed",width:"6px",height:"6px",background:"#333",borderRadius:"50%",pointerEvents:"none",zIndex:1}},r))}):e.particles==="mist"?l.jsx(l.Fragment,{children:Array.from({length:10}).map((n,r)=>l.jsx(P.div,{initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,opacity:0},animate:{x:(Math.random()-.5)*200+Math.random()*window.innerWidth,y:(Math.random()-.5)*200+Math.random()*window.innerHeight,opacity:[0,.3,0]},transition:{duration:5+Math.random()*3,repeat:1/0,delay:Math.random()*2,ease:"easeInOut"},style:{position:"fixed",width:"100px",height:"100px",background:"radial-gradient(circle, rgba(200,200,200,0.1) 0%, transparent 70%)",borderRadius:"50%",pointerEvents:"none",zIndex:1}},r))}):e.particles==="light"?l.jsx(l.Fragment,{children:Array.from({length:15}).map((n,r)=>l.jsx(P.div,{initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,opacity:0,scale:0},animate:{opacity:[0,.6,0],scale:[0,1.5,0]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2,ease:"easeInOut"},style:{position:"fixed",width:"20px",height:"20px",background:"radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 70%)",borderRadius:"50%",pointerEvents:"none",zIndex:1}},r))}):null}function rk({runData:e,showTitle:t=!0,compact:n=!1}){const r=[...Object.values(e.equipment),...e.inventory].filter(s=>s&&s.rarity==="legendary").length,i=e.legendaryItemsFound??r;return l.jsxs("div",{style:{background:n?"transparent":"#2a2a2a",padding:n?"0":"1.5rem",borderRadius:"8px",border:n?"none":"2px solid #555",width:"100%"},children:[t&&!n&&l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem",textAlign:"center"},children:"RCAPITULATIF"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsx("span",{style:{color:"#aaa"},children:"Jours survcus :"}),l.jsxs("span",{style:{color:"#ddd",fontWeight:"bold"},children:[e.day,"/20"]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsx("span",{style:{color:"#aaa"},children:"Or final :"}),l.jsxs("span",{style:{color:"#ca8",fontWeight:"bold"},children:[e.gold,""]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsx("span",{style:{color:"#aaa"},children:"Rputation :"}),l.jsx("span",{style:{color:"#ddd",fontWeight:"bold"},children:"".repeat(e.reputation)})]}),i>0&&l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",background:"#1a1a1a",borderRadius:"4px",border:"1px solid #ca8"},children:[l.jsx("span",{style:{color:"#aaa"},children:"Items lgendaires :"}),l.jsx("span",{style:{color:"#ca8",fontWeight:"bold"},children:i})]}),(e.combatsWon!==void 0||e.combatsFled!==void 0||e.combatsLost!==void 0)&&l.jsxs("div",{style:{padding:"0.5rem",background:"#1a1a1a",borderRadius:"4px",marginTop:"0.5rem"},children:[l.jsx("div",{style:{color:"#aaa",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Combats :"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",fontSize:"0.85rem"},children:[e.combatsWon!==void 0&&l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{style:{color:"#4a8"},children:"Victoires :"}),l.jsx("span",{style:{color:"#4a8"},children:e.combatsWon})]}),e.combatsFled!==void 0&&e.combatsFled>0&&l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{style:{color:"#ca8"},children:"Fuit :"}),l.jsx("span",{style:{color:"#ca8"},children:e.combatsFled})]}),e.combatsLost!==void 0&&e.combatsLost>0&&l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{style:{color:"#c44"},children:"Dfaites :"}),l.jsx("span",{style:{color:"#c44"},children:e.combatsLost})]})]})]})]})]})}function Uy({ending:e}){const{day:t,gold:n,reputation:r,equipment:i,inventory:s,combatsWon:o,combatsFled:a,combatsLost:u,legendaryItemsFound:c,resetGame:f}=M(),[d,m]=b.useState(!1),[y,g]=b.useState([]),[x,S]=b.useState(0);b.useEffect(()=>{const p=setTimeout(()=>m(!0),500),w=tk(e.text,e.variables).split(". ").filter(T=>T.trim().length>0);return g(w),()=>clearTimeout(p)},[e]),b.useEffect(()=>{if(y.length!==0&&x<y.length){const p=setTimeout(()=>{S(x+1)},1500);return()=>clearTimeout(p)}},[x,y.length]);const h={day:t,gold:n,reputation:r,equipment:i,inventory:s,combatsWon:o,combatsFled:a,combatsLost:u,legendaryItemsFound:c};return l.jsxs(P.div,{initial:{opacity:0},animate:{opacity:d?1:0},transition:{duration:1},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:e.ambiance.backgroundColor,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"2rem",overflowY:"auto",zIndex:1e4},children:[l.jsx(nk,{ambiance:e.ambiance}),l.jsxs("div",{style:{position:"relative",zIndex:2,maxWidth:"600px",width:"100%",textAlign:"center"},children:[l.jsx(P.div,{initial:{opacity:0,y:-30},animate:{opacity:d?1:0,y:0},transition:{delay:.5,duration:.8},style:{fontSize:e.type==="victory"?"3rem":"2.5rem",fontWeight:"bold",marginBottom:"2rem",color:e.ambiance.titleColor,textShadow:"2px 2px 8px rgba(0,0,0,0.8)",lineHeight:"1.2"},children:e.title}),l.jsx(P.div,{style:{background:"rgba(0, 0, 0, 0.3)",padding:"2rem",borderRadius:"8px",border:`2px solid ${e.ambiance.textColor}40`,marginBottom:"2rem",minHeight:"200px"},children:l.jsx(Oe,{mode:"wait",children:y.slice(0,x).map((p,v)=>l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.5},style:{fontSize:"1.1rem",color:e.ambiance.textColor,lineHeight:"1.8",marginBottom:v<y.length-1?"1rem":"0",fontStyle:"italic",textAlign:"left"},children:[p.trim(),"."]},v))})}),l.jsx(P.div,{initial:{opacity:0},animate:{opacity:x>=y.length?1:0},transition:{delay:.5},style:{background:"rgba(0, 0, 0, 0.3)",padding:"1.5rem",borderRadius:"8px",border:`1px solid ${e.ambiance.textColor}40`,marginBottom:"2rem"},children:l.jsx(rk,{runData:h,compact:!0})}),l.jsxs(P.div,{initial:{opacity:0},animate:{opacity:x>=y.length?1:0},transition:{delay:.5},style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>{const{setPhase:p}=M.getState();p("hallOfFame")},style:{fontSize:"1.1rem",padding:"1rem 2rem",background:"#2a2a2a",border:"2px solid #555",minWidth:"150px",color:e.ambiance.textColor},children:"HALL OF FAME"}),l.jsx("button",{onClick:f,style:{fontSize:"1.1rem",padding:"1rem 2rem",background:e.type==="victory"?"#3a2a2a":"#2a1a1a",border:`2px solid ${e.ambiance.titleColor}80`,minWidth:"150px",color:e.ambiance.textColor},children:e.type==="victory"?"NOUVELLE PARTIE":"RESSAYER"})]})]})]})}function Wy({xpGained:e,onAnimationComplete:t}){const{globalXP:n,playerLevel:r,addXP:i}=Li(),[s,o]=b.useState(n),[a,u]=b.useState(r),[c,f]=b.useState(!1),[d,m]=b.useState([]),[y,g]=b.useState(!1);b.useEffect(()=>{const S=n,h=n+e,p=2e3,v=Date.now(),w=()=>{const T=Date.now()-v,j=Math.min(1,T/p),C=1-Math.pow(1-j,3),k=Math.floor(S+(h-S)*C);if(o(k),j<1)requestAnimationFrame(w);else{if(!y){g(!0);const I=i(e);I.leveledUp&&I.newLevel&&(u(I.newLevel),f(!0),m(I.unlockedContent||[]))}t&&setTimeout(t,500)}};requestAnimationFrame(w)},[e,n,i,t,y]);const x=PC(s,a);return l.jsxs("div",{style:{position:"fixed",bottom:"2rem",left:"50%",transform:"translateX(-50%)",zIndex:10001,width:"90%",maxWidth:"500px",background:"rgba(0, 0, 0, 0.9)",border:"2px solid #555",borderRadius:"8px",padding:"1.5rem"},children:[l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#fff",textAlign:"center"},children:["XP Gagne : +",e]}),l.jsxs("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem",color:"#aaa",textAlign:"center"},children:["Niveau ",a]}),l.jsxs("div",{style:{width:"100%",height:"30px",background:"#2a2a2a",borderRadius:"4px",overflow:"hidden",border:"1px solid #555",position:"relative"},children:[l.jsx(P.div,{initial:{width:0},animate:{width:`${x.progress*100}%`},transition:{duration:2,ease:"easeOut"},style:{height:"100%",background:"linear-gradient(90deg, #4a9eff 0%, #2ecc71 100%)",borderRadius:"4px",position:"relative",overflow:"hidden"},children:l.jsx(P.div,{animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear"},style:{position:"absolute",top:0,left:0,width:"50%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)"}})}),l.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.85rem",fontWeight:"bold",color:"#fff",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",pointerEvents:"none"},children:[x.currentLevelXP," / ",x.nextLevelXP," XP"]})]}),l.jsx(Oe,{children:c&&l.jsxs(P.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8},transition:{duration:.5,type:"spring"},style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"linear-gradient(135deg, #2c3e50 0%, #1a1a2e 100%)",border:"3px solid #f39c12",borderRadius:"12px",padding:"2rem",maxWidth:"400px",width:"90%",zIndex:10002,boxShadow:"0 10px 40px rgba(0,0,0,0.8)",textAlign:"center"},onClick:()=>f(!1),children:[l.jsx(P.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:.6,repeat:1/0,repeatType:"reverse"},style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),l.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#f39c12",marginBottom:"1rem",textShadow:"0 0 10px rgba(243, 156, 18, 0.5)"},children:["NIVEAU ",a," ATTEINT !"]}),d.length>0&&l.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#2ecc71",marginBottom:"1rem"},children:"NOUVEAU CONTENU DBLOQU"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:d.map((S,h)=>{const p=S.startsWith("origin:"),v=S.startsWith("item:"),w=p?S.replace("origin:","").charAt(0).toUpperCase()+S.replace("origin:","").slice(1):v?S.replace("item:","").replace(/_/g," ").toUpperCase():S;return l.jsx(P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.1},style:{background:"rgba(46, 204, 113, 0.2)",border:"1px solid #2ecc71",borderRadius:"6px",padding:"0.75rem",fontSize:"1rem",color:"#2ecc71"},children:p?`Origine : ${w}`:`Item : ${w}`},h)})})]}),l.jsx("button",{onClick:()=>f(!1),style:{marginTop:"1.5rem",padding:"0.75rem 2rem",fontSize:"1.1rem",fontWeight:"bold",background:"#f39c12",border:"none",borderRadius:"6px",color:"#000",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:S=>{S.currentTarget.style.background="#e67e22",S.currentTarget.style.transform="scale(1.05)"},onMouseLeave:S=>{S.currentTarget.style.background="#f39c12",S.currentTarget.style.transform="scale(1)"},children:"CONTINUER"})]})})]})}function ik(){const e=M(),{calculateRunXP:t}=Li(),[n,r]=b.useState(null),[i,s]=b.useState(null),[o,a]=b.useState(!1);return b.useEffect(()=>{const u=Ny(e);r(u),(async()=>{const{day:f,debt:d,gold:m,reputation:y,inventory:g,combatsWon:x,combatsFled:S,combatsLost:h,narrativeCounters:p,triggeredEvents:v}=e,w=g.filter(A=>A.rarity==="legendary").map(A=>A.name),T=v.length,j=t(f,m,T);s(j),a(!0);const C={id:crypto.randomUUID(),timestamp:Date.now(),characterName:"Soudard",origin:e.selectedOrigin||"deserteur",daysLived:f,finalGold:m,finalDebt:d,finalReputation:y,endType:u.type==="defeat"?u.id==="mort_combat"?"death":"debt":"victory",endTitle:u.title,legendaryItems:w,combatsWon:x,combatsFled:S,combatsLost:h,totalGoldEarned:m,counters:{cynisme:p.cynisme||0,humanite:p.humanite||0,pragmatisme:p.pragmatisme||0}};await By(C);const k=await xc(),I=await Fy(C,k);await qy(I)})()},[]),n?l.jsxs(l.Fragment,{children:[o&&i!==null&&l.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.95)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:10001,padding:"2rem",textAlign:"center"},children:[l.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#ca8"},children:["Tu as survcu ",e.day," jour",e.day>1?"s":""]}),l.jsxs("div",{style:{fontSize:"1.2rem",marginBottom:"2rem",color:"#ddd"},children:["Tu as gagn ",l.jsxs("span",{style:{color:"#4a9eff",fontWeight:"bold"},children:[i," XP"]})," !"]}),l.jsx("div",{style:{fontSize:"1rem",color:"#aaa",marginBottom:"2rem",fontStyle:"italic",maxWidth:"400px"},children:"Continue pour dbloquer de nouveaux contenus et amliorer tes prochaines runs."}),l.jsx(Wy,{xpGained:i,onAnimationComplete:()=>{setTimeout(()=>{a(!1)},1e3)}})]}),!o&&l.jsx(Uy,{ending:n})]}):null}function sk(){const e=M(),{calculateRunXP:t}=Li(),[n,r]=b.useState(null),[i,s]=b.useState(null),[o,a]=b.useState(!1);return b.useEffect(()=>{const u=Ny(e);r(u),(async()=>{const{day:f,gold:d,reputation:m,inventory:y,combatsWon:g,combatsFled:x,combatsLost:S,narrativeCounters:h,triggeredEvents:p}=e,v=y.filter(I=>I.rarity==="legendary").map(I=>I.name),w=p.length,T=t(f,d,w);s(T),a(!0);const j={id:crypto.randomUUID(),timestamp:Date.now(),characterName:"Soudard",origin:e.selectedOrigin||"deserteur",daysLived:f,finalGold:d,finalDebt:0,finalReputation:m,endType:"victory",endTitle:u.title,legendaryItems:v,combatsWon:g,combatsFled:x,combatsLost:S,totalGoldEarned:d,counters:{cynisme:h.cynisme||0,humanite:h.humanite||0,pragmatisme:h.pragmatisme||0}};await By(j);const C=await xc(),k=await Fy(j,C);await qy(k)})()},[]),n?l.jsxs(l.Fragment,{children:[l.jsx(Uy,{ending:n}),o&&i!==null&&l.jsx(Wy,{xpGained:i,onAnimationComplete:()=>{}})]}):null}const hm={head:"Tte",torso:"Torse",legs:"Jambes",hands:"Mains",weapon:"Arme",offhand:"Secondaire",accessory:"Accessoire"};function $y(){const{equipment:e,inventory:t,playerStats:n,equipItem:r,unequipItem:i,closeInventory:s}=M(),[o,a]=b.useState(void 0),u=Gh(n),{playSound:c,playHaptic:f}=Ro();return l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",flex:1,padding:"1rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[l.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:"INVENTAIRE"}),l.jsx("button",{onClick:()=>{c("ui_close"),f("button_press"),s()},children:"FERMER"})]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1.5rem",borderRadius:"8px",border:"2px solid #555",marginBottom:"1rem",display:"flex",gap:"1.5rem",alignItems:"center"},children:[l.jsx(Ly,{equipment:e,showPreview:o,size:128}),l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{fontSize:"1.1rem",marginBottom:"1rem",fontWeight:"bold"},children:"tat"}),l.jsxs("div",{style:{fontSize:"0.95rem",color:"#ccc",lineHeight:"1.8"},children:[l.jsx("div",{children:u.attack}),l.jsx("div",{children:u.defense}),l.jsx("div",{children:u.speed})]})]})]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1.5rem",borderRadius:"8px",border:"2px solid #555",marginBottom:"1rem"},children:[l.jsx("div",{style:{fontSize:"1.1rem",marginBottom:"1rem",fontWeight:"bold"},children:"quip"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.entries(e).map(([d,m])=>m?l.jsxs("div",{style:{padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px",border:`1px solid ${dt(m.rarity)}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{color:m.cursed?"#c44":dt(m.rarity),fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem"},children:[m.name,m.cursed&&l.jsx("span",{style:{fontSize:"0.65rem",padding:"0.15rem 0.35rem",background:"#c44",color:"#fff",borderRadius:"3px",fontWeight:"bold"},children:"COMPROMIS"})]}),l.jsxs("div",{style:{fontSize:"0.85rem",color:"#999"},children:[hm[d],m.cursed&&m.curseEffect&&l.jsxs("span",{style:{color:"#c44",marginLeft:"0.5rem"},children:[" ",m.curseEffect]})]})]}),l.jsx("button",{onClick:()=>i(d),style:{fontSize:"0.85rem",padding:"0.5rem 1rem"},children:"RETIRER"})]},d):null)})]}),l.jsxs("div",{"data-tutorial-inventory":!0,style:{background:"#2a2a2a",padding:"1.5rem",borderRadius:"8px",border:"2px solid #555",flex:1,overflowY:"auto"},children:[l.jsxs("div",{style:{fontSize:"1.1rem",marginBottom:"1rem",fontWeight:"bold"},children:["Inventaire (",t.length,"/10)"]}),t.length===0?l.jsx("div",{style:{color:"#888",fontStyle:"italic",textAlign:"center",padding:"2rem"},children:"Vide"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.map(d=>{var m,y,g,x,S,h;return l.jsxs("div",{style:{padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px",border:`1px solid ${dt(d.rarity)}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{color:d.cursed?"#c44":dt(d.rarity),fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.name,d.cursed&&l.jsx("span",{style:{fontSize:"0.65rem",padding:"0.15rem 0.35rem",background:"#c44",color:"#fff",borderRadius:"3px",fontWeight:"bold"},children:"COMPROMIS"})]}),d.cursed&&l.jsxs(l.Fragment,{children:[d.curseEffect&&l.jsxs("div",{style:{fontSize:"0.75rem",color:"#c44",fontStyle:"italic",marginTop:"0.25rem"},children:[" ",d.curseEffect]}),d.curseDescription&&l.jsx("div",{style:{fontSize:"0.7rem",color:"#a88",marginTop:"0.25rem"},children:d.curseDescription}),(d.hiddenMalus||d.visibleMalus)&&l.jsxs("div",{style:{fontSize:"0.7rem",color:"#f44",marginTop:"0.25rem"},children:["Malus: ",((m=d.visibleMalus)==null?void 0:m.atk)&&`ATK -${d.visibleMalus.atk} `,((y=d.visibleMalus)==null?void 0:y.def)&&`DEF -${d.visibleMalus.def} `,((g=d.visibleMalus)==null?void 0:g.vit)&&`VIT -${d.visibleMalus.vit} `,((x=d.hiddenMalus)==null?void 0:x.atk)&&`ATK -${d.hiddenMalus.atk}(cach) `,((S=d.hiddenMalus)==null?void 0:S.def)&&`DEF -${d.hiddenMalus.def}(cach) `,((h=d.hiddenMalus)==null?void 0:h.vit)&&`VIT -${d.hiddenMalus.vit}(cach) `]}),(()=>{const p=n,v={...e,[d.slot]:d},w=xt(v),T={atk:w.atk-p.atk,def:w.def-p.def,vit:w.vit-p.vit};return l.jsxs("div",{style:{fontSize:"0.7rem",marginTop:"0.5rem",padding:"0.5rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.25rem"},children:"Stats aprs quipement :"}),l.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[l.jsxs("div",{children:["ATK: ",l.jsxs("span",{style:{color:T.atk>=0?"#4a4":"#f44"},children:[T.atk>=0?"+":"",T.atk]})]}),l.jsxs("div",{children:["DEF: ",l.jsxs("span",{style:{color:T.def>=0?"#4a4":"#f44"},children:[T.def>=0?"+":"",T.def]})]}),l.jsxs("div",{children:["VIT: ",l.jsxs("span",{style:{color:T.vit>=0?"#4a4":"#f44"},children:[T.vit>=0?"+":"",T.vit]})]})]})]})})()]}),l.jsx("div",{style:{fontSize:"0.85rem",color:"#999"},children:hm[d.slot]})]}),l.jsx("button",{"data-tutorial-equip-button":!0,onMouseEnter:()=>a(d),onMouseLeave:()=>a(void 0),onClick:()=>{r(d),a(void 0),d.slot==="weapon"||d.slot==="offhand"?c("equip_metal"):c("equip_leather"),f("button_press")},style:{fontSize:"0.85rem",padding:"0.5rem 1rem"},children:"QUIPER"})]},d.id)})})]})]})}function ok(){const{inventory:e,marketStock:t,gold:n,reputation:r,sellItem:i,buyItem:s,generateMarketStock:o,closeInventory:a}=M(),[u,c]=b.useState(null),[f,d]=b.useState(null),{playSound:m,playHaptic:y}=Ro();b.useEffect(()=>{t.length===0&&o()},[t.length,o]);const g=p=>{c(p)},x=()=>{u&&(i(u),m("coins"),y("button_press"),c(null))},S=p=>{d(p)},h=()=>{f&&s(f)&&(m("coins_loss"),y("button_press"),d(null))};return l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",flex:1,padding:"1rem",overflowY:"auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[l.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"MARCH AUX CHAROGNES"}),l.jsxs("div",{style:{fontSize:"1rem",color:"#aaa"},children:["Or : ",l.jsxs("span",{style:{color:"#ca8",fontWeight:"bold"},children:[n,""]})," | ","Rputation : ",l.jsx("span",{style:{color:"#ddd"},children:"".repeat(r)})]})]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"},children:"VENTE"}),e.length===0?l.jsx("div",{style:{color:"#888",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"Inventaire vide"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.map(p=>{const v=vl(p,r),w=dt(p.rarity);return l.jsxs("div",{style:{background:"#1a1a1a",padding:"0.75rem",borderRadius:"4px",border:`1px solid ${w}`,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:w},children:p.name}),l.jsx("div",{style:{fontSize:"0.8rem",color:"#888"},children:hi(p.rarity)})]}),l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#ca8"},children:[v,""]})]}),l.jsx(gi,{item:p,size:"small",showLabel:!1}),l.jsx("button",{onClick:()=>g(p),style:{fontSize:"0.9rem",padding:"0.5rem"},children:"VENDRE"})]},p.id)})})]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"},children:"ACHAT"}),t.length===0?l.jsx("div",{style:{color:"#888",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"Stock vide"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(p=>{const v=pn(p,r),w=dt(p.rarity),T=n>=v;return l.jsxs("div",{style:{background:"#1a1a1a",padding:"0.75rem",borderRadius:"4px",border:`1px solid ${w}`,display:"flex",flexDirection:"column",gap:"0.5rem",opacity:T?1:.6},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:w},children:p.name}),l.jsx("div",{style:{fontSize:"0.8rem",color:"#888"},children:hi(p.rarity)})]}),l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:T?"#ca8":"#c44"},children:[v,""]})]}),l.jsx(gi,{item:p,size:"small",showLabel:!1}),l.jsx("button",{onClick:()=>S(p),disabled:!T,style:{fontSize:"0.9rem",padding:"0.5rem",opacity:T?1:.5,cursor:T?"pointer":"not-allowed"},children:"ACHETER"})]},p.id)})})]}),l.jsx("button",{onClick:a,style:{fontSize:"1rem",padding:"1rem",width:"100%"},children:"RETOUR"}),u&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs(P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},style:{background:"#2a2a2a",padding:"2rem",borderRadius:"8px",border:"2px solid #555",maxWidth:"400px",width:"90%"},children:[l.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem",textAlign:"center"},children:["Vendre ",u.name," ?"]}),l.jsxs("div",{style:{fontSize:"1.1rem",textAlign:"center",marginBottom:"1.5rem",color:"#ca8"},children:[vl(u,r),""]}),l.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[l.jsx("button",{onClick:()=>c(null),style:{flex:1},children:"ANNULER"}),l.jsx("button",{onClick:x,style:{flex:1,background:"#3a2a2a"},children:"VENDRE"})]})]})}),f&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs(P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},style:{background:"#2a2a2a",padding:"2rem",borderRadius:"8px",border:"2px solid #555",maxWidth:"400px",width:"90%"},children:[l.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem",textAlign:"center"},children:["Acheter ",f.name," ?"]}),l.jsxs("div",{style:{fontSize:"1.1rem",textAlign:"center",marginBottom:"1.5rem",color:n>=pn(f,r)?"#ca8":"#c44"},children:[pn(f,r),""]}),n<pn(f,r)&&l.jsx("div",{style:{color:"#c44",textAlign:"center",marginBottom:"1rem",fontSize:"0.9rem"},children:"Or insuffisant"}),l.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[l.jsx("button",{onClick:()=>d(null),style:{flex:1},children:"ANNULER"}),l.jsx("button",{onClick:h,disabled:n<pn(f,r),style:{flex:1,background:"#3a2a2a",opacity:n>=pn(f,r)?1:.5},children:"ACHETER"})]})]})})]})}function ak({arc:e,characterName:t}){if(!e)return null;const n=e.trustLevel,r=e.storyStage,i=o=>o<=2?"#c44":o<=5?"#ca8":o<=7?"#4a8":"#2ecc71",s=o=>{switch(o){case"menaces":return"Menaces";case"negociations":return"Ngociations";case"ultimatum":return"Ultimatum";case"consequences":return"Consquences";default:return o}};return l.jsxs("div",{style:{background:"#1a1a1a",padding:"1rem",borderRadius:"6px",border:"1px solid #444",marginTop:"1rem"},children:[l.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:"0.75rem",color:"#ca8",textAlign:"center"},children:["Relation avec ",t]}),l.jsxs("div",{style:{marginBottom:"0.75rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem",fontSize:"0.8rem",color:"#aaa"},children:[l.jsx("span",{children:"Confiance"}),l.jsxs("span",{style:{color:i(n),fontWeight:"bold"},children:[n,"/10"]})]}),l.jsx("div",{style:{width:"100%",height:"12px",background:"#2a2a2a",borderRadius:"6px",overflow:"hidden",border:"1px solid #444"},children:l.jsx(P.div,{initial:{width:0},animate:{width:`${n/10*100}%`},transition:{duration:.5},style:{height:"100%",background:`linear-gradient(90deg, ${i(n)} 0%, ${i(n)}80 100%)`,borderRadius:"6px"}})})]}),l.jsxs("div",{style:{fontSize:"0.85rem",color:"#888",textAlign:"center",fontStyle:"italic"},children:["Stage : ",s(r)]})]})}function lk(){const{debt:e,gold:t,repayDebt:n,closeInventory:r,setNPCFlag:i,npcFlags:s,day:o,getCharacterArc:a}=M(),[u,c]=b.useState(0),[f,d]=b.useState(!1),[m,y]=b.useState(!1),[g,x]=b.useState(0),{triggerShake:S}=_y();b.useEffect(()=>{s.metMorten||i("metMorten",!0)},[s.metMorten,i]);const h=80,p=e-h,v=e,w=Math.min(t,e),T=()=>{u>0&&u<=w&&(n(u),x(u),d(!0),y(!0),S(2,400),setTimeout(()=>{d(!1),y(!1),c(0),x(0)},2e3))},j=a("morten"),C=(j==null?void 0:j.storyStage)||"menaces",k=(j==null?void 0:j.trustLevel)||0,A=(()=>{if(e===0)return{text:`"Tu as pay ta dette. Tu es libre. Mais souviens-toi : je n'oublie jamais."`,tone:"respectful",color:"#4a8"};const{MORTEN_ARC_CONFIG:G}=require("../features/narrative/characterArcs"),Ae=G.dialogues[C]||[],yt=o%Ae.length,At=Ae[yt]||Ae[0]||`"Tu me dois de l'argent."`;let qe="neutral",B="#ccc";return C==="menaces"?(qe="threatening",B="#c44"):C==="negociations"?(qe=k>=5?"surprised":"neutral",B=k>=5?"#ca8":"#ccc"):C==="ultimatum"?(qe="threatening",B="#c44"):C==="consequences"&&(qe="threatening",B="#8B0000"),{text:`"${At}"`,tone:qe,color:B}})(),V=A.color;return l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",flex:1,padding:"1rem",justifyContent:"center"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[l.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"CHOPPE DE MORTEN"}),l.jsxs("div",{style:{fontSize:"1rem",color:"#aaa"},children:["Or : ",l.jsxs("span",{style:{color:"#ca8",fontWeight:"bold"},children:[t,""]})]})]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1.5rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"},children:"DETTE"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"1rem",fontSize:"0.95rem",color:"#ccc"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{children:"Dette initiale :"}),l.jsxs("span",{children:[h,""]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{children:"Intrts :"}),l.jsxs("span",{style:{color:"#c44"},children:["+",p,""]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.1rem",fontWeight:"bold",marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #555"},children:[l.jsx("span",{children:"Total :"}),l.jsxs("span",{style:{color:"#c44"},children:[v,""]})]})]}),l.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"#1a1a1a",borderRadius:"4px",border:`1px solid ${V}`,fontSize:"0.95rem",color:V,fontStyle:"italic",lineHeight:"1.6"},children:A.text}),l.jsx(ak,{arc:j,characterName:"Morten"})]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1.5rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"1rem"},children:"REMBOURSER"}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#aaa"},children:[l.jsx("span",{children:"Montant :"}),l.jsxs("span",{style:{color:"#ca8",fontWeight:"bold"},children:[u,""]})]}),l.jsx("input",{type:"range",min:"0",max:w,value:u,onChange:G=>c(parseInt(G.target.value)||0),style:{width:"100%",height:"8px",background:"#1a1a1a",borderRadius:"4px",outline:"none"}}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"#666",marginTop:"0.25rem"},children:[l.jsx("span",{children:"0"}),l.jsxs("span",{children:[w,""]})]})]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[l.jsx("button",{onClick:()=>c(Math.min(10,w)),style:{flex:1,fontSize:"0.85rem",padding:"0.5rem"},children:"10"}),l.jsx("button",{onClick:()=>c(Math.min(25,w)),style:{flex:1,fontSize:"0.85rem",padding:"0.5rem"},children:"25"}),l.jsx("button",{onClick:()=>c(Math.min(50,w)),style:{flex:1,fontSize:"0.85rem",padding:"0.5rem"},children:"50"}),l.jsx("button",{onClick:()=>c(w),style:{flex:1,fontSize:"0.85rem",padding:"0.5rem"},children:"TOUT"})]}),l.jsxs("button",{onClick:T,disabled:u===0||u>w,style:{width:"100%",fontSize:"1.1rem",padding:"1rem",opacity:u>0&&u<=w?1:.5,cursor:u>0&&u<=w?"pointer":"not-allowed"},children:["REMBOURSER ",u,""]}),u>0&&!m&&l.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px",fontSize:"0.9rem",color:"#aaa",textAlign:"center"},children:["Nouvelle dette : ",l.jsxs("span",{style:{color:"#c44"},children:[e-u,""]})," | ","Or restant : ",l.jsxs("span",{style:{color:"#ca8"},children:[t-u,""]})]}),m&&l.jsxs(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{marginTop:"1rem",padding:"1rem",background:"#1a2a1a",borderRadius:"4px",border:"2px solid #4a4",fontSize:"1rem",textAlign:"center"},children:[l.jsx(P.div,{animate:f?{scale:[1,1.1,1],color:["#c44","#4a4","#c44"]}:{},transition:{duration:.5},style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#4a4"},children:" Remboursement effectu !"}),l.jsxs("div",{style:{fontSize:"0.95rem",color:"#ccc"},children:["Nouvelle dette : ",l.jsxs(P.span,{animate:f?{scale:[1,1.2,1]}:{},style:{color:"#c44",fontWeight:"bold"},children:[e,""]}),f&&l.jsxs(P.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},style:{color:"#4a4",marginLeft:"0.5rem",fontWeight:"bold"},children:["-",g,""]})]}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"#aaa",marginTop:"0.25rem"},children:["Or restant : ",l.jsxs("span",{style:{color:"#ca8"},children:[t,""]})]})]})]}),l.jsx("button",{onClick:r,style:{fontSize:"1rem",padding:"1rem",width:"100%"},children:"RETOUR"})]})}function uk(){const{equipment:e,inventory:t,gold:n,reputation:r,forgeStock:i,repairItem:s,buyForgeItem:o,generateForgeStock:a,closeInventory:u,narrativeCounters:c}=M(),[f,d]=b.useState(!1),[m,y]=b.useState(null);b.useEffect(()=>{i===null&&a(),f||d(!0)},[i,a,f]);const g=[];Object.entries(e).forEach(([v,w])=>{w&&w.durability<w.maxDurability&&g.push({item:w,location:"equipment",slot:v})}),t.forEach(v=>{v.durability<v.maxDurability&&g.push({item:v,location:"inventory"})});const x=v=>{s(v)&&y(null)},S=()=>{i&&o(i)},h=m?m.durability/m.maxDurability*100:100,p=m?j1(h,r):M1(r);return l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",flex:1,padding:"1rem",overflowY:"auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[l.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"FORGE DE BERTRAM"}),l.jsxs("div",{style:{fontSize:"1rem",color:"#aaa"},children:["Or : ",l.jsxs("span",{style:{color:"#ca8",fontWeight:"bold"},children:[n,""]})," | ","Rputation : ",l.jsx("span",{style:{color:"#ddd"},children:"".repeat(r)})]})]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsxs("div",{style:{fontSize:"0.9rem",color:"#aaa",fontStyle:"italic",lineHeight:"1.6",marginBottom:"0.5rem"},children:['"',E1(f),'"']}),m&&l.jsxs("div",{style:{fontSize:"0.9rem",color:"#ca8",fontStyle:"italic",lineHeight:"1.6"},children:['"',p,'"']}),!m&&l.jsxs("div",{style:{fontSize:"0.9rem",color:"#888",fontStyle:"italic",lineHeight:"1.6"},children:['"',p,'"']})]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"},children:"RPARATION"}),g.length===0?l.jsx("div",{style:{color:"#888",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"Aucun item  rparer"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:g.map(({item:v,location:w,slot:T})=>{const j=hn(v,c),C=dt(v.rarity),k=n>=j;return l.jsxs("div",{style:{background:"#1a1a1a",padding:"0.75rem",borderRadius:"4px",border:`1px solid ${C}`,display:"flex",flexDirection:"column",gap:"0.5rem",opacity:k?1:.6},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:C},children:v.name}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"#888"},children:[hi(v.rarity)," ",w==="equipment"?"(quip)":""]})]}),l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:k?"#ca8":"#c44"},children:[j,""]})]}),l.jsx(gi,{item:v,size:"small",showLabel:!0}),l.jsx("button",{onClick:()=>y(v),disabled:!k,style:{fontSize:"0.9rem",padding:"0.5rem",opacity:k?1:.5,cursor:k?"pointer":"not-allowed"},children:"RPARER"})]},`${w}_${v.id}_${T||""}`)})})]}),i&&l.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"},children:"OBJET ARTISANAL"}),l.jsxs("div",{style:{background:"#1a1a1a",padding:"0.75rem",borderRadius:"4px",border:`2px solid ${dt(i.rarity)}`,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:dt(i.rarity)},children:i.name}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"#888"},children:[hi(i.rarity),"  Qualit artisanale"]})]}),l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:n>=i.value*2?"#ca8":"#c44"},children:[i.value*2,""]})]}),l.jsx(gi,{item:i,size:"small",showLabel:!1}),l.jsx("button",{onClick:S,disabled:n<i.value*2||t.length>=10,style:{fontSize:"0.9rem",padding:"0.5rem",opacity:n>=i.value*2&&t.length<10?1:.5,cursor:n>=i.value*2&&t.length<10?"pointer":"not-allowed"},children:"ACHETER"})]})]}),l.jsx("button",{onClick:u,style:{fontSize:"1rem",padding:"1rem",width:"100%"},children:"RETOUR"}),m&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"#2a2a2a",padding:"2rem",borderRadius:"8px",border:"2px solid #555",maxWidth:"400px",width:"90%"},children:[l.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem",textAlign:"center"},children:["Rparer ",m.name," ?"]}),l.jsxs("div",{style:{fontSize:"1.1rem",textAlign:"center",marginBottom:"1.5rem",color:n>=hn(m)?"#ca8":"#c44"},children:[hn(m),""]}),n<hn(m)&&l.jsx("div",{style:{color:"#c44",textAlign:"center",marginBottom:"1rem",fontSize:"0.9rem"},children:"Or insuffisant"}),l.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[l.jsx("button",{onClick:()=>y(null),style:{flex:1},children:"ANNULER"}),l.jsx("button",{onClick:()=>x(m),disabled:n<hn(m),style:{flex:1,background:"#3a2a2a",opacity:n>=hn(m)?1:.5},children:"RPARER"})]})]})})]})}const ck=[{id:"gareth",name:"Gareth le Borgne",description:"Un vtran avec une cicatrice sur l'il. Il observe tout.",available:e=>e>=3,firstVisitDialogue:"gareth_intro",dialogues:{gareth_intro:[{text:"Gareth le Borgne. J'ai survcu  trois guerres. Toi, tu vas survivre  quoi ?",speaker:"npc",choices:[{text:"Des conseils ?",nextDialogueId:"gareth_advice",flag:"metGareth"},{text:"Juste observer.",nextDialogueId:"gareth_observe"}]}],gareth_advice:[{text:"coute. Les combats, c'est 70% prparation, 30% chance. quipe-toi bien.",speaker:"npc"},{text:"Et n'oublie pas : parfois, fuir, c'est survivre.",speaker:"npc"}],gareth_observe:[{text:"Bien. Observer, c'est apprendre.",speaker:"npc"}]}},{id:"margaux",name:"Sur Margaux",description:"Une religieuse qui aide les perdus. Elle a l'air fatigue.",available:e=>e>=5,firstVisitDialogue:"margaux_intro",dialogues:{margaux_intro:[{text:"Tu as l'air perdu. Je peux t'aider, si tu veux.",speaker:"npc",choices:[{text:"Parler de la dette.",nextDialogueId:"margaux_debt",flag:"metMargaux"},{text:"Juste couter.",nextDialogueId:"margaux_listen"}]}],margaux_debt:[{text:"La dette... C'est un poids. Mais tu n'es pas seul.",speaker:"npc"},{text:"Certains disent qu'il y a des trsors dans les ruines au nord. Peut-tre une solution ?",speaker:"npc"}],margaux_listen:[{text:"Parfois, couter, c'est dj beaucoup.",speaker:"npc"}]}},{id:"colporteur",name:"Le Colporteur",description:"Un marchand itinrant avec un sac plein de curiosits.",available:()=>Math.random()<.3,firstVisitDialogue:"colporteur_intro",dialogues:{colporteur_intro:[{text:"Des objets rares, des nouvelles, des secrets... Tout se vend, tout s'achte.",speaker:"npc",choices:[{text:"Quelles nouvelles ?",nextDialogueId:"colporteur_news",flag:"metColporteur"},{text:"Voir tes objets.",nextDialogueId:"colporteur_items"}]}],colporteur_news:[{text:"On dit qu'un convoi traverse la rgion bientt. Riche, mais bien gard.",speaker:"npc"},{text:"Et il y a des rumeurs sur un trsor dans les ruines du fort abandonn.",speaker:"npc"}],colporteur_items:[{text:"Je n'ai rien de spcial aujourd'hui. Reviens demain.",speaker:"npc"}]}},{id:"ivrogne",name:"L'Ivrogne",description:"Un homme qui boit depuis le matin. Il marmonne des choses incomprhensibles.",available:()=>!0,firstVisitDialogue:"ivrogne_intro",dialogues:{ivrogne_intro:[{text:"Mmmh... Tu sais... Les murs... Ils coutent...",speaker:"npc",choices:[{text:"Que veux-tu dire ?",nextDialogueId:"ivrogne_walls"},{text:"Ignorer.",nextDialogueId:"ivrogne_ignore"}]}],ivrogne_walls:[{text:"Les murs... Ils savent tout... Morten... Il coute...",speaker:"npc"},{text:"Fais attention... Fais attention...",speaker:"npc"}],ivrogne_ignore:[{text:"Mmmh... Tu verras... Tu verras...",speaker:"npc"}]}}];function dk(e){const t=[],n=/\*\*([^*]+)\*\*/g,r=/__([^_]+)__/g,i=/\*([^*_]+)\*/g,s={};let o=0,a=e;return a=a.replace(n,(c,f)=>{const d=`__PLACEHOLDER_${o}__`;return s[d]={text:f,type:"name"},o++,d}),a=a.replace(r,(c,f)=>{const d=`__PLACEHOLDER_${o}__`;return s[d]={text:f,type:"danger"},o++,d}),a=a.replace(i,(c,f)=>{const d=`__PLACEHOLDER_${o}__`;return s[d]={text:f,type:"item"},o++,d}),a.split(/(\s+)/).forEach(c=>{if(c.trim()==="")t.push({text:c,type:"normal"});else if(c.startsWith("__PLACEHOLDER_")&&c.endsWith("__")){const f=s[c];f&&t.push(f)}else t.push({text:c,type:"normal"})}),t}function fk(e){switch(e){case"name":return"#f4d03f";case"danger":return"#8B0000";case"item":return"#5dade2";default:return"#ffffff"}}function mk({text:e,speed:t,onComplete:n,skipOnClick:r=!0,style:i}){const s=Dt(),o=t||(s?20:30),[a,u]=b.useState(""),[c,f]=b.useState(!1),d=b.useRef(null),m=b.useRef(0);b.useEffect(()=>{m.current=0,u(""),f(!1);const x=()=>{if(m.current>=e.length){f(!0),n&&n();return}m.current++;const S=e.substring(0,m.current);u(S),d.current=setTimeout(x,o)};return d.current=setTimeout(x,o),()=>{d.current&&clearTimeout(d.current)}},[e,o,n]);const y=()=>{r&&!c&&(d.current&&clearTimeout(d.current),u(e),f(!0),n&&n())},g=()=>{const x=dk(a),S=[];let h=0;return x.forEach((p,v)=>{const w=fk(p.type);v===x.length-1&&!c?(S.push(l.jsx("span",{style:{color:w},children:p.text},`word-${h++}`)),S.push(l.jsx(P.span,{animate:{opacity:[1,0,1]},transition:{duration:.8,repeat:1/0},style:{color:w,marginLeft:"2px"},children:"|"},`cursor-${h++}`))):S.push(l.jsx("span",{style:{color:w},children:p.text},`word-${h++}`))}),S};return l.jsx("div",{onClick:y,style:{cursor:r&&!c?"pointer":"default",lineHeight:"1.8",fontFamily:"serif",...i},children:g()})}function pk(){const{day:e,gold:t,npcFlags:n,rumors:r,hasEatenToday:i,setNPCFlag:s,generateRumors:o,buyMeal:a,closeInventory:u}=M(),c=Dt(),[f,d]=b.useState(null),[m,y]=b.useState([]),[g,x]=b.useState(0),[S,h]=b.useState(!1);b.useEffect(()=>{const C=r.filter(k=>k.day===e);C.length===0&&o(),C.length>0&&!n.firstRumorSeen&&(h(!0),M.setState({npcFlags:{...n,firstRumorSeen:!0}}))},[e,r]);const p=ck.filter(C=>C.available(e,n)),v=C=>{d(C);const k=(n[`met${C.id.charAt(0).toUpperCase()+C.id.slice(1)}`],C.firstVisitDialogue||"intro"),I=C.dialogues[k]||[];y(I),x(0),n[`met${C.id.charAt(0).toUpperCase()+C.id.slice(1)}`]||s(`met${C.id.charAt(0).toUpperCase()+C.id.slice(1)}`,!0)},w=C=>{if(C.flag&&s(C.flag,!0),C.action&&C.action(),C.nextDialogueId&&f){const k=f.dialogues[C.nextDialogueId]||[];y(k),x(0)}else d(null),y([]),x(0)},T=m[g],j=r.filter(C=>C.day===e);return l.jsxs(l.Fragment,{children:[S&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:l.jsxs("div",{style:{background:"#2a2a2a",padding:"2rem",borderRadius:"8px",maxWidth:"500px",border:"2px solid #555"},children:[l.jsx("h2",{style:{marginTop:0,marginBottom:"1rem",color:"#ddd"},children:"Les Rumeurs"}),l.jsx("p",{style:{color:"#aaa",marginBottom:"1.5rem",lineHeight:"1.6"},children:"Les rumeurs t'aident  planifier tes explorations. Elles apparaissent avec une icne sur les lieux de la carte."}),l.jsxs("div",{style:{color:"#aaa",lineHeight:"1.6",marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{marginBottom:"0.75rem",padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsx("strong",{style:{color:"#ddd"},children:" Combat"})," : Plus de combats dans ce lieu"]}),l.jsxs("div",{style:{marginBottom:"0.75rem",padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsx("strong",{style:{color:"#ddd"},children:" Trsor"})," : Plus de loot et items meilleurs"]}),l.jsxs("div",{style:{marginBottom:"0.75rem",padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsx("strong",{style:{color:"#ddd"},children:" vnement"})," : Plus d'vnements narratifs"]}),l.jsxs("div",{style:{padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsx("strong",{style:{color:"#ddd"},children:" Lieu"})," : Pointe un lieu  explorer"]})]}),l.jsx("button",{onClick:()=>h(!1),style:{padding:"0.75rem 1.5rem",fontSize:"1rem",background:"#4a4",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",width:"100%"},children:"Compris"})]})}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",flex:1,padding:"1rem",overflowY:"auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[l.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"TAVERNE DU PENDU"}),l.jsxs("div",{style:{fontSize:"1rem",color:"#aaa"},children:["Or : ",l.jsxs("span",{style:{color:"#ca8",fontWeight:"bold"},children:[t,""]})]})]}),l.jsx("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555"},children:l.jsx("div",{style:{fontSize:"0.9rem",color:"#aaa",fontStyle:"italic",lineHeight:"1.6"},children:`"La fume de pipe, l'odeur de bire rance, les murmures. Ici, on parle, on coute, on oublie."`})}),j.length>0&&l.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"0.75rem"},children:"RUMEURS"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:j.map(C=>{const k=C.hintType==="combat"?"":C.hintType==="loot"?"":C.hintType==="event"?"":C.hintType==="location"?"":"",I=C.hintType==="combat"?"Augmente les chances de combat":C.hintType==="loot"?"Augmente les chances de trsor":C.hintType==="event"?"Peut dclencher un vnement":C.hintType==="location"?"Cible un lieu spcifique":"";return l.jsx("div",{style:{padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px",fontSize:"0.9rem",color:"#ccc",fontStyle:"italic",lineHeight:"1.6",border:"1px solid #333",position:"relative"},title:I,children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.2rem"},children:k}),l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{children:['"',C.text,'"']}),I&&l.jsx("div",{style:{fontSize:"0.75rem",color:"#888",marginTop:"0.25rem",fontStyle:"normal"},children:I})]})]})},C.id)})})]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"0.75rem"},children:["PRSENTS (",p.length,")"]}),p.length===0?l.jsx("div",{style:{color:"#888",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"La taverne est vide"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:p.map(C=>l.jsxs("div",{onClick:()=>v(C),style:{padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px",border:"1px solid #555",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:k=>{k.currentTarget.style.background="#222"},onMouseLeave:k=>{k.currentTarget.style.background="#1a1a1a"},children:[l.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:"#ddd",marginBottom:"0.25rem"},children:C.name}),l.jsx("div",{style:{fontSize:"0.85rem",color:"#888"},children:C.description})]},C.id))})]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"0.75rem"},children:"SERVICES"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.jsx("div",{style:{padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.95rem",color:"#ccc"},children:"Logement (2/nuit)"}),l.jsx("div",{style:{fontSize:"0.8rem",color:"#888"},children:"Dduit automatiquement au crpuscule"})]})}),l.jsx("button",{onClick:()=>{a()},disabled:i||t<4,style:{padding:"0.75rem",background:i||t<4?"#1a1a1a":"#2a2a2a",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #555",cursor:i||t<4?"not-allowed":"pointer",opacity:i||t<4?.6:1,transition:"background 0.2s"},onMouseEnter:C=>{!i&&t>=4&&(C.currentTarget.style.background="#333")},onMouseLeave:C=>{!i&&t>=4&&(C.currentTarget.style.background="#2a2a2a")},children:l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.95rem",color:i||t<4?"#888":"#ccc",textAlign:"left"},children:"Repas (4)"}),l.jsx("div",{style:{fontSize:"0.8rem",color:i?"#ca8":t<4?"#666":"#888",textAlign:"left"},children:i?" Dj mang aujourd'hui":t<4?"Or insuffisant":"Restaure ton moral (+1 humanit)"})]})})]})]}),l.jsx("button",{onClick:u,style:{fontSize:"1rem",padding:"1rem",width:"100%"},children:"RETOUR"}),f&&T&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"#2a2a2a",padding:"2rem",borderRadius:"8px",border:"2px solid #555",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflowY:"auto"},children:[l.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"1rem",color:"#ca8"},children:f.name}),l.jsx(mk,{text:T.text,speed:30,style:{fontSize:c?"1.05rem":"1rem",color:"#ddd",marginBottom:"1.5rem",fontStyle:T.speaker==="npc"?"italic":"normal"}}),T.choices&&T.choices.length>0?l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:T.choices.map((C,k)=>l.jsx("button",{onClick:()=>w(C),style:{padding:"0.75rem",textAlign:"left",fontSize:"0.95rem"},children:C.text},k))}):l.jsx("button",{onClick:()=>{g<m.length-1?x(g+1):(d(null),y([]),x(0))},style:{width:"100%",padding:"0.75rem",fontSize:"1rem"},children:g<m.length-1?"SUIVANT":"FERMER"})]})})]})]})}function hk(e,t){return e.requirements?!(e.requirements.gold&&t.gold<e.requirements.gold||e.requirements.reputation&&t.reputation<e.requirements.reputation||e.requirements.item&&!(Object.values(t.equipment).some(r=>(r==null?void 0:r.id)===e.requirements.item)||t.inventory.some(r=>r.id===e.requirements.item))||e.requirements.flag&&!t.npcFlags[e.requirements.flag]||e.requirements.humanite&&(t.narrativeCounters.humanite||0)<e.requirements.humanite||e.requirements.cynisme&&(t.narrativeCounters.cynisme||0)<e.requirements.cynisme||e.requirements.pragmatisme&&(t.narrativeCounters.pragmatisme||0)<e.requirements.pragmatisme):!0}function gk(){const{eventResult:e,applyEventConsequence:t,finishEvent:n}=M(),r=Dt(),[i,s]=b.useState(null),[o,a]=b.useState(!1),[u,c]=b.useState(!1),f=e==null?void 0:e.eventId,d=Nt.find(g=>g.id===f);if(!d)return console.error("vnement non trouv:",{eventId:f,availableIds:Nt.map(g=>g.id),eventResult:e}),l.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#ccc"},children:[l.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"1rem",color:"#c44"},children:"vnement non trouv"}),l.jsxs("div",{style:{fontSize:"0.9rem",marginBottom:"1rem",color:"#888"},children:["ID: ",f||"undefined"]}),l.jsx("button",{onClick:n,style:{marginTop:"1rem",padding:"0.75rem 1.5rem",fontSize:"1rem",background:"#2a2a2a",border:"1px solid #555",borderRadius:"4px",color:"#ccc",cursor:"pointer"},children:"RETOUR"})]});const m=g=>{s(g),a(!0),t(g.consequences),(g.consequences.debt||g.consequences.durabilityLoss||g.consequences.gold&&g.consequences.gold<-10)&&(c(!0),setTimeout(()=>c(!1),500))},y=()=>{s(null),a(!1),n()};return l.jsx(zy,{intensity:3,duration:400,trigger:u,children:l.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1,position:"relative",padding:"1rem",maxWidth:"600px",margin:"0 auto",width:"100%"},children:[l.jsxs("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden",paddingBottom:"140px",WebkitOverflowScrolling:"touch"},children:[l.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",textAlign:"center",marginBottom:"1rem",color:"#fff"},children:d.title}),l.jsx("div",{style:{background:"#2a2a2a",padding:"1.5rem",borderRadius:"8px",border:"2px solid #555",fontSize:"1rem",lineHeight:"1.6",color:"#ccc",marginBottom:"1.5rem"},children:d.description}),o&&i&&l.jsx("div",{style:{background:"#2a1a1a",padding:"1.5rem",borderRadius:"8px",border:"1px solid #555",fontSize:r?"1rem":"0.95rem",lineHeight:"1.6",color:"#ca8",fontStyle:"italic",marginBottom:"1.5rem"},children:i.consequences.narrative||"Tu as fait ton choix."})]}),l.jsxs("div",{style:{position:"absolute",bottom:0,left:0,right:0,zIndex:10,padding:"1rem",background:"linear-gradient(to top, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.85) 70%, transparent 100%)",borderTop:"1px solid #333"},children:[!o&&l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:d.choices.map(g=>{const x=hk(g,M.getState());return l.jsxs("button",{onClick:()=>m(g),disabled:!x,style:{padding:"1rem",fontSize:"1rem",minHeight:r?"48px":"44px",textAlign:"left",background:x?"#1a1a1a":"#0a0a0a",border:`1px solid ${x?"#555":"#333"}`,borderRadius:"4px",color:x?"#ddd":"#999",cursor:x?"pointer":"not-allowed",opacity:x?1:.5,boxShadow:"0 -2px 8px rgba(0, 0, 0, 0.3)"},children:[g.text,!x&&g.requirements&&l.jsxs("div",{style:{fontSize:"0.8rem",color:"#888",marginTop:"0.25rem"},children:[g.requirements.gold&&`(Besoin: ${g.requirements.gold})`,g.requirements.reputation&&`(Besoin: ${g.requirements.reputation})`,g.requirements.item&&`(Besoin: ${g.requirements.item})`,g.requirements.humanite&&`(Besoin: Humanit ${g.requirements.humanite}+)`,g.requirements.cynisme&&`(Besoin: Cynisme ${g.requirements.cynisme}+)`,g.requirements.pragmatisme&&`(Besoin: Pragmatisme ${g.requirements.pragmatisme}+)`]})]},g.id)})}),o&&l.jsx("button",{onClick:y,style:{fontSize:r?"1rem":"1.1rem",padding:"1rem",minHeight:r?"48px":"44px",width:"100%",background:"#2a2a2a",border:"1px solid #555",borderRadius:"4px",color:"#fff",cursor:"pointer",boxShadow:"0 -2px 8px rgba(0, 0, 0, 0.3)"},children:"CONTINUER"})]})]})})}function yk(){var f,d,m,y,g,x;const{startNewGame:e}=M(),{playerLevel:t}=Li(),[n,r]=b.useState("deserteur"),[i,s]=b.useState(null),[o,a]=b.useState(!0);b.useEffect(()=>{u()},[]);const u=async()=>{try{const S=await xc();s(S)}catch(S){console.error("Erreur chargement unlocks:",S)}finally{a(!1)}},c=()=>{!i||!Mr(n,i)||e(n)};return o||!i?l.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:l.jsx("div",{children:"Chargement..."})}):l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",flex:1,padding:"1rem",overflowY:"auto"},children:[l.jsx("div",{style:{textAlign:"center",fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"CHOISIS TON ORIGINE"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:St.map(S=>{const h=Mr(S.id,i),p=!S.requiredLevel||t>=S.requiredLevel,v=h&&p;return l.jsxs("div",{onClick:()=>v&&r(S.id),style:{background:n===S.id?"#3a3a3a":"#2a2a2a",padding:"1rem",borderRadius:"8px",border:`2px solid ${n===S.id?"#555":"#333"}`,cursor:v?"pointer":"not-allowed",opacity:v?1:.6},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:[v?"":""," ",S.name]}),n===S.id&&v&&l.jsx("div",{style:{fontSize:"0.9rem",color:"#2ecc71"},children:"SLECTIONN"})]}),l.jsx("div",{style:{fontSize:"0.9rem",color:"#aaa",marginBottom:"0.5rem",lineHeight:"1.5"},children:S.description}),!v&&l.jsx("div",{style:{fontSize:"0.8rem",color:"#888",fontStyle:"italic"},children:!p&&S.requiredLevel?l.jsxs("span",{style:{color:"#f39c12"},children:["Niveau ",S.requiredLevel," requis (Niveau actuel : ",t,")"]}):l.jsxs("span",{children:["Condition : ",vk(S.id)]})}),v&&(S.bonuses.stats||S.bonuses.gold||S.maluses.stats||S.maluses.debt)&&l.jsxs("div",{style:{fontSize:"0.85rem",color:"#888",marginTop:"0.5rem",display:"flex",gap:"1rem"},children:[S.bonuses.stats&&l.jsxs("div",{children:["Bonus : ",S.bonuses.stats.atk?`+${S.bonuses.stats.atk} ATK `:"",S.bonuses.stats.def?`+${S.bonuses.stats.def} DEF `:"",S.bonuses.stats.vit?`+${S.bonuses.stats.vit} VIT `:""]}),S.maluses.stats&&l.jsxs("div",{children:["Malus : ",S.maluses.stats.atk?`${S.maluses.stats.atk} ATK `:"",S.maluses.stats.def?`${S.maluses.stats.def} DEF `:"",S.maluses.stats.vit?`${S.maluses.stats.vit} VIT `:""]}),S.bonuses.gold&&l.jsxs("div",{style:{color:"#2ecc71"},children:["+",S.bonuses.gold,""]}),S.maluses.debt&&l.jsxs("div",{style:{color:"#c44"},children:["Dette +",S.maluses.debt,""]})]})]},S.id)})}),l.jsx("button",{onClick:c,disabled:!i||!Mr(n,i)||((f=St.find(S=>S.id===n))==null?void 0:f.requiredLevel)!==void 0&&t<(((d=St.find(S=>S.id===n))==null?void 0:d.requiredLevel)??0),style:{fontSize:"1.1rem",padding:"1rem",width:"100%",opacity:i&&Mr(n,i)&&(!((m=St.find(S=>S.id===n))!=null&&m.requiredLevel)||t>=(((y=St.find(S=>S.id===n))==null?void 0:y.requiredLevel)||0))?1:.5,cursor:i&&Mr(n,i)&&(!((g=St.find(S=>S.id===n))!=null&&g.requiredLevel)||t>=(((x=St.find(S=>S.id===n))==null?void 0:x.requiredLevel)||0))?"pointer":"not-allowed"},children:"COMMENCER"})]})}function vk(e){return{veteran:"1 victoire",pillard:"50 items loots au total",moine:"5 monastres explors",noble:"Or > 200 dans une run",survivant:"3 fuites de combat"}[e]||"Inconnu"}function xk(){const{resetGame:e}=M(),[t,n]=b.useState([]),[r,i]=b.useState(null),[s,o]=b.useState("all"),[a,u]=b.useState(!0);b.useEffect(()=>{c()},[]);const c=async()=>{u(!0);try{const[m,y]=await Promise.all([vc(),JC()]);n(m),i(y)}catch(m){console.error("Erreur chargement Hall of Fame:",m)}finally{u(!1)}},f=t.filter(m=>s==="victory"?m.endType==="victory":s==="defeat"?m.endType!=="victory":!0),d=m=>new Date(m).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return a?l.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:l.jsx("div",{children:"Chargement..."})}):l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",flex:1,padding:"1rem",overflowY:"auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[l.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"HALL OF FAME"}),l.jsx("button",{onClick:e,style:{fontSize:"0.9rem",padding:"0.5rem 1rem",marginTop:"0.5rem"},children:"RETOUR"})]}),r&&l.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"0.75rem"},children:"STATISTIQUES GLOBALES"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.9rem"},children:[l.jsxs("div",{children:["Runs totales : ",l.jsx("span",{style:{color:"#ca8"},children:r.totalRuns})]}),l.jsxs("div",{children:["Victoires : ",l.jsx("span",{style:{color:"#2ecc71"},children:r.victories})]}),l.jsxs("div",{children:["Dfaites : ",l.jsx("span",{style:{color:"#c44"},children:r.defeats})]}),l.jsxs("div",{children:["Meilleur score : ",l.jsxs("span",{style:{color:"#ca8"},children:[r.bestDays," jours"]})]}),l.jsxs("div",{children:["Meilleur or : ",l.jsxs("span",{style:{color:"#ca8"},children:[r.bestGold,""]})]}),l.jsxs("div",{children:["Items lgendaires : ",l.jsx("span",{style:{color:"#f39c12"},children:r.totalLegendaryItems})]})]})]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("button",{onClick:()=>o("all"),style:{flex:1,padding:"0.75rem",background:s==="all"?"#3a3a3a":"#1a1a1a",border:`1px solid ${s==="all"?"#555":"#333"}`},children:"TOUTES"}),l.jsx("button",{onClick:()=>o("victory"),style:{flex:1,padding:"0.75rem",background:s==="victory"?"#3a3a3a":"#1a1a1a",border:`1px solid ${s==="victory"?"#555":"#333"}`},children:"VICTOIRES"}),l.jsx("button",{onClick:()=>o("defeat"),style:{flex:1,padding:"0.75rem",background:s==="defeat"?"#3a3a3a":"#1a1a1a",border:`1px solid ${s==="defeat"?"#555":"#333"}`},children:"DFAITES"})]}),f.length===0?l.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#888",fontStyle:"italic"},children:"Aucune run archive"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:f.map(m=>l.jsxs("div",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",border:`1px solid ${m.endType==="victory"?"#2ecc71":"#c44"}`,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:m.endType==="victory"?"#2ecc71":"#c44"},children:m.endTitle}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"#888"},children:[m.origin,"  ",d(m.timestamp)]})]}),l.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#ca8"},children:[m.daysLived," jours"]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.85rem",color:"#aaa"},children:[l.jsxs("div",{children:["Or final : ",l.jsxs("span",{style:{color:"#ca8"},children:[m.finalGold,""]})]}),l.jsxs("div",{children:["Dette : ",l.jsxs("span",{style:{color:"#c44"},children:[m.finalDebt,""]})]}),l.jsxs("div",{children:["Rputation : ",l.jsx("span",{style:{color:"#ddd"},children:"".repeat(m.finalReputation)})]}),l.jsxs("div",{children:["Combats : ",l.jsx("span",{style:{color:"#2ecc71"},children:m.combatsWon})," / ",l.jsx("span",{style:{color:"#c44"},children:m.combatsLost})]}),m.legendaryItems.length>0&&l.jsxs("div",{style:{gridColumn:"1 / -1"},children:["Items lgendaires : ",l.jsx("span",{style:{color:"#f39c12"},children:m.legendaryItems.length})]})]})]},m.id))})]})}let no=[],bs=null;function gm(e){Hy(),document.querySelectorAll(e).forEach(n=>{n instanceof HTMLElement&&(n.classList.add("tutorial-highlight"),no.push(n))})}function Hy(){no.forEach(e=>{e.classList.remove("tutorial-highlight")}),no=[]}function ym(e=[]){Gy();const t=document.createElement("div");t.className="tutorial-overlay",t.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    z-index: 9998;
    pointer-events: auto;
  `,t.addEventListener("click",n=>{const r=n.target,i=no.some(o=>o.contains(r)),s=e.some(o=>{const a=document.querySelectorAll(o);return Array.from(a).some(u=>u.contains(r))});!i&&!s&&(n.stopPropagation(),n.preventDefault())}),document.body.appendChild(t),bs=t}function Gy(){bs&&(bs.remove(),bs=null)}function Vr(){Hy(),Gy()}const Sk="souda_meta",Ca="tutorial";async function vm(e){return new Promise(t=>{if(typeof indexedDB>"u"){t();return}const n=indexedDB.open(Sk,4);n.onerror=()=>{console.error("Erreur sauvegarde tutorial state"),t()},n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains("metaProgression")||i.createObjectStore("metaProgression"),i.objectStoreNames.contains("tutorial")||i.createObjectStore("tutorial"),i.objectStoreNames.contains("unlocks")||i.createObjectStore("unlocks"),i.objectStoreNames.contains("hallOfFame")||i.createObjectStore("hallOfFame",{keyPath:"id"})},n.onsuccess=()=>{const r=n.result;if(!r.objectStoreNames.contains(Ca)){console.warn("Object store tutorial n'existe pas, impossible de sauvegarder"),t();return}try{const o=r.transaction([Ca],"readwrite").objectStore(Ca).put(e,"completed");o.onerror=()=>{console.error("Erreur criture tutorial state"),t()},o.onsuccess=()=>{t()}}catch(i){console.error("Erreur lors de l'accs  l'object store tutorial:",i),t()}}})}function xm({onSkip:e,onStepChange:t}){const[n,r]=b.useState(0),[i,s]=b.useState(!1),[o,a]=b.useState(""),[u,c]=b.useState(0),d=[["La bataille est perdue.","Vos compagnons sont morts.","Vous fuyez dans la nuit..."],[],[],[]][n]||[],m=d[u]||"";return b.useEffect(()=>{if(n===0){a(""),c(0);const y=d.length*3e3+2e3,g=setTimeout(()=>{r(1),t&&t(1)},Math.max(2e4,y));return()=>clearTimeout(g)}},[n,d.length]),b.useEffect(()=>{if(n===0&&m)if(o.length<m.length){const y=setTimeout(()=>{a(m.slice(0,o.length+1))},50);return()=>clearTimeout(y)}else{const y=setTimeout(()=>{u<d.length-1&&(c(u+1),a(""))},2e3);return()=>clearTimeout(y)}},[n,m,o,u,d.length]),b.useEffect(()=>{if(n===1){Vr();const y=setTimeout(()=>{r(2),t&&t(2)},2e4);return()=>clearTimeout(y)}},[n,t]),n===0?l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#000",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:1e4,padding:"2rem",textAlign:"center"},children:l.jsx(Oe,{mode:"wait",children:d.map((y,g)=>g!==u?null:l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},style:{fontSize:"1.5rem",color:"#ca8",lineHeight:"1.8",minHeight:"3rem"},children:[o,o.length===y.length&&l.jsx("span",{style:{opacity:1},children:"|"})]},g))})}):n===1?l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:1e4,padding:"2rem"},children:l.jsxs(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{background:"#2a2a2a",padding:"2rem",borderRadius:"8px",border:"2px solid #555",maxWidth:"500px",width:"100%"},children:[l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem",color:"#ca8"},children:"Morten"}),l.jsxs("div",{style:{fontSize:"1rem",lineHeight:"1.6",marginBottom:"1.5rem",color:"#ddd"},children:['"Ah, un autre rat qui fuit le navire..."',l.jsx("br",{}),l.jsx("br",{}),`"Je peux te cacher. Mais rien n'est gratuit."`,l.jsx("br",{}),l.jsx("br",{}),`"Tu me dois 80 pices d'or. Tu as 20 jours."`]}),l.jsx(P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:1,type:"spring"},style:{fontSize:"1.5rem",fontWeight:"bold",color:"#c44",marginBottom:"1rem",textAlign:"center"},children:"Dette : 80"}),l.jsx("div",{style:{fontSize:"0.9rem",color:"#aaa",fontStyle:"italic",textAlign:"center"},children:"Chaque jour, les intrts augmentent..."})]})}):n===2?l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,pointerEvents:"none"},children:l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{position:"absolute",bottom:"2rem",left:"50%",transform:"translateX(-50%)",background:"rgba(42, 42, 42, 0.95)",padding:"1.5rem",borderRadius:"8px",border:"2px solid #555",maxWidth:"500px",width:"90%",pointerEvents:"auto"},children:[l.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#ca8"},children:"Voici tout ce qu'il te reste."}),l.jsx("div",{style:{fontSize:"0.95rem",color:"#ddd",lineHeight:"1.6",marginBottom:"1rem"},children:"quipe ton arme pour commencer."})]})}):n===3?l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,pointerEvents:"none"},children:l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{position:"absolute",bottom:"2rem",left:"50%",transform:"translateX(-50%)",background:"rgba(42, 42, 42, 0.95)",padding:"1.5rem",borderRadius:"8px",border:"2px solid #555",maxWidth:"500px",width:"90%",pointerEvents:"auto"},children:[l.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#ca8"},children:"Explore les environs."}),l.jsx("div",{style:{fontSize:"0.95rem",color:"#ddd",lineHeight:"1.6"},children:"Trouve de quoi rembourser. Chaque objet a une valeur. Revends au march."})]})}):null}function bk(){const{setPhase:e,dailyLocations:t,equipment:n,currentEvent:r}=M(),[i,s]=b.useState(2);b.useEffect(()=>{if(i===2)e("inventory"),setTimeout(()=>{gm("[data-tutorial-inventory]"),ym(["[data-tutorial-inventory]","[data-tutorial-equip-button]"])},500);else if(i===3){if(t.length===0){const u=Uh(1);M.setState({dailyLocations:u,phase:"exploration",actionsRemaining:3})}else e("exploration");setTimeout(()=>{gm('[data-tutorial-location="true"]'),ym(['[data-tutorial-location="true"]','[data-tutorial-explore-button="true"]'])},500)}},[i,e,t.length]),b.useEffect(()=>{i===2&&n.weapon&&(Vr(),setTimeout(()=>{s(3)},2e3))},[i,n.weapon]),b.useEffect(()=>{i===3&&(r==="loot"||r==="combat")&&(Vr(),setTimeout(()=>{o()},2e3))},[i,r]);const o=async()=>{Vr(),await vm(!0),e("aube")},a=async()=>{i<2||(Vr(),await vm(!0),e("aube"))};return i===2?l.jsxs(l.Fragment,{children:[l.jsx($y,{}),l.jsx(xm,{onSkip:a})]}):i===3?l.jsxs(l.Fragment,{children:[l.jsx(Oy,{locations:t,onExplore:u=>{M.getState().exploreLocation(u)},onEndDay:()=>{}}),l.jsx(xm,{onSkip:a})]}):null}function wk(){const{setPhase:e}=M(),{setVolume:t,mute:n,unmute:r,setMusicEnabled:i,setSfxEnabled:s,getSettings:o}=Ro(),[a,u]=b.useState(o()),[c,f]=b.useState(sr.isEnabled()),[d,m]=b.useState(a.volume*100);b.useEffect(()=>{u(o()),f(sr.isEnabled()),m(o().volume*100)},[]);const y=p=>{m(p),t(p/100)},g=()=>{a.muted?r():n(),u(o())},x=()=>{i(!a.musicEnabled),u(o())},S=()=>{s(!a.sfxEnabled),u(o())},h=()=>{const p=!c;sr.setEnabled(p),f(p)};return l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",flex:1,padding:"1rem",overflowY:"auto"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[l.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:"PARAMTRES"}),l.jsx("button",{onClick:()=>e("aube"),style:{fontSize:"0.9rem",padding:"0.5rem 1rem"},children:"RETOUR"})]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1.5rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"},children:"AUDIO"}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[l.jsx("div",{style:{fontSize:"1rem"},children:"Volume"}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"#aaa"},children:[Math.round(d),"%"]})]}),l.jsx("input",{type:"range",min:"0",max:"100",value:d,onChange:p=>y(Number(p.target.value)),style:{width:"100%",height:"8px",background:"#1a1a1a",borderRadius:"4px",outline:"none",cursor:"pointer"}})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsx("div",{style:{fontSize:"1rem"},children:"Mute"}),l.jsx("button",{onClick:g,style:{padding:"0.5rem 1rem",background:a.muted?"#c44":"#555",border:`2px solid ${a.muted?"#e66":"#777"}`},children:a.muted?"ACTIV":"DSACTIV"})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsx("div",{style:{fontSize:"1rem"},children:"Musique"}),l.jsx("button",{onClick:x,style:{padding:"0.5rem 1rem",background:a.musicEnabled?"#555":"#c44",border:`2px solid ${a.musicEnabled?"#777":"#e66"}`},children:a.musicEnabled?"ACTIVE":"DSACTIVE"})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsx("div",{style:{fontSize:"1rem"},children:"Effets sonores"}),l.jsx("button",{onClick:S,style:{padding:"0.5rem 1rem",background:a.sfxEnabled?"#555":"#c44",border:`2px solid ${a.sfxEnabled?"#777":"#e66"}`},children:a.sfxEnabled?"ACTIVS":"DSACTIVS"})]})]}),l.jsxs("div",{style:{background:"#2a2a2a",padding:"1.5rem",borderRadius:"8px",border:"2px solid #555"},children:[l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"},children:"VIBRATIONS"}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:"#1a1a1a",borderRadius:"4px"},children:[l.jsx("div",{style:{fontSize:"1rem"},children:"Vibrations (mobile)"}),l.jsx("button",{onClick:h,style:{padding:"0.5rem 1rem",background:c?"#555":"#c44",border:`2px solid ${c?"#777":"#e66"}`},children:c?"ACTIVES":"DSACTIVES"})]})]})]})}function Tk(){const e=M(t=>t.phase);b.useEffect(()=>{const t=F.getSettings();if(!(t.muted||!t.musicEnabled)){switch(e){case"aube":case"marche":case"morten":case"forge":case"taverne":case"inventory":F.playMusic("ambient_camp",1e3);break;case"exploration":F.playMusic("ambient_explore",1e3);break;case"crepuscule":F.playMusic("ambient_camp",1e3);break;case"start":case"origin":case"tutorial":case"defeat":case"victory":case"hallOfFame":case"settings":F.stopMusic(500);break}return()=>{}}},[e])}function Ck({children:e,phase:t}){const n=Dt(),r=Iy(),i=n||r,s=["marche","morten","forge","taverne","inventory","settings"].includes(t);return i?l.jsx("div",{style:{width:"100%",flex:1,display:"flex",flexDirection:"column"},children:e}):l.jsx(Oe,{mode:"wait",children:l.jsx(P.div,{initial:s?{opacity:0,x:20}:{opacity:0},animate:s?{opacity:1,x:0}:{opacity:1},exit:s?{opacity:0,x:-20}:{opacity:0},transition:{duration:.2,ease:"easeOut"},style:{width:"100%",flex:1,display:"flex",flexDirection:"column"},children:e},t)})}async function kk(){if(typeof indexedDB>"u"){console.warn("IndexedDB not available");return}const e=["souda_save","souda_meta","hallOfFame"];for(const t of e)try{const n=indexedDB.deleteDatabase(t);await new Promise((r,i)=>{n.onsuccess=()=>{console.log(`IndexedDB ${t} supprime`),r()},n.onerror=()=>{console.error(`Erreur suppression ${t}:`,n.error),i(n.error)},n.onblocked=()=>{console.warn(`${t} est bloque, ressayez`),r()}})}catch(n){console.error(`Erreur lors de la suppression de ${t}:`,n)}}function jk(){try{localStorage.clear(),console.log("localStorage nettoy")}catch(e){console.error("Erreur lors du nettoyage localStorage:",e)}}async function Ek(){console.log(" Nettoyage du cache en cours...");try{await kk(),jk(),console.log(" Cache nettoy, rechargement de la page..."),await new Promise(e=>setTimeout(e,500)),window.location.reload()}catch(e){console.error(" Erreur lors du nettoyage:",e),window.location.reload()}}function Mk(){const[e,t]=b.useState(!1),{resetGame:n,phase:r,day:i,gold:s,debt:o}=M(),a=async()=>{confirm(` Vider tout le cache et recharger ?

 Action irrversible !`)&&await Ek()},u=()=>{confirm(" Reset du jeu (sans nettoyer le cache) ?")&&(n(),t(!1))},c=()=>{const f=M.getState();console.log(" TAT DU JEU:",{phase:r,day:i,gold:s,debt:o,reputation:f.reputation,inventory:f.inventory.length,equipment:Object.keys(f.equipment).length,combatsWon:f.combatsWon,combatsLost:f.combatsLost,fullState:f}),alert("tat du jeu affich dans la console (F12)"),t(!1)};return l.jsxs("div",{style:{position:"fixed",top:"10px",left:"10px",zIndex:9999,fontFamily:"monospace"},children:[l.jsx("button",{onClick:()=>t(!e),style:{padding:"0.5rem",background:"transparent",border:"2px solid #e66",color:"#fff",fontSize:"0.7rem",fontWeight:"bold",cursor:"pointer",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"},title:"Debug Panel",children:""}),e&&l.jsxs("div",{style:{marginTop:"0.5rem",background:"#2a1a1a",border:"2px solid #c44",borderRadius:"4px",padding:"0.75rem",minWidth:"200px",boxShadow:"0 4px 8px rgba(0,0,0,0.5)"},children:[l.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"bold",color:"#f88",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("span",{children:"DEBUG"}),l.jsx("button",{onClick:()=>t(!1),style:{background:"transparent",border:"none",color:"#f88",cursor:"pointer",fontSize:"1rem",padding:"0"},children:""})]}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"#aaa",marginBottom:"0.75rem",padding:"0.5rem",background:"#1a0a0a",borderRadius:"2px"},children:["J",i," | ",s," | ",o," | ",r]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.jsx("button",{onClick:c,style:{padding:"0.5rem",background:"#555",border:"1px solid #777",color:"#fff",fontSize:"0.7rem",cursor:"pointer",borderRadius:"2px",textAlign:"left"},onMouseEnter:f=>{f.currentTarget.style.background="#666"},onMouseLeave:f=>{f.currentTarget.style.background="#555"},children:" tat console"}),l.jsx("button",{onClick:u,style:{padding:"0.5rem",background:"#555",border:"1px solid #777",color:"#fff",fontSize:"0.7rem",cursor:"pointer",borderRadius:"2px",textAlign:"left"},onMouseEnter:f=>{f.currentTarget.style.background="#666"},onMouseLeave:f=>{f.currentTarget.style.background="#555"},children:" Reset jeu"}),l.jsx("button",{onClick:a,style:{padding:"0.5rem",background:"#c44",border:"1px solid #e66",color:"#fff",fontSize:"0.7rem",cursor:"pointer",borderRadius:"2px",textAlign:"left",fontWeight:"bold"},onMouseEnter:f=>{f.currentTarget.style.background="#d55"},onMouseLeave:f=>{f.currentTarget.style.background="#c44"},children:" Cache + Reload"})]})]})]})}const Rk=[{id:"aube_first",title:"Bienvenue  l'Aube",text:"C'est le dbut de ta journe. Tu peux visiter le March, la Forge, l'Usurier ou la Taverne. Puis pars en exploration.",phase:"aube",condition:e=>e.day===1},{id:"exploration_first",title:"Exploration",text:"Choisis un lieu  explorer. Les rumeurs (icnes) t'aident  savoir o aller. Chaque exploration cote 1 action.",phase:"exploration",condition:e=>e.day===1&&e.actionsRemaining===3},{id:"inventory_first",title:"Inventaire",text:"quipe tes meilleurs items pour augmenter tes stats (ATK, DEF, VIT). Les items compromis ont des malus cachs.",phase:"inventory",condition:e=>e.inventory.length>0&&!e.npcFlags.inventoryGuideSeen},{id:"taverne_rumors",title:"Rumeurs",text:`Les rumeurs apparaissent ici chaque jour. Elles t'aident  planifier tes explorations. Clique sur "Dtails" pour voir leur impact.`,phase:"taverne",condition:e=>e.rumors.length>0&&!e.npcFlags.taverneGuideSeen},{id:"marche_first",title:"March",text:"Achte et vends des items ici. Les prix varient selon ta rputation et tes compteurs narratifs.",phase:"marche",condition:e=>e.day<=3&&!e.npcFlags.marcheGuideSeen},{id:"forge_first",title:"Forge",text:"Rpare tes items ici. Plus l'item est rare, plus c'est cher. Le pragmatisme rduit les cots.",phase:"forge",condition:e=>Object.values(e.equipment).some(n=>n&&n.durability&&n.durability<100)&&!e.npcFlags.forgeGuideSeen},{id:"morten_first",title:"Usurier",text:"Rembourse ta dette ici. Les intrts augmentent chaque jour. Priorise le remboursement.",phase:"morten",condition:e=>e.debt>100&&!e.npcFlags.mortenGuideSeen},{id:"crepuscule_first",title:"Crpuscule",text:"C'est la fin de ta journe. Tu peux avoir des vnements du soir et voir ta progression vers les fins.",phase:"crepuscule",condition:e=>e.day===1}];function Pk({phase:e}){const[t,n]=b.useState(null),[r,i]=b.useState(new Set),s=M();if(b.useEffect(()=>{const a=Rk.find(u=>!(r.has(u.id)||u.phase&&u.phase!==e||u.condition&&!u.condition(s)));n(a||null)},[e,s,r]),!t)return null;const o=()=>{i(u=>new Set([...u,t.id])),n(null);const a=`${t.id.replace("_first","")}GuideSeen`;a in s.npcFlags&&M.setState({npcFlags:{...s.npcFlags,[a]:!0}})};return l.jsxs("div",{style:{position:"fixed",bottom:"1rem",right:"1rem",background:"#2a2a2a",border:"2px solid #4a4",borderRadius:"8px",padding:"1rem",maxWidth:"300px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[l.jsxs("h3",{style:{margin:0,fontSize:"1rem",color:"#ddd",marginBottom:"0.5rem"},children:[" ",t.title]}),l.jsx("button",{onClick:o,style:{background:"transparent",border:"none",color:"#888",cursor:"pointer",fontSize:"1.2rem",padding:"0",marginLeft:"0.5rem"},title:"Fermer",children:""})]}),l.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"#aaa",lineHeight:"1.5"},children:t.text})]})}function Ik({children:e}){const[t,n]=b.useState(()=>{if(typeof window>"u")return!1;const r=typeof window<"u"&&window.document!==void 0,i=window.innerWidth>500;return r&&i});return b.useEffect(()=>{const r=()=>{const i=typeof window<"u"&&window.document!==void 0,s=window.innerWidth>500;n(i&&s)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),t?l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto",padding:"1rem"},children:l.jsx("div",{style:{maxWidth:"480px",width:"100%",height:"100%",maxHeight:"100vh",background:"#1a1a1a",borderRadius:"8px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:e})}):l.jsx("div",{style:{width:"100%",height:"100vh",minHeight:"100vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:e})}function Lk(){const e=M(n=>n.phase),t=Dt();return Tk(),l.jsx(Ik,{children:l.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",padding:t?"0.5rem":"1rem",fontSize:t?"0.9rem":"1rem",overflow:"auto"},children:[l.jsx(Mk,{}),l.jsx(Pk,{phase:e}),l.jsxs(Ck,{phase:e,children:[e==="start"&&l.jsx(mC,{}),e==="tutorial"&&l.jsx(bk,{}),e==="aube"&&l.jsx(DC,{}),e==="exploration"&&l.jsx(UC,{}),e==="crepuscule"&&l.jsx(YC,{}),e==="defeat"&&l.jsx(ik,{}),e==="victory"&&l.jsx(sk,{}),e==="inventory"&&l.jsx($y,{}),e==="marche"&&l.jsx(ok,{}),e==="morten"&&l.jsx(lk,{}),e==="forge"&&l.jsx(uk,{}),e==="taverne"&&l.jsx(pk,{}),e==="narrative"&&l.jsx(gk,{}),e==="origin"&&l.jsx(yk,{}),e==="hallOfFame"&&l.jsx(xk,{}),e==="settings"&&l.jsx(wk,{})]})]})})}const Ky=typeof window<"u"&&window.document!==void 0;if(Ky){typeof indexedDB<"u"?console.log(" Running on Web - Storage Check OK (IndexedDB available)"):console.warn(" Running on Web - IndexedDB not available, using localStorage fallback");try{localStorage.setItem("_storage_test","ok"),localStorage.removeItem("_storage_test"),console.log(" Running on Web - localStorage Check OK")}catch(e){console.error(" Running on Web - localStorage not available:",e)}}Ky&&"serviceWorker"in navigator&&window.addEventListener("load",()=>{const t="/souda/"+"sw.js";navigator.serviceWorker.getRegistrations().then(n=>{n.forEach(r=>{r.unregister()}),setTimeout(()=>{navigator.serviceWorker.register(t,{updateViaCache:"none"}).then(r=>{r.update()}).catch(r=>{console.warn(" Erreur enregistrement Service Worker:",r)})},100)})});$h().then(e=>{e&&M.setState(e)});ka.createRoot(document.getElementById("root")).render(l.jsx(Im.StrictMode,{children:l.jsx(Lk,{})}));
